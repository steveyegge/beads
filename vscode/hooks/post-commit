#!/bin/bash
# post-commit hook - Beads-First Application
# STATUS: GREEN FIELD - LOGGING ONLY

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/../.." && pwd)"
LOG_SCRIPT="$PROJECT_ROOT/scripts/beads-log-event.sh"

# Get the commit hash
COMMIT_HASH=$(git rev-parse HEAD 2>/dev/null || echo "unknown")
COMMIT_MSG=$(git log -1 --pretty=%s 2>/dev/null || echo "unknown")

# Log hook trigger
if [ -x "$LOG_SCRIPT" ]; then
    "$LOG_SCRIPT" "hk.post-commit" "$COMMIT_HASH" "$COMMIT_MSG"
fi

echo "═══════════════════════════════════════════════════════════════"
echo "HOOK TRIGGERED: post-commit"
echo "COMMIT: $COMMIT_HASH"
echo "MESSAGE: $COMMIT_MSG"
echo "STATUS: Logging only - no processing implemented"
echo "EVENT: hk.post-commit logged to .beads/events.log"
echo "═══════════════════════════════════════════════════════════════"

# FUTURE PROCESSING (not active):
# - Auto-sync beads after commit
# - Extract issue ID from commit message
# - Update issue with commit reference

exit 0
