{"id":"bd-03z45","title":"Review \u0026 merge PR #1019: feat(ui) Markdown in comments","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #1019: https://github.com/steveyegge/beads/pull/1019\n\n## Summary\nApply ui.RenderMarkdown() to comment text in bd show and bd comments commands. Enables syntax highlighting and code blocks in comments.\n\n## Changes\n- cmd/bd/comments.go - Use RenderMarkdown for comment text\n- cmd/bd/show.go - Use RenderMarkdown for comment display (2 places)\n\n## Review Checklist\n- [ ] Pull the branch locally\n- [ ] Run tests: go test ./...\n- [ ] Test manually: create a comment with markdown, verify it renders\n- [ ] Merge with gh pr merge 1019 --repo steveyegge/beads --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:14:20Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T02:17:40Z","closed_at":"2026-01-12T02:17:40Z","comments":[{"id":1,"issue_id":"bd-03z45","author":"beads/crew/giles","text":"Testing markdown:\n\n- Bullet 1\n- Bullet 2\n\n```go\nfunc hello() {\n    fmt.Println(\"Hello\")\n}\n```\n\n**Bold** and *italic*","created_at":"2026-01-12T02:16:51Z"}],"work_type":"mutex"}
{"id":"bd-0479m","title":"Add --tree flag to bd show for hierarchical display","description":"bd show \u003cepic-id\u003e --tree should display the epic with all its children in a tree format, showing the parent-child hierarchy visually. Currently returns 'unknown flag: --tree'.\n\n(Moved from hq-0ivf7f)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-21T01:37:13Z","created_by":"mayor","updated_at":"2026-01-21T01:37:13Z","work_type":"mutex"}
{"id":"bd-09kt","title":"GHI #888: Add flag aliases for dep add command to reduce Claude token waste","description":"GitHub Issue #888: Add flag aliases for dep add command to reduce Claude token waste\n\nhttps://github.com/steveyegge/beads/issues/888","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-04T19:22:15Z","created_by":"mayor","updated_at":"2026-01-04T23:22:08Z","closed_at":"2026-01-04T19:29:53Z","work_type":"mutex"}
{"id":"bd-0gm4r","title":"bd delete --hard --force creates tombstones that block bd create","description":"dispatched_by: gastown/crew/max\n\n## Problem\n\nWhen using `bd delete --hard --force \u003cbead-id\u003e`, the bead is not truly deleted. Instead, a tombstone record is created (status='tombstone', deleted_at=X).\n\nThis tombstone:\n- Is invisible to `bd show` (returns 'not found')\n- Cannot be reopened with `bd reopen` (returns 'not found')\n- BUT blocks `bd create --id=\u003csame-id\u003e` with UNIQUE constraint error\n\n## Reproduction\n\n```bash\nbd create --id=bd-test-123 'Test bead'\nbd delete --hard --force bd-test-123\nbd show bd-test-123           # 'not found' (expected)\nbd reopen bd-test-123         # 'not found' (unexpected?)\nbd create --id=bd-test-123 'New bead'  # UNIQUE constraint failed!\n```\n\n## Impact\n\nGas Town polecats that are removed and later respawned with the same name fail on agent bead creation. The workaround (PR #452 in gastown) uses `bd close` instead of `bd delete --hard --force`.\n\n## Expected Behavior\n\nEither:\n1. `bd delete --hard --force` should truly delete the record (no tombstone), OR\n2. Tombstones should be visible and reopenable, OR\n3. `bd create` should handle tombstones gracefully (delete tombstone and create fresh)\n\n## Discovered\n\nWhile investigating polecat respawn failures in Gas Town. See gastown PR #452 for the workaround.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-14T01:47:29Z","created_by":"gastown/crew/max","updated_at":"2026-01-15T04:37:33Z","closed_at":"2026-01-15T04:37:33Z","work_type":"mutex"}
{"id":"bd-0hi7","title":"Add --dry-run flag to bd create","description":"bd create should support a --dry-run flag to preview what would be created without actually creating the issue. Useful for scripting and validation.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-07T08:56:03Z","created_by":"gastown/crew/george","updated_at":"2026-01-07T09:05:06Z","closed_at":"2026-01-07T09:05:06Z","work_type":"mutex"}
{"id":"bd-0sgd","title":"Design escalation inbox for stuck workflows","description":"## Summary\n\nExtend the existing `gt escalate` system with tiered routing, structured decision patterns, and integration with gates and patrol lifecycles.\n\n## Background\n\nFrom gate design discussion and workflow analysis. Gas Town needs:\n1. Structured way for workers to request decisions (not just free-form escalation)\n2. Tiered routing (Deacon -\u003e Mayor -\u003e Overseer) instead of direct-to-human\n3. Integration with gates (timeout -\u003e escalate)\n4. Formalized patterns for all worker exit scenarios\n\n## Current State (what exists)\n\nThe escalation system is already partially built:\n\n- `gt escalate` command: CRITICAL/HIGH/MEDIUM severity\n- Creates bead tagged `escalation`\n- Sends mail to `overseer`\n- Mayor checks pending escalations on `gt prime`\n- Exit type `ESCALATED` for polecats\n- Event logging: `escalation_sent`\n\nSee: `gastown/docs/escalation.md`\n\n## What's Missing\n\n| Gap | Current | Proposed |\n|-----|---------|----------|\n| Tiered routing | Direct to overseer | Deacon -\u003e Mayor -\u003e Overseer |\n| Decision pattern | Free-form topic | Structured options in issue |\n| Categories | Just \"escalation\" tag | decision, help, blocked, failed, emergency |\n| Gate integration | None | Gate timeout -\u003e escalate |\n| Patrol integration | Ad-hoc | Formalized paths |\n\n## Design\n\n### Escalation Categories\n\n| Category | Description | Default Destination |\n|----------|-------------|---------------------|\n| `decision` | Multiple valid paths, need choice | Deacon -\u003e Mayor |\n| `help` | Need guidance/expertise | Deacon -\u003e Mayor |\n| `blocked` | Waiting on unresolvable dependency | Mayor |\n| `failed` | Unexpected error, can't proceed | Deacon |\n| `emergency` | Security/data integrity | Overseer (direct) |\n| `gate_timeout` | Gate didn't resolve in time | Deacon |\n| `lifecycle` | Worker stuck/needs recycle | Witness |\n\n### Extended Command\n\n```bash\n# Current (unchanged)\ngt escalate \"Something went wrong\"\ngt escalate -s CRITICAL \"Data corruption\"\n\n# New: Category-based\ngt escalate --type decision \"Which auth approach?\"\ngt escalate --type help \"Need architecture guidance\"\ngt escalate --type blocked \"Waiting on bd-xyz\"\ngt escalate --type failed \"Tests failing unexpectedly\"\ngt escalate --type emergency \"Security vulnerability found\"\n\n# New: Tiered routing\ngt escalate --to deacon \"Infra issue\"\ngt escalate --to mayor \"Cross-rig coordination needed\"\ngt escalate --to overseer \"Human judgment required\"\n\n# New: Structured decision\ngt escalate --type decision \\\n  --question \"Which authentication approach?\" \\\n  --options \"JWT tokens,Session cookies,OAuth2\" \\\n  --context \"Admin panel needs login\" \\\n  --issue bd-xyz\n```\n\n### Decision Pattern in Issues\n\nWhen `--type decision` is used, the issue is updated with structured format:\n\n```markdown\n## Decision Needed\n\n**Question:** Which authentication approach?\n\n| Option | Description |\n|--------|-------------|\n| A | JWT tokens |\n| B | Session cookies |\n| C | OAuth2 |\n\n**Context:** Admin panel needs login\n\n**Escalated by:** beads/polecats/obsidian\n**Escalated at:** 2026-01-01T15:00:00Z\n\n**To resolve:**\n1. Comment with chosen option (e.g., \"Decision: A\")\n2. Reassign to work queue or original worker\n```\n\nThis makes the issue the async communication channel for decisions.\n\n### Tiered Escalation Flow\n\n```\nWorker encounters issue\n    |\n    v\ngt escalate --type \u003ccategory\u003e --to \u003ctier\u003e\n    |\n    v\n[Deacon receives]\n    |\n    +-- Can resolve? --\u003e Updates issue, re-slings work\n    |\n    +-- Cannot resolve? --\u003e gt escalate --to mayor --forward\n                                |\n                                v\n                           [Mayor receives]\n                                |\n                                +-- Can resolve? --\u003e Updates issue, re-slings\n                                |\n                                +-- Cannot resolve? --\u003e gt escalate --to overseer\n                                                            |\n                                                            v\n                                                       [Overseer resolves]\n```\n\nEach tier can resolve OR forward. The escalation bead tracks the chain via comments/notes.\n\n### Integration Points\n\n#### Gate Timeouts (bd-7zka.2)\n\n```go\n// In Witness patrol (timer gates)\nif gate.Expired() {\n    exec.Command(\"gt\", \"escalate\",\n        \"--type\", \"gate_timeout\",\n        \"--severity\", \"HIGH\",\n        \"--issue\", gate.BlockedIssueID,\n        fmt.Sprintf(\"Gate %s timed out after %s\", gate.ID, gate.Timeout)).Run()\n}\n```\n\n#### Witness Patrol\n\nWitness already detects stuck polecats. Formalize as escalation:\n\n```go\n// Instead of ad-hoc mail\nexec.Command(\"gt\", \"escalate\",\n    \"--type\", \"lifecycle\",\n    \"--to\", \"mayor\",\n    \"--issue\", polecat.CurrentIssue,\n    fmt.Sprintf(\"Polecat %s stuck: no progress for %d minutes\", polecat.ID, minutes)).Run()\n```\n\n#### Refinery\n\nOn merge failures that can't be auto-resolved:\n\n```go\nexec.Command(\"gt\", \"escalate\",\n    \"--type\", \"failed\",\n    \"--issue\", mr.IssueID,\n    \"Merge failed: \"+reason).Run()\n```\n\n### Polecat Exit with Escalation\n\n```bash\n# Worker reaches decision point\n\n# 1. Update issue with decision structure\nbd update $ISSUE --notes \"$(cat \u003c\u003cEOF\n## Decision Needed\n\n**Question:** Which approach for caching?\n\n| Option | Description |\n|--------|-------------|\n| A | Redis (external dependency) |\n| B | In-memory (simpler, no persistence) |\n| C | SQLite (local persistence) |\n\n**Context:** API response times are slow, need caching layer.\nEOF\n)\"\n\n# 2. Escalate\ngt escalate --type decision --issue $ISSUE \"Caching approach needs decision\"\n\n# 3. Exit cleanly\ngt done --exit ESCALATED\n```\n\n### New Issue Statuses\n\nConsider adding to beads:\n\n| Status | Meaning |\n|--------|---------|\n| `decision_needed` | Waiting for decision from escalation |\n| `escalated` | General escalation pending |\n\nOr keep using `blocked` with escalation tag - simpler.\n\n## Implementation Plan\n\n### Phase 1: Extend gt escalate\n- Add `--type` flag for categories\n- Add `--to` flag for routing (deacon, mayor, overseer)\n- Add `--forward` flag for tier forwarding\n- Keep backward compatibility\n\n### Phase 2: Decision Pattern\n- Add `--question`, `--options`, `--context` flags\n- Auto-update issue with decision structure\n- Parse decision from issue comments on resolution\n\n### Phase 3: Gate Integration\n- Add `gate_timeout` escalation type\n- Witness: check timer gates, escalate on timeout\n- Refinery: check GH gates, escalate on timeout/failure\n\n### Phase 4: Patrol Integration\n- Formalize Witness stuck-polecat as escalation\n- Formalize Refinery merge-failure as escalation\n- Unified escalation handling in Mayor\n\n## Acceptance Criteria\n\n- [ ] `gt escalate --type decision` creates structured issue update\n- [ ] `gt escalate --to deacon|mayor|overseer` routes correctly\n- [ ] Gate timeouts trigger escalation (after bd-7zka.2)\n- [ ] Witness uses escalation for stuck polecats\n- [ ] Refinery uses escalation for merge failures\n- [ ] Escalation chain tracked in bead (who forwarded to whom)\n- [ ] `bd list --tag=escalation --type=decision` filters work\n\n## References\n\n- bd-7zka.2: Gate evaluation (uses escalation for timeouts)\n- gastown/docs/escalation.md: Current escalation protocol\n- gastown/crew/max/internal/cmd/escalate.go: Current implementation","notes":"## Design Complete\n\nThe extended escalation design has been documented in gastown/docs/escalation.md.\n\n**Key design decisions:**\n1. Categories map to default routing tiers\n2. Decision pattern uses issue notes as async communication channel\n3. Gate integration via --type gate_timeout\n4. Lifecycle escalations formalized for Witness/Refinery\n\n**Implementation phases defined:**\n- Phase 1: Extend gt escalate command\n- Phase 2: Add decision pattern flags\n- Phase 3: Gate integration\n- Phase 4: Patrol integration\n\nThe acceptance criteria in this issue describe implementation, not design. Those will be verified when the implementation issues are completed.","status":"closed","priority":2,"issue_type":"feature","assignee":"beads/polecats/quartz","created_at":"2026-01-01T23:03:38Z","created_by":"beads/crew/fang","updated_at":"2026-01-02T00:14:14Z","closed_at":"2026-01-02T00:14:14Z","work_type":"mutex"}
{"id":"bd-0vu3q","title":"Issue to reopen with reason","status":"closed","priority":1,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:01Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:41Z","closed_at":"2026-01-27T03:48:41Z","close_reason":"Test artifact - cleaning up","comments":[{"id":2,"issue_id":"bd-0vu3q","author":"beads/crew/wolf","text":"BG found a regression in production","created_at":"2026-01-12T02:16:00Z"}],"work_type":"mutex"}
{"id":"bd-0ydb","title":"Review PR #834: Add Windows ARM64 build support","description":"Review and potentially merge PR #834 from ramarivera adding native Windows ARM64 (aarch64) build support.\n\nKey changes:\n- GoReleaser: Added bd-windows-arm64 build configuration\n- CI Workflow: Installed gcc-mingw-w64-aarch64 toolchain\n- WinGet Manifest: Added ARM64 installer entry\n- Release Notes: Updated to mention Windows ARM64 support\n\nFixes #833. No code changes - purely build configuration.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","created_at":"2026-01-01T18:45:51Z","created_by":"beads/crew/wolf","updated_at":"2026-01-01T18:50:06Z","closed_at":"2026-01-01T18:50:06Z","work_type":"mutex"}
{"id":"bd-10go0","title":"Clean up beads-metadata branch: remove worktree and delete remote","description":"## Context\nTwo sync branches are competing:\n- beads-sync (configured, canonical)\n- beads-metadata (legacy, still receiving commits)\n\nmayor/rig has both worktrees. The beads-metadata worktree has uncommitted changes.\n\n## Steps\n1. Check for/stop any daemon still writing to beads-metadata\n2. Merge any divergent data from beads-metadata into beads-sync if needed\n3. Remove beads-metadata worktree from mayor/rig\n4. Delete origin/beads-metadata remote branch\n5. Verify beads-sync is working correctly\n\n## Related\n- bd-wayc3: Fix redirect + sync-branch incompatibility (closed, but cleanup incomplete)\n- bd-g66dq: beads-metadata sync branch deleted from origin (open bug)","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T20:48:54Z","created_by":"beads/crew/fang","updated_at":"2026-01-13T20:50:43Z","closed_at":"2026-01-13T20:50:43Z","work_type":"mutex"}
{"id":"bd-10wg","title":"Migrate config.yaml to config.json","description":"The beads config file uses YAML format (config.yaml) but should use JSON (config.json) for consistency with the rest of the system. gastown has a fallback in internal/rig/manager.go:initBeads that writes YAML format - this needs to be updated once beads supports JSON config.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-01T19:16:56Z","created_by":"gastown/crew/gus","updated_at":"2026-01-01T19:19:35Z","closed_at":"2026-01-01T19:19:35Z","work_type":"mutex"}
{"id":"bd-1258f","title":"Fix: bd doctor doesn't detect lefthook jobs syntax (GH#981)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #981. Doctor only detects lefthook 'commands' not 'jobs' syntax.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/dave","created_at":"2026-01-10T06:20:15Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T06:56:14Z","closed_at":"2026-01-10T06:56:14Z","work_type":"mutex"}
{"id":"bd-161v","title":"Test Classic mode (SQLite + JSONL) still works","description":"Per DOLT-STORAGE-DESIGN-V3.md Mode 1: Classic federation must keep working.\nVerify:\n- SQLite backend functions correctly\n- JSONL export/import works\n- Federation via git works\n- Best for solo devs and small teams","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:45:11Z","created_by":"mayor","updated_at":"2026-01-27T02:45:11Z","labels":["testing"]}
{"id":"bd-16z7","title":"Update convoy queries to use labels","description":"Change convoy-related SQL queries to use gt:convoy label instead of TypeConvoy.\n\n## Work\n- Update closeConvoyIfComplete() in queries.go\n- Update closeConvoyIfCompleteTx() in transaction.go\n- Change issue_type='convoy' checks to label-based queries\n\n## Files\n- internal/storage/sqlite/queries.go\n- internal/storage/sqlite/transaction.go","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T04:40:23Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T06:07:23Z","closed_at":"2026-01-07T06:07:23Z","dependencies":[{"issue_id":"bd-16z7","depends_on_id":"bd-i54l","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-1hc40","title":"Blocking issue","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:13Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:41Z","closed_at":"2026-01-27T03:48:41Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-1pvcu","title":"beads_channel.go: LookupChannelByName has inefficient fallback logic","description":"In internal/beads/beads_channel.go:354-381, LookupChannelByName first tries GetChannelBead(name) which constructs hq-channel-\u003cname\u003e and fetches it. If not found, it falls back to ListChannelBeads() and searches by name field. However, if found by name, it then constructs ChannelBeadID(name) and calls Show() again - but this is the same ID that GetChannelBead already tried and failed to find.\n\nThis logic only makes sense if channels can have non-standard IDs but standard names, but then the fallback would still fail. The function should either:\n1. Return the issue data directly from the list (requires ListChannelBeads to return issues, not just fields)\n2. Store the issue ID from the list entry and use that for the Show() call\n\nLocation: internal/beads/beads_channel.go:354-381","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T03:57:41Z","created_by":"gastown/crew/george","updated_at":"2026-01-22T03:57:41Z","labels":["efficiency","gt:code-review"],"work_type":"mutex"}
{"id":"bd-1slh","title":"Investigate charmbracelet-based TUI for beads","description":"Now that we've merged the create-form command (PR #603) which uses charmbracelet/huh, investigate whether beads should have a more comprehensive TUI.\n\nConsiderations:\n- Should this be in core or a separate binary (bd-tui)?\n- What functionality would benefit from a TUI? (list view, issue details, search, bulk operations)\n- Plugin/extension architecture vs build tags vs separate binary\n- Dependency cost vs user experience tradeoff\n- Target audience: humans who want interactive workflows vs CLI/scripting users\n\nRelated: PR #603 added charmbracelet/huh dependency for create-form command.","notes":"Foundation is in place (lipgloss, huh), but not a priority right now","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-17T22:20:52Z","updated_at":"2026-01-02T08:17:14Z","work_type":"mutex"}
{"id":"bd-1uns0","title":"hook.go: Flawed idempotency check in hookPreCommitDolt","description":"In hookPreCommitDolt (hook.go:417-421), the idempotency check compares prevState.LastExportCommit against currentCommit. However, during pre-commit, the commit hasn't been created yet - getCurrentGitCommit() returns the previous HEAD. This means the check prevents exports if HEAD hasn't changed since last export, which is different from preventing duplicate exports for the same commit.\n\nOptions:\n1. Remove the check (exports are idempotent anyway)\n2. Change to check if there are uncommitted changes in the staging area\n3. Use a different mechanism like checking Dolt's dirty status","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:10:24Z","created_by":"beads/crew/elinor","updated_at":"2026-01-21T02:11:47Z","closed_at":"2026-01-21T02:11:47Z","labels":["bug","hooks"],"work_type":"mutex"}
{"id":"bd-1vc13","title":"Remove or integrate unused EnsureSocketDir/CleanupSocketDir functions","description":"Code review follow-up from GH#1001 fix.\n\nEnsureSocketDir() and CleanupSocketDir() in internal/rpc/socket_path.go are defined but never called:\n- Server's ensureSocketDir() in server_lifecycle_conn.go:144 already handles directory creation\n- Server's Stop() doesn't call CleanupSocketDir()\n\nOptions:\n1. Remove unused functions (YAGNI)\n2. Integrate them into server lifecycle\n3. Keep as exported API for future use\n\nRelated: GH#1001, commit 3ecffa11","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T21:36:34Z","created_by":"beads/crew/wolf","updated_at":"2026-01-10T21:36:34Z","work_type":"mutex"}
{"id":"bd-1wmwp","title":"Cost tracking performance and reliability improvements","description":"Post-merge improvements for the wisp-based cost tracking system (gt-cm900).\n\nThese are non-critical enhancements identified during code review.","status":"closed","priority":3,"issue_type":"epic","assignee":"mayor","created_at":"2026-01-09T06:54:55Z","created_by":"mayor","updated_at":"2026-01-09T08:47:17Z","closed_at":"2026-01-09T08:47:17Z","dependencies":[{"issue_id":"bd-1wmwp","depends_on_id":"bd-3hqvs","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-1wmwp","depends_on_id":"bd-66z6a","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-1wmwp","depends_on_id":"bd-i8zab","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-1wmwp","depends_on_id":"bd-qv8f9","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-28gwn","title":"Review \u0026 merge PR #1019: Markdown rendering in comments","description":"dispatched_by: beads/crew/emma\n\n## PR Review Task\n\n**PR:** https://github.com/steveyegge/beads/pull/1019\n**Author:** sukhodolin\n\n## Summary\nApply ui.RenderMarkdown() to comment text in bd show and bd comments commands.\n\n## Changes\n- cmd/bd/comments.go: Render comment text with Markdown\n- cmd/bd/show.go: Render comment text with Markdown (2 locations)\n- Uses existing ui.RenderMarkdown() function\n\n## Review Checklist\n1. Pull branch locally: `gh pr checkout 1019 --repo steveyegge/beads`\n2. Run tests: `go test ./...`\n3. Test manually: create an issue with markdown comment, verify rendering\n4. If all good, merge: `gh pr merge 1019 --repo steveyegge/beads --squash`\n\n## Classification\nEasy-win: Simple feature, uses existing patterns, small focused change.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/grip","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:17:32Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T02:46:14Z","closed_at":"2026-01-12T02:46:14Z","work_type":"mutex"}
{"id":"bd-28r5","title":"doctor: add deep integration check for pre-commit framework","description":"Add config parsing for .pre-commit-config.yaml to detect if bd hooks are configured. Pre-commit is popular enough to warrant full support like lefthook/husky.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-06T03:19:10Z","created_by":"beads/crew/giles","updated_at":"2026-01-06T05:09:44Z","closed_at":"2026-01-06T05:09:44Z","work_type":"mutex"}
{"id":"bd-2bljv","title":"Review PR #1126: Fix git hooks not working in worktrees","description":"dispatched_by: beads/crew/emma\n\n## PR Review Task\n\n**PR:** https://github.com/steveyegge/beads/pull/1126\n**Author:** ZainRizvi\n**Fixes:** #1127\n**Type:** Bug fix\n\n## Summary\nGit hooks were using GetGitDir() which returns worktree-specific paths. This breaks hooks in worktrees because hooks are shared and live in the common git directory.\n\nThe fix changes all hook-related code to use GetGitCommonDir() instead.\n\n## Changes (58 additions, 70 deletions)\n- GetGitHooksDir() now uses GetGitCommonDir()\n- All hook detection, installation, and execution code updated\n- Consistent pattern across: hooks.go, doctor/git.go, doctor/fix/hooks.go, etc.\n\n## Action Required\n1. Review the diff for correctness\n2. Verify the logic makes sense\n3. Approve and merge if acceptable\n\nThis is an easy-win bug fix with clear solution.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-16T20:00:45Z","created_by":"beads/crew/emma","updated_at":"2026-01-16T20:01:55Z","closed_at":"2026-01-16T20:01:55Z","work_type":"mutex"}
{"id":"bd-2cwz0","title":"Review PR #16199: Update documentation link","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #16199 (anthropics/claude-code)\n\nPR: https://github.com/anthropics/claude-code/pull/16199\nAuthor: tnspacetime\n\nFix doc link in README.\n- gh pr view 16199 --repo anthropics/claude-code\n- gh pr diff 16199 --repo anthropics/claude-code\n- If good: gh pr merge 16199 --repo anthropics/claude-code --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","created_at":"2026-01-08T22:20:07Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:29:36Z","closed_at":"2026-01-08T22:29:36Z","work_type":"mutex"}
{"id":"bd-2gkg","title":"Fix path casing mismatch on macOS causing sync failures (GH#880)","description":"bd sync fails with exit status 128 when daemon started from terminal with different path casing than git worktree registry. macOS case-insensitive filesystem causes mismatch. Fix: normalize paths using realpath or canonical lowercase when daemon starts.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-05T00:09:20Z","created_by":"beads/crew/emma","updated_at":"2026-01-05T00:11:31Z","closed_at":"2026-01-05T00:11:31Z","work_type":"mutex"}
{"id":"bd-2iog6","title":"Add agent docs warning about interactive commands (GHI #1061)","description":"attached_args: Add warning to agent docs that bd edit opens interactive editor. Recommend bd update instead. See GHI #1061.\ndispatched_by: beads/crew/emma","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:11:37Z","created_by":"beads/crew/emma","updated_at":"2026-01-17T08:17:24Z","closed_at":"2026-01-17T08:17:24Z","work_type":"mutex"}
{"id":"bd-2j2t5","title":"Add bd vc log/diff commands for Dolt history queries","description":"## Summary\n\nExpose Dolt's native row-level history via new `bd vc` subcommands. This replaces the approach in PR #1203 (storing Commits[] field) with a discover-don't-track approach.\n\n## Commands\n\n```bash\nbd vc log \u003cid\u003e              # Show full history of an issue\nbd vc diff \u003cid\u003e \u003cref\u003e       # Show what changed since \u003cref\u003e\nbd vc show \u003cid\u003e --as-of \u003cref\u003e  # Show issue state at point in time\n```\n\n## Implementation\n\nQuery Dolt system tables:\n- `dolt_history_issues` - row history with commit metadata\n- `dolt_log` - commit history with author/message\n- `dolt_diff(from, to, table)` - cell-level changes\n\n## Example Output\n\n```\n$ bd vc log bd-xyz\nCOMMIT       DATE                 AUTHOR              MESSAGE\nabc123f      2026-01-22 14:30     beads/crew/emma     Closed bd-xyz\ndef456a      2026-01-22 12:15     beads/crew/emma     Updated status to in_progress  \n789ghij      2026-01-22 10:00     human               Created bd-xyz\n```\n\n## Why Not Store Commits[]\n\nPR #1203 proposed storing commit hashes in a Commits[] field. This violates \"discover, don't track\" - Dolt already knows this history natively. Querying is better than duplicating.\n\n## Depends On\n\n- Dolt backend implementation (bd-dolt-backend or similar)\n\n## References\n\n- PR #1203 (closed, superseded by this approach)\n- ~/hop/docs/analysis/dolt-integration-analysis-v2.md","status":"open","priority":2,"issue_type":"feature","owner":"steve.yegge@gmail.com","created_at":"2026-01-23T05:14:39Z","created_by":"beads/crew/emma","updated_at":"2026-01-23T05:14:39Z","work_type":"mutex"}
{"id":"bd-2kgr","title":"Leaky abstraction: importer uses sqlite.IsUniqueConstraintError","description":"attached_molecule: bd-wisp-pfa\nattached_at: 2026-01-27T04:08:30Z\ndispatched_by: beads/crew/emma\n\n**Found in:** internal/importer/importer.go:462\n\n**Issue:** Importer uses SQLite-specific error checking:\n```go\nif !sqlite.IsUniqueConstraintError(err) {\n    return \"\", fmt.Errorf(\"failed to create renamed issue...\")\n}\n```\n\n**Impact:** When running with Dolt backend, unique constraint errors won't be properly detected (MySQL uses different error codes/messages). Could cause import failures or missed retry opportunities.\n\n**Recommendation:** \n1. Add IsUniqueConstraintError to Storage interface or create backend-agnostic error package\n2. Dolt backend should implement equivalent detection for MySQL error 1062\n\n**Severity:** Medium-High - affects data import reliability with Dolt","notes":"Implemented: Removed dead commented-out code block that used sqlite.IsUniqueConstraintError. The code was already disabled (marked OLD CODE REMOVED) but still created a leaky abstraction. The sqlite import remains for BatchCreateOptions (separate issue bd-nrcp).","status":"hooked","priority":2,"issue_type":"task","assignee":"beads/polecats/obsidian","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:46Z","created_by":"beads/crew/darcy","updated_at":"2026-01-27T04:17:30Z","dependencies":[{"issue_id":"bd-2kgr","depends_on_id":"bd-ats9.1","type":"blocks","created_at":"2026-01-26T19:50:26Z","created_by":"beads/crew/darcy"},{"issue_id":"bd-2kgr","depends_on_id":"bd-wisp-pfa","type":"blocks","created_at":"2026-01-26T20:08:27Z","created_by":"beads/crew/emma"}]}
{"id":"bd-2vh3.6","title":"Tier 5 (Future): JSONL archive rotation","description":"Periodic rotation of issues.jsonl for long-running repos.\n\n## Design\n\n.beads/\n├── issues.jsonl           # Current (hot)\n├── archive/\n│   ├── issues-2025-12.jsonl.gz  # Archived (cold)\n│   └── ...\n└── index.jsonl            # Merged index for queries\n\n## Commands\n\nbd archive rotate [flags]\n  --older-than N    Archive issues closed \u003e N days\n  --compress        Gzip archives\n  --dry-run         Preview\n\nbd archive list           # Show archived periods\nbd archive restore \u003cperiod\u003e  # Restore from archive\n\n## Config\n\nbd config set archive.enabled true\nbd config set archive.rotate_days 90\nbd config set archive.compress true\nbd config set archive.path '.beads/archive'\n\n## Considerations\n\n- Archives can be gitignored (local only) or committed (shared)\n- Query layer must check index, hydrate from archive\n- Cold storage tiering (S3/GCS) for enterprise\n- Merkle proofs preserved for audit\n\n## Priority\n\nThis is post-1.0 work. Current focus is on squash (removes ephemeral).\nArchive helps with long-term history but is less critical.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-21T20:58:38Z","updated_at":"2026-01-02T08:17:14Z","work_type":"mutex"}
{"id":"bd-31ajf","title":"Remove Gas Town role-type flag from bd create","description":"cmd/bd/create.go line 908 has:\n  --role-type flag with 'polecat|crew|witness|refinery|mayor|deacon'\n\nThis Gas Town-specific flag should not be in beads core. Either remove it or make it fully configurable via types.custom.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/darcy","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T07:25:24Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T04:15:59Z","closed_at":"2026-01-27T04:15:59Z","close_reason":"Removed --role-type flag from bd create. Role type can still be inferred from agent ID patterns via parseRoleFromAgentID().","work_type":"mutex"}
{"id":"bd-3azlm","title":"Merge approved PR beads#1220: fix(redirect) follow redirect when creating database","description":"dispatched_by: beads/crew/emma\n\nPR is already approved by steveyegge. Just needs to be merged. URL: https://github.com/steveyegge/beads/pull/1220","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/collins","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T04:00:44Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T04:04:34Z","closed_at":"2026-01-21T04:04:34Z","work_type":"mutex"}
{"id":"bd-3bhl","title":"Add sync rollback on git commit failure","description":"Part of GH#885 fix: graceful failure handling.\n\nWhen git commit fails after export:\n1. Detect the failure\n2. Roll back SQLite metadata to pre-export state\n3. Optionally restore JSONL from git HEAD\n4. Report clear error with recovery instructions\n\nThis makes sync failures recoverable without manual intervention.\n\nDepends on the core atomicity fix - this is defense in depth.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:53:28Z","created_by":"beads/crew/emma","updated_at":"2026-01-05T07:07:39Z","closed_at":"2026-01-05T07:07:39Z","dependencies":[{"issue_id":"bd-3bhl","depends_on_id":"bd-pnx2","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-3bhl","depends_on_id":"bd-usvv","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-3en6c","title":"Fix: FOREIGN KEY constraint on bd create (GH#956)","description":"dispatched_by: mayor\n\nGitHub issue #956. bd create fails with sqlite FOREIGN KEY constraint error.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/polecats/garnet","created_at":"2026-01-10T06:20:04Z","created_by":"beads/crew/dave","updated_at":"2026-01-13T03:41:03Z","closed_at":"2026-01-13T03:41:03Z","work_type":"mutex"}
{"id":"bd-3ft33","title":"Add agent warning about interactive bd edit command","description":"dispatched_by: beads/crew/emma\n\nAdd warning to agent docs (CLAUDE_INTEGRATION.md, MULTI_REPO_AGENTS.md) that bd edit opens interactive editor and blocks. Agents should use 'bd update --title/--description' instead.","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/giles","owner":"steve.yegge@gmail.com","created_at":"2026-01-14T03:34:33Z","created_by":"beads/crew/emma","updated_at":"2026-01-14T04:58:24Z","closed_at":"2026-01-14T04:58:24Z","work_type":"mutex"}
{"id":"bd-3hqvs","title":"Fix N+1 query pattern in querySessionCostWisps","description":"## Problem\n\n`querySessionCostWisps()` (internal/cmd/costs.go:1010-1026) makes a separate `bd show` call for each wisp. With many session cost wisps, this creates O(n) subprocess calls.\n\n## Location\n\ninternal/cmd/costs.go:1010-1026\n\n## Solution\n\nBatch the `bd show` calls - collect all wisp IDs first, then call `bd show id1 id2 id3...` once.\n\nSimilar pattern already exists in `querySessionEvents()` (lines 382-396).","status":"closed","priority":3,"issue_type":"task","assignee":"beads/polecats/obsidian","created_at":"2026-01-09T06:55:12Z","created_by":"mayor","updated_at":"2026-01-09T08:27:43Z","closed_at":"2026-01-09T08:27:43Z","work_type":"mutex"}
{"id":"bd-3jrb","title":"bd close lacks cross-rig routing support","description":"The `bd close` command doesn't support cross-rig routing like `bd show` does.\n\n**Reproduction:**\n```\n# From gastown directory\nbd show bd-xyz    # Works (routes to beads)\nbd close bd-xyz   # Fails with 'no issue found matching'\n```\n\n**Root cause:**\n- `show.go` uses `needsRouting()` and `resolveAndGetIssueWithRouting()`\n- `close.go` only uses `utils.ResolvePartialIDs()` without routing\n\n**Other affected commands (likely):**\n- reopen\n- dep  \n- comments\n- label\n- duplicate\n- defer/undefer\n\n**Fix:**\nAdd routing support to `close.go` similar to `show.go` lines 44-147.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-01T19:20:41Z","created_by":"gastown/crew/gus","updated_at":"2026-01-01T19:24:25Z","closed_at":"2026-01-01T19:24:25Z","work_type":"mutex"}
{"id":"bd-3kbmj","title":"Issue with labels","status":"closed","priority":1,"issue_type":"feature","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:02Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:41Z","closed_at":"2026-01-27T03:48:41Z","close_reason":"Test artifact - cleaning up","labels":["backend","urgent"],"work_type":"mutex"}
{"id":"bd-3mu9i","title":"hook.go: Replace fragile hand-rolled YAML parsing with yaml.v3","description":"loadHookConfig (hook.go:199-235) uses manual line-by-line YAML parsing that doesn't handle:\n- Comments after values: chain_strategy: before  # comment\n- Quoted values with colons\n- Multi-line values\n\nShould use gopkg.in/yaml.v3 like other config parsing in the codebase for robustness.","status":"closed","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:10:27Z","created_by":"beads/crew/elinor","updated_at":"2026-01-21T02:14:18Z","closed_at":"2026-01-21T02:14:18Z","labels":["bug","hooks"],"work_type":"mutex"}
{"id":"bd-3p4u","title":"Add --filter-parent as alias for --parent in bd list","description":"User tried `bd list --filter-parent bd-mol-wba` and got 'unknown flag'. The --parent flag exists but --filter-parent would be more consistent with other filter flags like --filter-assignee patterns. Should add --filter-parent as an alias.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-05T07:10:39Z","created_by":"beads/crew/dave","updated_at":"2026-01-05T07:50:47Z","closed_at":"2026-01-05T07:50:47Z","work_type":"mutex"}
{"id":"bd-3pfnn","title":"Add '--desc' as alias for '--description' flag","description":"For intuitive UX, add '--desc' as a shorthand alias for '--description' on bd new/create. Users naturally abbreviate to --desc.\n\n(Moved from hq-16y4n)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-21T01:37:14Z","created_by":"mayor","updated_at":"2026-01-21T01:37:14Z","work_type":"mutex"}
{"id":"bd-3szqw","title":"beads_queue.go: UpdateQueueCounts fetches queue twice unnecessarily","description":"In internal/beads/beads_queue.go:232-247, UpdateQueueCounts calls:\n1. GetQueueBead(id) at line 233, which internally calls Show(id) and parses the description\n2. UpdateQueueFields(id, currentFields) at line 246, which calls Show(id) AGAIN at line 221\n\nThis results in two redundant fetches of the same bead. The same issue is fetched, parsed, and its title extracted twice.\n\nRecommendation: Either:\n1. Pass the issue to UpdateQueueFields to avoid the second fetch\n2. Create an internal updateQueueFieldsWithIssue(issue *Issue, fields *QueueFields) helper\n3. Have UpdateQueueFields accept an optional *Issue parameter\n\nLocation: internal/beads/beads_queue.go:232-247","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T03:58:05Z","created_by":"gastown/crew/george","updated_at":"2026-01-22T03:58:05Z","labels":["efficiency","gt:code-review"],"work_type":"mutex"}
{"id":"bd-3tqg","title":"GHI #880: Failures with exit status 128 due to path casing mismatch on macOS","description":"GitHub Issue #880: Failures with exit status 128 due to path casing mismatch on macOS\n\nhttps://github.com/steveyegge/beads/issues/880","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-04T19:22:18Z","created_by":"mayor","updated_at":"2026-01-04T23:22:09Z","closed_at":"2026-01-04T19:44:45Z","work_type":"mutex"}
{"id":"bd-404kp","title":"Review \u0026 merge PR #1023: fix(mcp) custom issue types","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #1023: https://github.com/steveyegge/beads/pull/1023\n\n## Summary\nMCP server fails with Pydantic validation when listing custom issue types (agent, molecule, event). Changed IssueType/IssueStatus from Literal to str.\n\n## Changes\n- integrations/beads-mcp/src/beads_mcp/models.py - Change Literal to str\n- integrations/beads-mcp/src/beads_mcp/server.py - Update help text\n- integrations/beads-mcp/src/beads_mcp/tools.py - Update annotations\n\n## Review Checklist\n- [ ] Pull the branch locally\n- [ ] Verify MCP tests pass (if any)\n- [ ] Test with custom issue types\n- [ ] Merge with gh pr merge 1023 --repo steveyegge/beads --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:14:14Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T02:17:19Z","closed_at":"2026-01-12T02:17:19Z","work_type":"mutex"}
{"id":"bd-40c2","title":"bd init --from-jsonl: Skip git history scan","description":"## Problem\n\n`bd init` scans git history to find all issues ever created, which:\n- Resurrects deleted/compacted issues\n- Takes a long time on large repos\n- Defeats manual JSONL cleanup\n\n## Solution\n\nAdd `bd init --from-jsonl` flag that:\n1. Creates fresh database\n2. Imports ONLY from current .beads/issues.jsonl\n3. Skips git history scan entirely\n\n## Use Case\n\nAfter manually cleaning JSONL or receiving a clean JSONL from another source:\n```bash\n# Clean JSONL manually or via script\nbd init --from-jsonl  # Use current JSONL as-is\n```\n\n(Moved from hq-c21fj)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-02T09:37:20Z","created_by":"gastown/crew/joe","updated_at":"2026-01-02T20:41:31Z","closed_at":"2026-01-02T20:41:31Z","work_type":"mutex"}
{"id":"bd-49086d","title":"Update README.md to mention Dolt backend options","description":"The main README.md says 'SQLite local cache for speed; background daemon for auto-sync' with no mention of Dolt options.\n\nShould add:\n- Brief mention of Dolt as an alternative backend\n- Link to detailed docs explaining when to use SQLite vs Dolt\n- Note about Gas Town using Dolt server mode\n\nThis is user-facing documentation that shapes first impressions.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:35:11Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:35:11Z"}
{"id":"bd-495i6","title":"Merge: topaz-mk9abkx5","description":"branch: polecat/topaz-mk9abkx5\ntarget: main\nsource_issue: topaz-mk9abkx5\nrig: beads\nagent_bead: bd-beads-polecat-topaz\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T05:31:31Z","created_by":"stevey","updated_at":"2026-01-11T05:53:13Z","closed_at":"2026-01-11T05:53:13Z","labels":["gt:merge-request"],"work_type":"mutex"}
{"id":"bd-4bt1","title":"Add gate field to Step schema in formula types","description":"Add Gate field to Step struct in internal/formula/types.go.\n\n## Implementation\n\n```go\ntype Step struct {\n    // ... existing fields ...\n    \n    // Gate defines an async wait condition for this step.\n    Gate *GateDef `json:\"gate,omitempty\"`\n}\n\ntype GateDef struct {\n    Type     string `json:\"type\"`              // timer, gh:run, gh:pr, bead, human\n    Workflow string `json:\"workflow,omitempty\"` // GitHub workflow name\n    Timeout  string `json:\"timeout,omitempty\"`  // Max wait before escalation\n    AwaitID  string `json:\"await_id,omitempty\"` // Explicit condition ID\n}\n```\n\n## Acceptance Criteria\n- [ ] GateDef struct defined\n- [ ] Step.Gate field added\n- [ ] TOML and JSON parsing works\n- [ ] Tests for gate field parsing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:27:14Z","created_by":"mayor","updated_at":"2026-01-04T23:22:09Z","closed_at":"2026-01-02T21:43:33Z","dependencies":[{"issue_id":"bd-4bt1","depends_on_id":"bd-d1n1","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-4bv5w","title":"UpdateQueueCounts has inefficient API requiring all counts","description":"In beads_queue.go:230-247, UpdateQueueCounts forces callers to provide all 4 count values even when updating only one.\n\n**Current signature:**\n```go\nfunc (b *Beads) UpdateQueueCounts(id string, available, processing, completed, failed int) error\n```\n\n**Issue:**\n- Callers must track all 4 counts to update just one\n- Easy to accidentally reset counts if caller doesn't have current values\n- Requires fetching current fields first (lines 233-239), then overwrites all counts\n\n**Recommendation:** Either:\n1. Use delta-based updates: `UpdateQueueCountsDelta(id string, deltaAvailable, deltaProcessing, deltaCompleted, deltaFailed int)`\n2. Use options pattern with pointers: `UpdateQueueCounts(id string, opts QueueCountUpdate)` where nil means \"don't change\"\n3. Provide single-field updaters: `IncrementAvailableCount(id string, delta int)`\n\nOption 1 (deltas) is most common for counters and prevents race conditions better.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T03:51:57Z","created_by":"gastown/crew/george","updated_at":"2026-01-22T03:51:57Z","work_type":"mutex"}
{"id":"bd-4dkd","title":"Digest: beads-release","description":"Released beads v0.46.0 - includes v0.45.0 changes (custom types, Gas Town types, gate workflow fixes)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T08:11:29Z","updated_at":"2026-01-07T08:11:29Z","closed_at":"2026-01-07T08:11:29Z","work_type":"mutex"}
{"id":"bd-4dqmy","title":"Beads DB scan error: updated_at stored as text but Go expects time.Time","description":"The beads database stores updated_at as text strings but the Go SQLite driver is trying to scan into time.Time. This blocks all bd operations including witness start.\n\nError: sql: Scan error on column index 15, name 'updated_at': unsupported Scan, storing driver.Value type string into type *time.Time\n\nImpact: Cannot start witnesses, many bd commands fail.\n\nRoot cause: Either the schema migration or the Go code needs to handle text-formatted timestamps.\n\n(Moved from hq-uy596u)","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/lydia","created_at":"2026-01-21T01:37:48Z","created_by":"mayor","updated_at":"2026-01-22T04:47:43Z","closed_at":"2026-01-22T04:47:43Z","work_type":"mutex"}
{"id":"bd-4hh5","title":"bd sync false-positive force-push detection","description":"bd sync incorrectly detected a force-push when comparing against a commit from main branch instead of beads-sync.\n\nEvidence:\n- bd sync reported: 'Previous known commit: f4d3f674, Current remote commit: 4d24f794'\n- f4d3f674 is a valid beads-sync commit\n- 4d24f794 is a MAIN branch commit: 'refactor: remove unused isFirstRig param (gt-fugmy)'\n\nRoot cause: bd sync is comparing against wrong branch or storing wrong commit reference.\n\nImpact: False force-push warnings during normal operation, requires manual --accept-rebase.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-04T19:13:45Z","created_by":"mayor","updated_at":"2026-01-05T07:11:19Z","closed_at":"2026-01-05T07:11:19Z","work_type":"mutex"}
{"id":"bd-4jxh","title":"Update agent.go to use labels instead of type","description":"Change agent bead management to use gt:agent label instead of TypeAgent.\n\n## Work\n- Change IssueType=agent to IssueType=task when creating agents\n- Add gt:agent label when creating agent beads\n- Update agent queries to filter by label instead of type\n- Update agent type checks (agent.IssueType != \"agent\") to check label\n\n## Files\n- cmd/bd/agent.go","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T04:40:20Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T06:10:19Z","closed_at":"2026-01-07T06:10:19Z","dependencies":[{"issue_id":"bd-4jxh","depends_on_id":"bd-i54l","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-4k3c","title":"bd cook creates gate beads for gate steps","description":"When cooking a formula, steps with Gate field create corresponding gate beads.\n\n## Behavior\n1. During cook, detect steps with Gate != nil\n2. Create gate bead with ID: `\u003cmol-id\u003e.gate-\u003cstep-id\u003e`\n3. Gate bead has:\n   - issue_type: gate\n   - await_type: from Gate.Type\n   - await_id: from Gate.AwaitID (or auto-discovered)\n   - timeout: from Gate.Timeout\n4. Dependent steps get blocking dep on gate bead\n\n## Example\nStep `await-ci` with gate.type=\"gh:run\" creates:\n- bd-mol-xxx.gate-await-ci (type=gate, await_type=gh:run)\n- bd-mol-xxx.verify-github depends on bd-mol-xxx.gate-await-ci\n\n## Acceptance Criteria\n- [ ] Gate beads created during cook\n- [ ] Correct await_type/await_id populated\n- [ ] Dependent steps blocked by gate\n- [ ] Tests for gate creation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:27:15Z","created_by":"mayor","updated_at":"2026-01-04T23:22:09Z","closed_at":"2026-01-02T21:59:58Z","dependencies":[{"issue_id":"bd-4k3c","depends_on_id":"bd-4bt1","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-4k3c","depends_on_id":"bd-d1n1","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-4kp2","title":"Update Obsidian export for removed types","description":"Remove type-to-tag mappings for Gas Town types in Obsidian export.\n\n## Work\n- Remove TypeAgent, TypeRole, TypeRig, TypeConvoy mappings from issueTypeToTag\n- Consider: add label-to-tag mapping for gt:* labels\n\n## Files\n- cmd/bd/export_obsidian.go","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-07T04:40:49Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T06:12:38Z","closed_at":"2026-01-07T06:12:38Z","dependencies":[{"issue_id":"bd-4kp2","depends_on_id":"bd-i54l","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-4p67y","title":"Merge federation SQL auth with Emma's sync work","description":"dispatched_by: beads/crew/jane\n\nMerge SQL user auth (patch at ~/.beads-federation-auth.patch) with Emma's federation sync. Add credential methods to FederatedStorage interface, add add-peer/list/remove-peer commands. Continues bd-wkumz.10","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/jane","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T05:09:59Z","created_by":"beads/crew/jane","updated_at":"2026-01-21T05:15:29Z","closed_at":"2026-01-21T05:15:29Z","work_type":"mutex"}
{"id":"bd-4tz82","title":"Review and merge PR #1039: Preserve comments in autoflush","description":"dispatched_by: beads/crew/emma","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T00:35:33Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T00:39:14Z","closed_at":"2026-01-13T00:39:14Z","work_type":"mutex"}
{"id":"bd-55jbh","title":"Refactor installJJHooks and installGitHooks to share code","description":"installJJHooks() in init_git_hooks.go duplicates most of the logic from installGitHooks():\n- Detecting existing hooks\n- Prompting for chain/overwrite/skip\n- Renaming/backing up existing hooks\n\nThe only differences are:\n- Which hook body is used (jjPreCommitHookBody vs preCommitHookBody)\n- Success message mentions 'jj mode'\n\nCould refactor to have a shared installHooksCommon() function that takes the hook body generator as a parameter.\n\nLow priority - code works, just not DRY.\n\nRelated: hq-ew1mbr.12 (jujutsu support)","status":"open","priority":4,"issue_type":"chore","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:08:17Z","created_by":"beads/crew/lizzy","updated_at":"2026-01-21T03:08:17Z","work_type":"mutex"}
{"id":"bd-56994e","title":"Investigate intermittent MySQL connection errors in Dolt server mode","description":"During tech debt review, observed intermittent error:\n```\n[mysql] 2026/01/23 23:35:05 connection.go:364: invalid connection\nAuto-import failed: failed to get DB issues: driver: bad connection\n⚠️  WARNING: JSONL file hash mismatch detected\n```\n\nThis occurred during a bd create command even though bd doctor --server shows all green.\n\nMay be related to:\n- Connection pool lifecycle\n- Stale connections after idle periods\n- Race condition in auto-import\n\nNeed to investigate and add better connection resilience.","status":"open","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:35:51Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:35:51Z"}
{"id":"bd-5cnq","title":"Add build-from-source option to local-install step","description":"dispatched_by: mayor\n\nThe local-install step currently only offers Homebrew and curl install script options.\n\nAdd Option 3 for developers releasing from this clone:\n\n```bash\n# Build from source\ngo build -o bd ./cmd/bd\ncp bd ~/.local/bin/bd\n\n# macOS ONLY: Codesign to prevent SIGKILL (Killed: 9)\n# Without this, macOS kills unsigned binaries from unknown developers\n[[ $(uname) == \"Darwin\" ]] \u0026\u0026 codesign --force --sign - ~/.local/bin/bd\n```\n\n## Why codesigning matters\nOn macOS, unsigned binaries built locally can be killed by Gatekeeper with \"Killed: 9\" (SIGKILL). The ad-hoc codesign (`-s -`) marks the binary as locally trusted.\n\n## Acceptance Criteria\n- [ ] local-install step has Option 3 with build commands\n- [ ] macOS codesigning is documented with explanation\n- [ ] Commands can be copy-pasted and work","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-07T08:45:31Z","created_by":"beads/crew/emma","updated_at":"2026-01-11T04:57:59Z","dependencies":[{"issue_id":"bd-5cnq","depends_on_id":"bd-z8xz","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-5dlz","title":"GHI #889: postinstall fails on Windows - zip being used by another process","description":"GitHub Issue #889: postinstall fails on Windows: zip 'being used by another process'\n\nhttps://github.com/steveyegge/beads/issues/889","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-04T19:22:14Z","created_by":"mayor","updated_at":"2026-01-04T23:22:09Z","closed_at":"2026-01-04T19:26:36Z","work_type":"mutex"}
{"id":"bd-5hjuz","title":"Fix: Issue blocker not in effect (GH#962)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #962. Issue blocking/dependencies not working correctly. Core feature.","status":"closed","priority":0,"issue_type":"bug","assignee":"beads/polecats/garnet","created_at":"2026-01-10T06:20:00Z","created_by":"beads/crew/dave","updated_at":"2026-01-11T00:40:17Z","closed_at":"2026-01-11T00:40:17Z","work_type":"mutex"}
{"id":"bd-5jufy","title":"Bootstrap: Clean up lock file after successful bootstrap","description":"The `dolt-bootstrap.lock` file persists after bootstrap completes successfully. While harmless, it's clutter.\n\nConsider removing the lock file on successful completion:\n```go\ndefer func() {\n    _ = lock.Unlock()\n    if result != nil \u0026\u0026 result.IssuesImported \u003e 0 {\n        _ = os.Remove(lockPath)\n    }\n}()\n```\n\nLocation: internal/storage/dolt/bootstrap.go:74\n\n(Moved from hq-6e9y9)","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-21T01:37:25Z","created_by":"mayor","updated_at":"2026-01-21T01:37:25Z","labels":["dolt-backend"],"work_type":"mutex"}
{"id":"bd-5jxk6","title":"hook.go: Placeholder import/export functions should use store directly","description":"exportToJSONLFromStore and importFromJSONLToStore (hook.go:753-769) are marked as TODO placeholders that just call 'bd sync'. The Dolt branch-then-merge pattern creates branches but doesn't actually perform direct store operations.\n\nThese functions should:\n1. Use the store's methods directly to export/import data\n2. Avoid spawning subprocesses for better error handling\n3. Support proper context cancellation\n\nThis is blocking the full Dolt integration from working as designed.","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:10:26Z","created_by":"beads/crew/elinor","updated_at":"2026-01-21T02:12:48Z","closed_at":"2026-01-21T02:12:48Z","labels":["dolt","enhancement","hooks"],"work_type":"mutex"}
{"id":"bd-5kkec","title":"Document bd mol ready --gated in README","description":"New gate-resume discovery command (bd-lhalq) is not documented in README.md. Should add to command reference with examples.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T05:32:39Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T05:32:39Z","dependencies":[{"issue_id":"bd-5kkec","depends_on_id":"bd-ka761","type":"discovered-from","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-5o9k8","title":"Review and merge PR #980: gitignore sync state files","description":"dispatched_by: beads/crew/emma\n\n## Task\nReview and merge PR #980 from peterkc.\n\n**PR**: https://github.com/steveyegge/beads/pull/980\n\n## What it does\n- Adds .sync.lock and sync_base.jsonl to GitignoreTemplate\n- Adds both patterns to requiredPatterns for bd doctor validation\n- Fixes SYNC.md documentation\n\n## Easy-win criteria met\n- Bug fix with clear scope\n- Has tests\n- Documentation fix included\n- Low risk\n\n## Instructions\n1. Clone/fetch the PR: gh pr checkout 980 --repo steveyegge/beads\n2. Run tests: go test ./cmd/bd/doctor/...\n3. Review the diff: gh pr diff 980 --repo steveyegge/beads\n4. If tests pass and code looks good, approve and merge\n5. Close this bead when done","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-09T18:59:58Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T19:04:55Z","closed_at":"2026-01-09T19:04:55Z","work_type":"mutex"}
{"id":"bd-5tjha","title":"Make gt costs record resilient to daemon contention","description":"## Problem\n\nThe Claude Code stop hook calls `gt costs record` which creates an ephemeral wisp via the daemon. During bulk operations (e.g., large deletes), the daemon can be busy with JSONL file operations, causing the RPC to timeout:\n\n```\nError: creating session cost wisp: exit status 1\nOutput: Error: failed to read response: read unix -\u003e/Users/stevey/gt/.beads/bd.sock: i/o timeout\n```\n\n## Proposed Solution\n\nMake `gt costs record` resilient to transient daemon unavailability:\n\n1. **Fire-and-forget mode**: Session costs are informational, not critical. The stop hook shouldn't block session teardown.\n\n2. **Quick timeout with silent failure**: Use a shorter timeout (e.g., 5s) and fail silently if daemon is busy. The cost data is nice-to-have.\n\n3. **Optional: Background retry**: Could spawn a background process to retry once if initial attempt fails, but this may be overkill.\n\n## Context\n\n- Stop hooks run at session end - blocking is disruptive\n- Cost tracking is currently disabled anyway (Claude Code doesn't expose costs)\n- When cost tracking is enabled, missing a few data points during bulk ops is acceptable\n\n## See Also\n\n- Root cause is JSONL churn during bulk operations (separate issue for daemon batching)","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T04:42:00Z","created_by":"beads/crew/lizzy","updated_at":"2026-01-22T04:42:00Z","labels":["gastown"],"work_type":"mutex"}
{"id":"bd-5xpoq","title":"Show standing orders in gt hook output","description":"## Summary\nWhen running `gt hook` to check hooked work, also display any standing orders that apply to the agent.\n\n## Current Behavior\n`gt hook` only shows the hooked bead (if any).\n\n## Proposed Behavior\n`gt hook` should also show standing orders at the bottom:\n```\n🪝 Hooked: bd-abc123 - Fix the widget\n\n📜 Standing Orders:\n  • PR Sheriff Standing Orders (hq-k5rlof)\n```\n\n## Implementation Notes\n- Reuse the `checkStandingOrders` logic from prime.go\n- Or extract to a shared helper function\n- Should query town DB for gt:standing-orders matching agent's role labels\n\n## Related\n- Standing orders implemented in prime.go (checkStandingOrders function)\n- Labels: gt:standing-orders + role labels (e.g., gt:sheriff)","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-16T22:27:04Z","created_by":"beads/crew/emma","updated_at":"2026-01-16T22:27:04Z","work_type":"mutex"}
{"id":"bd-5zf0","title":"Test: Polecat Dolt CRUD","description":"Updated description from polecat test context","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-26T02:01:58Z","created_by":"mayor","updated_at":"2026-01-26T02:02:14Z","closed_at":"2026-01-26T02:02:14Z","close_reason":"CRUD test passed"}
{"id":"bd-5zf0.1","title":"Test: Child of Dolt CRUD","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-26T02:02:08Z","created_by":"mayor","updated_at":"2026-01-26T02:02:13Z","closed_at":"2026-01-26T02:02:13Z","close_reason":"Test completed","dependencies":[{"issue_id":"bd-5zf0.1","depends_on_id":"bd-5zf0","type":"parent-child","created_at":"2026-01-25T18:02:07Z","created_by":"mayor"}]}
{"id":"bd-600yu","title":"Merge: quartz-lmqhe","description":"branch: polecat/quartz-lmqhe\ntarget: main\nsource_issue: quartz-lmqhe\nrig: beads\nagent_bead: bd-beads-polecat-quartz\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T05:26:07Z","created_by":"stevey","updated_at":"2026-01-11T06:12:09Z","closed_at":"2026-01-11T06:12:09Z","labels":["gt:merge-request"],"work_type":"mutex"}
{"id":"bd-615z","title":"Add ValidateTemplate() function","description":"Add internal/validation package with ValidateTemplate(issueType, description) that checks for missing sections and returns actionable errors.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-01T19:19:07Z","created_by":"beads/crew/grip","updated_at":"2026-01-01T20:42:26Z","closed_at":"2026-01-01T20:42:26Z","dependencies":[{"issue_id":"bd-615z","depends_on_id":"bd-ou35","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-615z","depends_on_id":"bd-v2mr","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-62g22","title":"Add bd doctor check for child repo custom types","description":"Add a diagnostic check to `bd doctor` that discovers custom types from child repos and reports any potential issues.\n\nThis is the \"discover\" part of \"trust + discover\". We don't track child types in parent config, but we can discover them on demand for diagnostics.\n\nImplementation:\n1. In `cmd/bd/doctor/`, add a new check\n2. For each configured child repo in `repos.additional`:\n   - Try to read child's config.yaml or beads.db\n   - Extract their `types.custom` setting\n   - Report what types each child uses\n3. Optionally warn if hydrated issues use types not found in any config\n\nThis is informational/diagnostic only - not blocking.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T22:05:53Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T22:26:42Z","closed_at":"2026-01-09T22:26:42Z","dependencies":[{"issue_id":"bd-62g22","depends_on_id":"bd-9ji4z","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-649s","title":"Add custom type support to beads config","description":"Add types.custom config key mirroring status.custom pattern.\n\n## Work\n- Add CustomTypeConfigKey constant to config.go\n- Add GetCustomTypes() to storage interface  \n- Add GetCustomTypes() implementation in sqlite/config.go and memory/memory.go\n- Add IssueType.IsValidWithCustom(customTypes []string) method\n- Update ValidateWithCustomStatuses to ValidateWithCustom (handle both)\n- Update all validation call sites to use GetCustomTypes()\n\n## Files\n- internal/storage/sqlite/config.go\n- internal/storage/storage.go\n- internal/storage/memory/memory.go\n- internal/types/types.go\n- internal/storage/sqlite/queries.go\n- internal/storage/sqlite/transaction.go\n- internal/storage/sqlite/batch_ops.go\n- internal/storage/sqlite/multirepo.go","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-07T04:40:04Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T05:30:02Z","closed_at":"2026-01-07T05:30:02Z","dependencies":[{"issue_id":"bd-649s","depends_on_id":"bd-i54l","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-66z6a","title":"Deterministic ordering in cost digest output","description":"## Problem\n\nMap iteration in `createCostDigestBead()` (lines 1078, 1086) produces non-deterministic ordering in the digest description. The By Role and By Rig sections may appear in different orders each time.\n\n## Location\n\ninternal/cmd/costs.go:1076-1091\n\n## Solution\n\nSort the map keys before iterating, or use a slice of structs instead of a map.","status":"closed","priority":4,"issue_type":"task","assignee":"beads/polecats/onyx","created_at":"2026-01-09T06:55:18Z","created_by":"mayor","updated_at":"2026-01-09T08:26:11Z","closed_at":"2026-01-09T08:26:11Z","work_type":"mutex"}
{"id":"bd-6acdb1","title":"Add timeout handling to Dolt peer sync operations","description":"Two TODOs in internal/storage/dolt/peer_sync_integration_test.go:\n\n- Line 720: 'TODO: Add proper timeout handling in withPeerCredentials'\n- Line 801: 'TODO: Add proper timeout handling in Sync operations'\n\nFederation/peer sync operations may hang indefinitely without proper timeout handling. This affects Dolt server mode federation workflows.","status":"open","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:35:29Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:35:29Z"}
{"id":"bd-6ffj7","title":"Issue 2 to reopen","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:12Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:41Z","closed_at":"2026-01-27T03:48:41Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-6ntrj","title":"Fix: Windows daemons can't be stopped/killed (GH#992)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #992. On Windows, bd commands can't stop/kill daemon processes.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/fang","created_at":"2026-01-10T06:20:01Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T07:05:03Z","closed_at":"2026-01-10T07:05:03Z","work_type":"mutex"}
{"id":"bd-6tft","title":"Review Dolt connection stability in beads daemon","description":"bd commands show repeated 'invalid connection' and 'bad connection' warnings from mysql driver. This suggests Dolt daemon connection issues. Commands still succeed but the warnings indicate instability. Need to investigate: connection pooling, reconnection logic, daemon lifecycle.","status":"open","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:50:52Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T03:50:52Z"}
{"id":"bd-6vuci","title":"Review and merge PR #1036: Remove export from read-only commands","description":"dispatched_by: beads/crew/emma","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/giles","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T00:35:31Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T00:40:18Z","closed_at":"2026-01-13T00:40:18Z","work_type":"mutex"}
{"id":"bd-6wkiw","title":"Update skill documentation to match CLI v0.47","description":"dispatched_by: beads/crew/emma\n\nclaude-plugin/skills/beads/ has version 0.43.0, CLI is at 0.47.1. Update SKILL.md version and ensure CLI_REFERENCE.md covers new commands: doctor, blocked, comments, search, status, graph, q, prime.","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/grip","owner":"steve.yegge@gmail.com","created_at":"2026-01-14T03:34:34Z","created_by":"beads/crew/emma","updated_at":"2026-01-14T03:43:08Z","closed_at":"2026-01-14T03:43:08Z","work_type":"mutex"}
{"id":"bd-7237da","title":"Critical: Dolt server write persistence failure","description":"bd create reports success but beads are not persisted to database.\n\nSymptoms:\n- bd create returns success with issue ID\n- bd show immediately after cannot find the issue\n- bd list doesn't show newly created issues\n- bd search may find them (JSONL-based?)\n\nObserved during tech debt review session.\n\nRelated issues:\n- bd doctor --server hardcodes 'beads' instead of reading database name from config (line 116)\n- metadata.json says database: beads_rig but doctor checks 'beads'\n- Connection pool issues: 'invalid connection' errors\n\nThis blocks all work tracking in the Dolt server environment.","status":"closed","priority":0,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:50:16Z","created_by":"beads/crew/emma","updated_at":"2026-01-26T02:22:54Z","closed_at":"2026-01-26T02:22:54Z","close_reason":"Resolved by Dolt cleanup session - persistence verified working"}
{"id":"bd-734vd","title":"Update docs for daemon CLI change (--start → start)","description":"dispatched_by: beads/crew/emma\n\nDocumentation says 'bd daemon --start' but CLI now uses 'bd daemon start'. Update all docs to use new subcommand syntax.","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-14T03:34:32Z","created_by":"beads/crew/emma","updated_at":"2026-01-15T04:49:00Z","closed_at":"2026-01-15T04:49:00Z","work_type":"mutex"}
{"id":"bd-73got","title":"Refactor beads-release formula to use gate step","description":"Update beads-release.formula.toml to use gate-based async for CI wait:\n\nReplace the spin-wait `wait-ci` step with a proper gate step:\n\n```toml\n[[steps]]\nid = \"wait-ci\"\ntitle = \"Await CI completion\"\nneeds = [\"push-tag\"]\ngate = \"gh:run\"\ngate_hint = \"release.yml\"\ntimeout = \"30m\"\ndescription = \"\"\"\nGate step awaiting GitHub Actions release workflow.\nResolves automatically when workflow succeeds.\nEscalates if workflow fails or times out.\n\nNo polling needed - Deacon patrol evaluates gates periodically.\n\"\"\"\n```\n\nDepends on gate infrastructure being complete.\n\nParent: bd-ka761","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T04:53:43Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T05:20:50Z","closed_at":"2026-01-09T05:20:50Z","dependencies":[{"issue_id":"bd-73got","depends_on_id":"bd-ka761","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-741si","title":"Remove Gas Town actor validation from beads core","description":"internal/validation/bead.go has full actor ID validation for Gas Town roles (mayor, deacon, witness, refinery, polecat, crew). This should be in gastown, not beads.\n\nFiles:\n- internal/validation/bead.go (TownLevelRoles, RigLevelRoles, NamedRoles, ValidateActorID)\n- internal/validation/bead_test.go (all the polecat/witness/mayor tests)","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/elinor","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T07:25:20Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T04:14:38Z","closed_at":"2026-01-27T04:14:38Z","close_reason":"Removed Gas Town actor validation (ValidateAgentID, ExtractAgentPrefix, role constants) from beads core. Agent ID validation for Gas Town roles should be handled by gastown.","work_type":"mutex"}
{"id":"bd-74eak","title":"Review \u0026 merge PR #1026: fix(init) prevent init from worktrees","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #1026: https://github.com/steveyegge/beads/pull/1026\n\n## Summary\nPrevents 'bd init' from running inside a git worktree. Worktrees should share the .beads database from the main repository.\n\n## Changes\n- Adds check in cmd/bd/init.go\n- Error message guides users to use main repo or bd worktree create\n\n## Review Checklist\n- [ ] Pull the branch locally\n- [ ] Run tests: go test ./...\n- [ ] Verify the worktree check works correctly\n- [ ] Merge with gh pr merge 1026 --repo steveyegge/beads --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:14:06Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T02:16:07Z","closed_at":"2026-01-12T02:16:07Z","work_type":"mutex"}
{"id":"bd-7933b","title":"Issue 2","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:03Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:42Z","closed_at":"2026-01-27T03:48:42Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-7bcrw","title":"Bootstrap: Add transaction timeout for large JSONL files","description":"Large JSONL files could take a long time to import. The bootstrap transaction has no timeout:\n\n```go\ntx, err := s.db.BeginTx(ctx, nil)\n```\n\nConsider:\n- Adding a configurable transaction timeout\n- Progress reporting for large imports\n- Batch commits for very large files\n\nLocation: internal/storage/dolt/bootstrap.go:114\n\n(Moved from hq-0pzhk)","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-21T01:37:24Z","created_by":"mayor","updated_at":"2026-01-21T01:37:24Z","labels":["dolt-backend"],"work_type":"mutex"}
{"id":"bd-7cjc","title":"Leaky abstraction: beads.go creates sqlite.New directly","description":"attached_molecule: bd-wisp-bme\nattached_at: 2026-01-27T04:08:51Z\ndispatched_by: beads/crew/emma\n\n**Found in:** internal/beads/beads.go:399, 728\n\n**Issue:** Beads package directly instantiates SQLite storage:\n```go\nreturn sqlite.New(ctx, dbPath)  // line 399\nstore, err := sqlite.New(ctx, dbPath)  // line 728\n```\n\n**Impact:** These code paths bypass the factory and backend configuration. Will always use SQLite even if Dolt is configured.\n\n**Recommendation:**\n1. Use storage/factory to create storage instances\n2. Pass storage instance from caller rather than creating internally\n3. Or accept backend configuration parameter\n\n**Severity:** Medium - inconsistent backend selection","status":"hooked","priority":2,"issue_type":"task","assignee":"beads/polecats/quartz","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:50:03Z","created_by":"beads/crew/darcy","updated_at":"2026-01-27T04:08:52Z","dependencies":[{"issue_id":"bd-7cjc","depends_on_id":"bd-ats9.1","type":"blocks","created_at":"2026-01-26T19:50:27Z","created_by":"beads/crew/darcy"},{"issue_id":"bd-7cjc","depends_on_id":"bd-wisp-bme","type":"blocks","created_at":"2026-01-26T20:08:48Z","created_by":"beads/crew/emma"}]}
{"id":"bd-7ieqt","title":"bd hooks install: add --jj flag for jujutsu mode","description":"Currently jujutsu hooks are only installed automatically during bd init.\n\nShould add a --jj flag to 'bd hooks install' so users can:\n- Manually reinstall jj-mode hooks\n- Switch from git hooks to jj hooks if they colocate an existing repo\n\nUsage: bd hooks install --jj\n\nRelated: hq-ew1mbr.12 (jujutsu support)","status":"open","priority":3,"issue_type":"feature","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:08:24Z","created_by":"beads/crew/lizzy","updated_at":"2026-01-21T03:08:24Z","work_type":"mutex"}
{"id":"bd-7m0d2","title":"Formula parser: recognize gate step fields","description":"Add support for gate-related fields in formula step definitions:\n\n- `gate`: Gate type (gh:run, gh:pr, timer, bead, human)\n- `gate_hint`: Optional hint for auto-discovery (e.g., workflow name)\n- `timeout`: Duration before escalation\n\nUpdate internal/formula/types.go and parser.go to recognize these fields.\n\nParent: bd-ka761","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T04:53:33Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T05:09:12Z","closed_at":"2026-01-09T05:09:12Z","dependencies":[{"issue_id":"bd-7m0d2","depends_on_id":"bd-ka761","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-7nd6t","title":"Remove Gas Town role detection from bd hooks","description":"cmd/bd/hooks.go has case statements and path detection for Gas Town roles.\n\nLines 957-974: switch cases for polecat, witness, refinery, mayor, deacon\nLines 990-1016: path detection for /polecats/, /witness/, /refinery/\n\nThis identity detection logic belongs in gastown, not beads core.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/jane","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T07:25:22Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T04:15:00Z","closed_at":"2026-01-27T04:15:00Z","close_reason":"Removed Gas Town role detection from hooks. Kept crew detection.","work_type":"mutex"}
{"id":"bd-7s5v5","title":"Document bd reset --hard or implement if missing (GH#922)","description":"## GitHub Issue\nhttps://github.com/steveyegge/beads/issues/922\n\n## Problem\nUser reports `bd admin reset --hard` and `bd admin reset --skip-init` commands are missing/undocumented. When doing `bd reset` followed by `bd init`, old data keeps coming back.\n\n## Investigation Needed\n1. Check if `--hard` flag exists in current codebase\n2. If exists: document it properly\n3. If not: determine if it should be added or if there's an alternative workflow\n\n## Files to check\n- `cmd/bd/reset.go` or similar\n- `cmd/bd/admin.go`\n- Documentation files","status":"closed","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T10:46:53Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T10:47:45Z","closed_at":"2026-01-12T10:47:45Z","work_type":"mutex"}
{"id":"bd-7wr2w","title":"Fix: bd sync fails on fresh clone v0.46.0 (GH#963)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #963. bd sync fails on freshly cloned repos in v0.46.0.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/grip","created_at":"2026-01-10T06:19:57Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T06:30:06Z","closed_at":"2026-01-10T06:30:06Z","work_type":"mutex"}
{"id":"bd-7xeks","title":"hook.go: Consolidate duplicate JSONL file lists into shared constant","description":"The lists of JSONL files are duplicated and inconsistent:\n- Line 364 (SQLite path): includes beads.jsonl (legacy)\n- Line 441 (Dolt path): excludes beads.jsonl\n\nShould extract to a shared constant like:\nvar jsonlFiles = []string{\".beads/issues.jsonl\", \".beads/deletions.jsonl\", \".beads/interactions.jsonl\"}\n\nAnd decide whether beads.jsonl (legacy) should be included or removed.","status":"closed","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:10:42Z","created_by":"beads/crew/elinor","updated_at":"2026-01-21T02:16:11Z","closed_at":"2026-01-21T02:16:11Z","labels":["cleanup","hooks"],"work_type":"mutex"}
{"id":"bd-7zpqp","title":"Feature P1","status":"closed","priority":1,"issue_type":"feature","assignee":"bob","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:03Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:42Z","closed_at":"2026-01-27T03:48:42Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-7zzh8","title":"Review PR #1124: Add Beads-Kanban VSCode extension to community tools","description":"dispatched_by: beads/crew/emma\n\n## PR Review Task\n\n**PR:** https://github.com/steveyegge/beads/pull/1124\n**Author:** davidcforbes\n**Type:** Documentation addition\n\n## Summary\n2-line addition to docs/COMMUNITY_TOOLS.md adding the Beads-Kanban VSCode extension.\n\n## Action Required\n1. Verify the link works\n2. Approve and merge if acceptable\n\nThis is an easy-win doc addition.","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-16T20:00:44Z","created_by":"beads/crew/emma","updated_at":"2026-01-16T20:02:35Z","closed_at":"2026-01-16T20:02:35Z","work_type":"mutex"}
{"id":"bd-861e9d","title":"Document multi-backend interoperability for contributors","description":"The current design supports maintainer using Dolt while contributors use SQLite:\n\n## How It Works\n- JSONL is the lingua franca (tracked in git)\n- metadata.json is gitignored (backend choice is local)\n- Both backends import/export via JSONL\n\n## Contributor Flow\n1. git clone → Gets .beads/issues.jsonl\n2. bd init → Creates SQLite database (default)\n3. Auto-import → JSONL imported to SQLite\n4. Can read all project issues\n5. bd init --contributor → Personal issues go to ~/.beads-planning/\n\n## What Needs Documentation\n- Add to BACKENDS.md: 'Interoperability' section\n- Add to CONTRIBUTOR_NAMESPACE_ISOLATION.md: Note about backend compatibility\n- FAQ: 'Can I use SQLite while the project uses Dolt?'\n\n## Edge Cases to Verify\n- Schema compatibility between SQLite/Dolt JSONL exports\n- Any Dolt-specific fields that don't round-trip\n- Performance of SQLite importing large Dolt-exported JSONL","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:41:23Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:41:23Z"}
{"id":"bd-8nf4p","title":"hook.go: Standardize error handling patterns","description":"Inconsistent error handling patterns in hook.go:\n- Some use: fmt.Fprintf(os.Stderr, \"Warning: ...\")\n- Some use: fmt.Fprintln(os.Stderr, \"Warning: ...\")\n- Some silently ignore: _ = gitAdd.Run()\n\nShould standardize on:\n1. Consistent Warning prefix format\n2. Consider debug-level logging for expected failures (like git add on non-existent files)\n3. Use a helper function for warning output","status":"closed","priority":4,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:10:43Z","created_by":"beads/crew/elinor","updated_at":"2026-01-21T02:17:56Z","closed_at":"2026-01-21T02:17:56Z","labels":["cleanup","hooks"],"work_type":"mutex"}
{"id":"bd-8nhm","title":"Verify docs/property-layers.md exists after merge","description":"During property layers implementation, docs/property-layers.md was deleted in multiple polecat branches. Verify this file exists after all merges complete. If missing, restore from backup or recreate based on ~/gt/docs/hop/PROPERTY-LAYERS.md.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-07T04:10:43Z","created_by":"mayor","updated_at":"2026-01-07T04:14:26Z","closed_at":"2026-01-07T04:14:26Z","work_type":"mutex"}
{"id":"bd-8tru","title":"Update installation docs for binary options","description":"Per DOLT-STORAGE-DESIGN-V3.md, update user documentation to explain:\n- Two binary options (bd vs bd-cgo)\n- When to use each binary\n- Build flags for custom builds (sqlite_only, dolt_cgo)\n- Target user segments for each option","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:44:56Z","created_by":"mayor","updated_at":"2026-01-27T02:44:56Z"}
{"id":"bd-93jc1","title":"bd create --priority should accept 'high/medium/low' aliases","description":"The --priority flag rejects 'high' with error:\n\n```\nError: invalid priority \"high\" (expected 0-4 or P0-P4, not words like high/medium/low)\n```\n\nThe error message even mentions these words but then refuses them. Should map:\n- critical/urgent → P0\n- high → P1  \n- medium → P2\n- low → P3\n- backlog → P4\n\nThis is basic UX - users shouldn't need to memorize P0-P4 semantics.\n\n(Moved from hq-nv77pf)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-21T01:37:17Z","created_by":"mayor","updated_at":"2026-01-21T01:37:17Z","work_type":"mutex"}
{"id":"bd-96e7v","title":"Review \u0026 merge PR #970: Fix worktree path detection","description":"dispatched_by: beads/crew/emma\n\n## Task\nReview and merge PR #970 from shendsaliaga.\n\n## PR Summary\nFixes `bd migrate sync` failing with 'fatal: not a git repository' when run from within a git worktree (bare repo setups).\n\n**Two bugs fixed:**\n1. Used GetGitDir() instead of GetGitCommonDir() for worktree creation path\n2. strings.Index found wrong '/worktrees/' in user paths - changed to LastIndex\n\n## Review Checklist\n- [ ] Code review: changes look correct (GetGitDir → GetGitCommonDir)\n- [ ] Verify tests pass: `go test ./...`\n- [ ] Verify lint passes: `golangci-lint run ./...`\n- [ ] Merge the PR: `gh pr merge 970 --repo steveyegge/beads --squash`\n\n## PR Link\nhttps://github.com/steveyegge/beads/pull/970\n\n## Easy-Win Criteria Met\n- Bug fix with clear reproduction and solution\n- Small focused change (26 additions, 8 deletions)\n- Well-documented with before/after examples","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-09T08:49:20Z","created_by":"beads/crew/emma","updated_at":"2026-01-10T02:32:04Z","closed_at":"2026-01-10T02:32:04Z","work_type":"mutex"}
{"id":"bd-98c4e1fa.1","title":"Update AGENTS.md with event-driven mode","description":"Document BEADS_DAEMON_MODE env var. Explain opt-in during Phase 1. Add troubleshooting for watcher failures.","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-30T06:05:14Z","updated_at":"2025-11-01T03:36:49Z","work_type":"mutex"}
{"id":"bd-9dwp4","title":"Review PR #1220: fix(redirect) follow redirect on db create","description":"dispatched_by: beads/crew/emma\n\nEasy-win PR review: Fix database creation to follow .beads/redirect file when present.\n\nPR: https://github.com/steveyegge/beads/pull/1220\nAuthor: joshuavial\nChanges: 227 additions, 4 deletions\nFixes: bd-0qel\n\nTask: Review the PR, verify tests pass, approve and merge if good.\n\nCommands:\ngh pr view 1220 --repo steveyegge/beads\ngh pr diff 1220 --repo steveyegge/beads\ngh pr review 1220 --repo steveyegge/beads --approve\ngh pr merge 1220 --repo steveyegge/beads --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/jane","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:30:17Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T03:53:24Z","closed_at":"2026-01-21T03:53:24Z","work_type":"mutex"}
{"id":"bd-9e1u9","title":"beads_channel.go: GetChannelByID and GetChannelBead have duplicated logic","description":"In internal/beads/beads_channel.go, two methods have nearly identical implementations:\n- GetChannelBead(name string) at lines 184-200\n- GetChannelByID(id string) at lines 204-219\n\nThe only difference is that GetChannelBead constructs the ID via ChannelBeadID(name), while GetChannelByID takes the ID directly.\n\nBoth functions then:\n1. Call b.Show(id)\n2. Check for ErrNotFound\n3. Verify gt:channel label exists\n4. Parse channel fields from description\n5. Return the issue and fields\n\nRecommendation: GetChannelBead should simply call GetChannelByID:\n  func (b *Beads) GetChannelBead(name string) (*Issue, *ChannelFields, error) {\n      return b.GetChannelByID(ChannelBeadID(name))\n  }\n\nThis would reduce ~15 lines of duplicated code to 1 line.\n\nLocation: internal/beads/beads_channel.go:184-219","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T03:58:08Z","created_by":"gastown/crew/george","updated_at":"2026-01-22T03:58:08Z","labels":["dead-code","gt:code-review"],"work_type":"mutex"}
{"id":"bd-9f20n","title":"Add caching for jujutsu repo detection","description":"Unlike git context (which uses sync.Once for caching), jujutsu detection walks the filesystem every time IsJujutsuRepo() or GetJujutsuRoot() is called.\n\nShould add caching similar to gitContext for performance if these functions are called multiple times in a single command.\n\nLow priority since these are only called during init currently.\n\nRelated: hq-ew1mbr.12 (jujutsu support)","status":"open","priority":4,"issue_type":"chore","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:08:08Z","created_by":"beads/crew/lizzy","updated_at":"2026-01-21T03:08:08Z","work_type":"mutex"}
{"id":"bd-9ilm5","title":"Add 'bd types' command to list valid issue types","description":"Tried: bd types\nGot: Error: unknown command \"types\" for \"bd\"\nExpected: List valid issue types\nWorkaround: bd create --help | grep type\n\nWhen unsure of valid types, 'bd types' is the natural query. Similar to 'git config --list' or 'npm config list' patterns for discovering valid values.","status":"closed","priority":2,"issue_type":"feature","assignee":"beads/crew/wolf","owner":"steve.yegge@gmail.com","created_at":"2026-01-16T23:24:17Z","created_by":"gastown/crew/george","updated_at":"2026-01-16T23:35:25Z","closed_at":"2026-01-16T23:35:25Z","labels":["desire-path"],"work_type":"mutex"}
{"id":"bd-9ji4z","title":"Trust child repos during multi-repo hydration (replaces PR #971)","description":"## Problem\n\nPR #971 (https://github.com/steveyegge/beads/pull/971) tries to solve a real problem: when hydrating issues from child repos, custom types defined in the child fail validation because the parent doesn't know about them.\n\nExample:\n- Child repo `oss/` has `types.custom = [bd, pm, llm]`\n- Parent hydrates issue `oss-abc` with type `pm`\n- Parent's config doesn't have `pm` → validation fails\n\nPR #971's solution: Add `custom_types` to `repos.additional` config so parent explicitly tracks child types.\n\n## Why PR #971 Is Wrong\n\nIt violates **Discover, Don't Track** (PRIMING.md):\n\n\u003e Don't maintain separate tracking for what's observable. The beads ARE the source of truth.\n\nThe child repo already knows its own types. Duplicating them in parent config is:\n- Redundant state that can drift\n- Manual sync burden when child adds types  \n- Anti-pattern in Gas Town's federation model\n\n## The Right Solution: Trust + Discover\n\n### Trust (Primary)\n\nFrom CONTEXT.md federation model: each chain validates its own work. The child repo already validated these issues when they were created. The JSONL is a \"signed export\" from a working Beads database.\n\n**Don't re-validate custom types during import. Trust the source.**\n\n- Built-in types (task, bug, feature, epic, chore): validate normally\n- Custom types: skip validation - child already validated them\n\n### Discover (When Needed)\n\nIf we ever need to know child's types (diagnostics, UI, routing):\n- Read from child's config/DB on demand\n- Never cache in parent config\n- `bd doctor` can discover and report mismatches as warnings\n\n## Implementation\n\n### Phase 1: Trust during import\n\nModify `upsertIssueInTx` in `internal/storage/sqlite/multirepo.go`:\n\n```go\n// Add to types/types.go\nfunc (t IssueType) IsBuiltIn() bool {\n    switch t {\n    case TypeTask, TypeBug, TypeFeature, TypeEpic, TypeChore:\n        return true\n    }\n    return false\n}\n\n// In ValidateWithCustom or upsertIssueInTx:\n// For multi-repo import, only validate built-in types\n// Custom types are trusted from source repo\n```\n\n### Phase 2: Discovery for diagnostics (optional)\n\nAdd `bd doctor` check that:\n1. Reads each child repo's config/DB\n2. Discovers their custom types\n3. Reports any issues with unknown types as warnings (not errors)\n\n## Benefits\n\n- Simpler than PR #971 (removes 1200 lines of config plumbing)\n- No new config format needed\n- Backwards compatible\n- Aligned with Gas Town federation model\n- Child repos can evolve freely without updating parent\n\n## Test Plan\n\n- [ ] Hydrate child with custom type not in parent → succeeds\n- [ ] Hydrate child with invalid built-in type → fails (still validated)\n- [ ] Existing single-repo validation unchanged\n- [ ] `bd doctor` discovers and reports child types\n\n## References\n\n- PR #971: https://github.com/steveyegge/beads/pull/971\n- PRIMING.md: Discover, Don't Track principle\n- CONTEXT.md: Federation model","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-09T22:05:36Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T22:26:42Z","closed_at":"2026-01-09T22:26:42Z","work_type":"mutex"}
{"id":"bd-9qajq","title":"gt sling crew auto-picks random crew worker (violates crew model)","description":"## Problem\n\n`gt sling bd-xxx crew` auto-dispatches to a random crew worker. This violates the crew model:\n\n- **Crew** = persistent, human-managed workspaces. Human decides who gets what work.\n- **Polecats** = transient worker pool. Auto-dispatch makes sense.\n\nCurrent behavior interrupts crew workers unexpectedly, which is the antithesis of what crew are for.\n\n## Expected Behavior\n\nEither:\n1. Require explicit crew worker name: `gt sling bd-xxx crew/fang` (no auto-pick)\n2. Or reject `gt sling ... crew` entirely - crew assignment should be manual\n\n## Workaround\n\nAssign beads manually with `bd update --assignee` and send mail.","status":"open","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T09:36:46Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T09:36:46Z","work_type":"mutex"}
{"id":"bd-9qywp","title":"Implement import processing for JSONL deletion markers","description":"The incremental export now writes deletion markers to JSONL:\n```json\n{\"id\": \"gt-123\", \"_deleted\": true, \"_deleted_at\": \"2026-01-17T10:30:00Z\"}\n```\n\nHowever, the import side was not updated to process these markers. When importing JSONL with deletion markers, we need to:\n1. Detect entries with `_deleted: true`\n2. Call `store.DeleteIssue()` for those IDs\n3. Skip them from normal issue creation/update\n\nThis is necessary for proper bidirectional sync with deletion support.\n\nFiles to modify:\n- cmd/bd/import.go\n- internal/importer/importer.go\n- Possibly internal/storage/jsonl/ if there's JSONL parsing there","status":"open","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:08:20Z","created_by":"beads/crew/darcy","updated_at":"2026-01-21T03:08:20Z","work_type":"mutex"}
{"id":"bd-9wg8g","title":"Review PR #1033: Fix jj/jujutsu detached HEAD compatibility","description":"dispatched_by: beads/crew/emma\n\nEasy-win bug fix with tests. PR: https://github.com/steveyegge/beads/pull/1033. Fixes --auto-push for jj users in detached HEAD. Run tests, verify logic, approve and merge.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T01:26:07Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T01:30:38Z","closed_at":"2026-01-13T01:30:38Z","work_type":"mutex"}
{"id":"bd-9xwt","title":"Test Dolt native mode","description":"Per DOLT-STORAGE-DESIGN-V3.md Mode 3: Dolt native.\nVerify:\n- Federation via Dolt protocol works\n- No JSONL in git\n- Cell-level merge native\n- Best for enterprise/Gas Town","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:45:13Z","created_by":"mayor","updated_at":"2026-01-27T02:45:13Z","labels":["testing"]}
{"id":"bd-a2f5a","title":"bd mol ready --gated: add daemon RPC support","description":"Currently requires --no-daemon flag. Should add RPC method to daemon for gate-ready discovery. See mol_ready_gated.go:52-61.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T05:32:18Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T05:32:18Z","dependencies":[{"issue_id":"bd-a2f5a","depends_on_id":"bd-ka761","type":"discovered-from","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-a5fx","title":"bug","description":"When attempting to create a wisp from mol-witness-patrol formula:\n\n```\nbd mol wisp mol-witness-patrol\nError creating wisp: failed to create issue from mol-witness-patrol.inbox-check: Error 1062 (HY000): duplicate primary key given: []\n```\n\nThis blocks automated Witness patrols. The error suggests a collision in the database when creating the inbox-check step bead.\n\nMay be related to:\n- Orphaned database entries from crashed wisp creation\n- Formula reinstall leaving stale step IDs\n- Dolt database constraint issue\n\nWorkaround: Manual patrol (no tracking)","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-26T02:46:56Z","created_by":"beads/witness","updated_at":"2026-01-27T03:48:42Z","closed_at":"2026-01-27T03:48:42Z","close_reason":"Test artifact - cleaning up"}
{"id":"bd-a854","title":"Break run-bump-script into individual version-update steps","description":"dispatched_by: gastown/crew/max\n\nReplace the monolithic `run-bump-script` step with individual steps for each file:\n\n## Steps to Create\n\n1. **bump-version-go** - Update cmd/bd/version.go\n```bash\nsed -i \"\" \"s/Version = \\\"[^\\\"]*\\\"/Version = \\\"{{version}}\\\"/\" cmd/bd/version.go\n```\n\n2. **bump-plugin-json** - Update .claude-plugin/*.json\n```bash\njq \".version = \\\"{{version}}\\\"\" .claude-plugin/plugin.json \u003e tmp \u0026\u0026 mv tmp .claude-plugin/plugin.json\njq \".plugins[0].version = \\\"{{version}}\\\"\" .claude-plugin/marketplace.json \u003e tmp \u0026\u0026 mv tmp .claude-plugin/marketplace.json\n```\n\n3. **bump-mcp-python** - Update MCP package\n```bash\nsed -i \"\" \"s/version = \\\"[^\\\"]*\\\"/version = \\\"{{version}}\\\"/\" integrations/beads-mcp/pyproject.toml\nsed -i \"\" \"s/__version__ = \\\"[^\\\"]*\\\"/__version__ = \\\"{{version}}\\\"/\" integrations/beads-mcp/src/beads_mcp/__init__.py\n```\n\n4. **bump-npm-package** - Update npm package\n```bash\njq \".version = \\\"{{version}}\\\"\" npm-package/package.json \u003e tmp \u0026\u0026 mv tmp npm-package/package.json\n```\n\n5. **bump-hook-templates** - Update hook versions\n```bash\nfor f in cmd/bd/templates/hooks/*; do\n  sed -i \"\" \"s/# bd-hooks-version: .*/# bd-hooks-version: {{version}}/\" \"$f\"\ndone\n```\n\n6. **bump-readme** - Update README badge\n```bash\nsed -i \"\" \"s/Alpha (v[^)]*)/Alpha (v{{version}})/\" README.md\n```\n\n7. **stamp-changelog** - Add date to [Unreleased]\n```bash\nDATE=$(date +%Y-%m-%d)\nsed -i \"\" \"s/## \\[Unreleased\\]/## [Unreleased]\\n\\n## [{{version}}] - $DATE/\" CHANGELOG.md\n```\n\n## Notes\n- Each step should have `needs` pointing to the previous step\n- Commands should work on both macOS and Linux (may need platform detection)\n- The existing update-changelog step handles content; stamp-changelog just adds the date","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-07T08:45:29Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T05:37:52Z","closed_at":"2026-01-08T05:37:52Z","dependencies":[{"issue_id":"bd-a854","depends_on_id":"bd-z8xz","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-a9ka","title":"flushRoutedRepo() doesn't check sync mode before JSONL export","description":"create.go flushRoutedRepo() doesn't check sync mode before exporting JSONL. This causes unwanted JSONL writes in dolt-native mode. The flush logic should respect ShouldExportJSONL() or equivalent sync mode check. See DOLT-STORAGE-DESIGN-V3.md for context on federation modes. This is blocking correct dolt-native operation.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/emma","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:44:41Z","created_by":"mayor","updated_at":"2026-01-27T04:00:22Z","closed_at":"2026-01-27T04:00:22Z","close_reason":"Fixed in commit 6320e2a1. Added ShouldExportJSONL() check to flushRoutedRepo()."}
{"id":"bd-abjn","title":"Review PR #917: fix(doctor) duplicate detection","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #917 from aaron-sangster.\n\nPR: https://github.com/anthropics/beads/pull/917\nChanges: +281/-3, 2 files (cmd/bd/doctor/validation.go, test)\n\nFix: align duplicate detection with bd duplicates (bd-sali)\n\nReview checklist:\n- [ ] Code quality and style\n- [ ] Tests pass\n- [ ] Logic is correct\n- [ ] Approve or request changes","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/grip","created_at":"2026-01-06T03:09:19Z","created_by":"beads/crew/emma","updated_at":"2026-01-06T03:11:50Z","closed_at":"2026-01-06T03:11:50Z","work_type":"mutex"}
{"id":"bd-aed050","title":"Create BACKENDS.md documentation for storage backend selection","description":"Need a dedicated doc explaining the storage backends and federation modes per DOLT-STORAGE-DESIGN-V3.md.\n\n## Backends\n1. **SQLite** (Classic mode) - Solo devs, small teams, JSONL federation via git\n2. **Dolt (pure-Go)** - Teams wanting history queries, cell-level merge, JSONL federation\n3. **Dolt (CGO)** - Enterprise/Gas Town, performance-sensitive Dolt remote federation\n\n## Federation Modes (v3)\n1. **Classic (SQLite + JSONL)** - JSONL travels with code in git\n2. **Dolt + JSONL Export** - Dolt local, JSONL for git-based federation  \n3. **Dolt Native** - Federation via Dolt protocol, no JSONL in git\n4. **Belt and Suspenders** - Both Dolt remotes AND JSONL export\n\n## Two Binaries\n- `bd` (default): SQLite + pure-Go Dolt\n- `bd-cgo`: SQLite + CGO Dolt for performance\n\nReference: DOLT-STORAGE-DESIGN-V3.md","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:35:32Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T03:47:49Z"}
{"id":"bd-ag4hc","title":"Issue 1 to reopen","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:12Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:42Z","closed_at":"2026-01-27T03:48:42Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-al3zd","title":"Review and merge PR #1064: fix dbPath/socketPath confusion in daemon startup","description":"dispatched_by: beads/crew/emma\n\nPR: https://github.com/steveyegge/beads/pull/1064\n\n**Problem:** When using short socket paths (workspaces with paths \u003e103 chars), filepath.Dir(socketPath) returns /tmp/beads-XXXXX/ instead of the actual .beads/ directory. This caused TryDaemonLock to look in the wrong location, always return false, clean up the startlock, and recurse infinitely causing stack overflow.\n\n**Fix:** Changed 4 occurrences in acquireStartLock, handleStaleLock, handleExistingSocket, and getPIDFileForSocket to use filepath.Dir(dbPath) which correctly points to .beads/.\n\n**Review tasks:**\n1. Verify the fix logic is correct\n2. Run tests: go test ./cmd/bd/...\n3. If tests pass, merge with: gh pr merge 1064 --repo steveyegge/beads --squash\n4. Close this bead after merge","notes":"Requested changes - tests need updating for getCurrentBranchOrHEAD signature change","status":"open","priority":2,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T07:03:41Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T07:30:55Z","work_type":"mutex"}
{"id":"bd-alpw2","title":"Skip custom type validation during multi-repo import","description":"Modify the multi-repo import path to skip validation of custom types. Trust that child repos validated their own issues.\n\nLocation: internal/storage/sqlite/multirepo.go\n\nThe key insight: during `importJSONLFile`, when calling `upsertIssueInTx`, we need to either:\n1. Pass a flag indicating this is a multi-repo import (trust custom types), OR\n2. Modify `ValidateWithCustom` to accept a \"trust custom\" flag, OR  \n3. Simply not validate types at all during import (simplest)\n\nOption 3 is probably cleanest - the JSONL came from a valid Beads database, so trust it entirely for types. We can still validate other fields.\n\nTest:\n- Create child repo with custom type `pm`\n- Create issue with type `pm` in child\n- Export child to JSONL\n- Hydrate into parent (which doesn't have `pm`)\n- Should succeed (currently fails)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T22:05:53Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T22:11:50Z","closed_at":"2026-01-09T22:11:50Z","dependencies":[{"issue_id":"bd-alpw2","depends_on_id":"bd-9ji4z","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-alpw2","depends_on_id":"bd-dqwuf","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-arjb","title":"bd sync fails from crew dirs with .beads/redirect pointing outside repo","description":"## Problem\n\n`bd sync` fails at the final git-status check when run from a crew directory that uses `.beads/redirect` to point to a shared beads directory in another repo.\n\n```\nError: checking git status after re-export: git status failed: exit status 128\n```\n\nThe underlying error is:\n```\nfatal: /path/to/mayor/rig/.beads: is outside repository at '/path/to/crew/wolf'\n```\n\n## Root Cause\n\n`gitHasBeadsChanges()` in `cmd/bd/sync_git.go:93-111` runs:\n```go\nstatusCmd := exec.CommandContext(ctx, \"git\", \"status\", \"--porcelain\", beadsDir)\n```\n\nWhen `beadsDir` resolves to a path outside the current git repo (via redirect), git fails.\n\n## Affected Scenario\n\n- Crew workers (`crew/wolf`) with `.beads/redirect` → `../../mayor/rig/.beads`\n- The redirect points to a different git clone\n- Sync actually succeeds (commit/push/pull/import all work) but fails at final validation\n\n## Workaround\n\nRun `bd sync` from the directory containing the actual `.beads/` (e.g., `mayor/rig`).\n\n## Suggested Fix\n\n`gitHasBeadsChanges()` should detect redirects and run git commands from the directory containing the actual `.beads/`, not from cwd.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/wolf","created_at":"2026-01-06T03:33:33Z","created_by":"beads/crew/wolf","updated_at":"2026-01-06T03:57:26Z","closed_at":"2026-01-06T03:57:26Z","work_type":"mutex"}
{"id":"bd-ascl5","title":"Missing --pinned flag on bd update","description":"Agent beads and role beads should be pinnable to prevent accidental closure. The pinned column exists in the schema (migration 023) but there's no CLI way to set it. bd update --pinned=true should work.","status":"open","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T12:49:33Z","created_by":"mayor","updated_at":"2026-01-17T12:49:33Z","labels":["desire-path"],"work_type":"mutex"}
{"id":"bd-ats9","title":"Epic: Beads v3 code pre-review","description":"Pre-review the Beads codebase before finalizing v3 test strategy. Surface architectural issues, inconsistent patterns, and technical debt that could block or invalidate planned work.\n\n**Goal:** Identify blocking issues before investing in test matrix and feature completion.\n\n**Scope:**\n- internal/storage/ - backend abstraction layer\n- internal/sync/ - JSONL export/import, federation modes\n- cmd/bd/ - CLI command handlers\n- Dolt integration points throughout\n\n**Known concerns to investigate:**\n- Sync mode guard pattern (ShouldExportJSONL) not consistently applied\n- Build tag architecture not implemented\n- Backend abstraction may be leaky\n\n**Output:** Prioritized list of architectural issues as new beads, with recommendations for which must be fixed before v3 feature completion.\n\n**Swarming:** This epic is designed for parallel polecat execution in Gas Town.","status":"closed","priority":1,"issue_type":"epic","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:40:59Z","created_by":"mayor","updated_at":"2026-01-27T03:54:54Z","closed_at":"2026-01-27T03:54:54Z","close_reason":"All reviews complete. Synthesis in bd-ats9.5. Key finding: 3 P1 JSONL export bugs must be fixed before proceeding with v3 test strategy."}
{"id":"bd-ats9.1","title":"Review internal/storage/ - backend abstraction layer","description":"Review the storage package for v3 readiness.\n\n**Check for:**\n- Clean abstraction between SQLite and Dolt backends\n- Leaky abstractions (backend-specific code outside storage/)\n- Consistent error handling patterns\n- Configuration handling for backend selection\n- Any hardcoded assumptions about SQLite\n\n**Output:** List of issues found with severity ratings, filed as new beads if significant.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/darcy","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:41:14Z","created_by":"mayor","updated_at":"2026-01-27T03:50:33Z","closed_at":"2026-01-27T03:50:33Z","close_reason":"Review complete. Filed 5 issues for leaky abstractions plus 1 summary issue. See bd-e3q2 for full findings.","dependencies":[{"issue_id":"bd-ats9.1","depends_on_id":"bd-ats9","type":"parent-child","created_at":"2026-01-26T19:41:14Z","created_by":"mayor"}]}
{"id":"bd-ats9.2","title":"Review internal/sync/ - federation and JSONL handling","description":"Review the sync package for v3 readiness.\n\n**Check for:**\n- ShouldExportJSONL() usage - is it checked everywhere it should be?\n- Federation mode handling (Classic, Dolt+JSONL, Dolt native, belt-and-suspenders)\n- Import/export consistency\n- Sync mode configuration paths\n- Race conditions in concurrent sync scenarios\n\n**Known bugs:** bd-ixip and bd-a9ka show this pattern isn't consistently applied.\n\n**Output:** List of issues found with severity ratings, filed as new beads if significant.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/elinor","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:41:16Z","created_by":"mayor","updated_at":"2026-01-27T03:49:48Z","closed_at":"2026-01-27T03:49:48Z","close_reason":"Review complete. Found 3 bugs total (1 new: bd-u9yv) and 1 architectural improvement (bd-t8x8). All issues filed with severity ratings.","dependencies":[{"issue_id":"bd-ats9.2","depends_on_id":"bd-ats9","type":"parent-child","created_at":"2026-01-26T19:41:15Z","created_by":"mayor"}],"comments":[{"id":25,"issue_id":"bd-ats9.2","author":"beads/crew/elinor","text":"## Review Complete: internal/sync/ (actually syncbranch/ and related)\n\n### Summary\nThe task asked to review 'internal/sync/' but this directory doesn't exist. The relevant code is in:\n- cmd/bd/sync*.go - main sync command and export logic\n- cmd/bd/daemon_sync.go - daemon sync operations\n- cmd/bd/autoflush.go - auto-flush/export\n- internal/syncbranch/ - sync branch worktree management\n\n### Issues Found\n\n**HIGH Severity - ShouldExportJSONL() not checked:**\n1. **bd-ixip (known)**: autoflush.go:flushToJSONLWithState() writes JSONL without checking sync mode\n2. **bd-a9ka (known)**: create.go:flushRoutedRepo() writes JSONL without checking sync mode\n3. **bd-u9yv (NEW)**: daemon_sync.go:exportToJSONLWithStore() (line 64) and its callers performExport() (line 516) and performSync() (line 832) don't check sync mode\n\n**Architecture Concern:**\n4. **bd-t8x8 (NEW)**: ShouldExportJSONL() checks are scattered in calling code, not centralized in export functions. This leads to missed checks.\n\n### Places that DO correctly check:\n- sync.go:517 - before git pull operations  \n- sync.go:721 - in doExportSync()\n\n### Race Conditions\nNo race conditions found. The only goroutine usage in syncbranch is for a timeout message helper with proper channel synchronization.\n\n### Import/Export Consistency\n- Import operations (sync_import.go, autoimport.go) don't need sync mode checks - they always read from JSONL\n- Export operations need to respect dolt-native mode to avoid unwanted JSONL writes\n\n### Recommendations\n1. Fix bd-ixip, bd-a9ka (known), and bd-u9yv (new)\n2. Implement bd-t8x8 to centralize the check\n3. Add integration tests for dolt-native mode JSONL behavior","created_at":"2026-01-27T03:49:43Z"}]}
{"id":"bd-ats9.3","title":"Review cmd/bd/ - CLI command handlers","description":"Review CLI commands for v3 readiness.\n\n**Check for:**\n- Commands that bypass storage abstraction\n- Inconsistent flag handling for backend/sync mode options\n- Commands that assume specific backend behavior\n- Error messages that expose internal implementation details\n- Missing commands for v3 workflows (migration, mode switching)\n\n**Output:** List of issues found with severity ratings, filed as new beads if significant.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/jane","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:41:17Z","created_by":"mayor","updated_at":"2026-01-27T03:50:23Z","closed_at":"2026-01-27T03:50:23Z","close_reason":"Review complete. Found 20 issues (3 HIGH, 13 MEDIUM, 4 LOW). Filed 6 child beads for significant findings.","dependencies":[{"issue_id":"bd-ats9.3","depends_on_id":"bd-ats9","type":"parent-child","created_at":"2026-01-26T19:41:17Z","created_by":"mayor"}]}
{"id":"bd-ats9.3.1","title":"daemon_sync_branch.go assumes JSONL always exists","description":"attached_molecule: bd-wisp-tpb\nattached_at: 2026-01-27T04:10:12Z\ndispatched_by: beads/crew/emma\n\n**File:** cmd/bd/daemon_sync_branch.go:80-82\n\n**Issue:** Code calls findJSONLPath() directly and fails with 'JSONL path not found' if missing. In dolt-native mode, JSONL may not exist - sync should use Dolt remotes instead.\n\n**Impact:** Daemon sync-branch fails in dolt-native mode.\n**Fix:** Check sync mode before assuming JSONL exists. In dolt-native, use Dolt sync mechanisms.\n\n**Severity:** HIGH","notes":"Implemented: Added ShouldExportJSONL() checks to syncBranchCommitAndPushWithOptions and syncBranchPull in daemon_sync_branch.go. In dolt-native mode, these functions return early to skip JSONL operations. Tests pass.","status":"done","priority":2,"issue_type":"bug","assignee":"beads/polecats/topaz","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:46Z","created_by":"beads/crew/jane","updated_at":"2026-01-27T04:14:44Z","dependencies":[{"issue_id":"bd-ats9.3.1","depends_on_id":"bd-ats9.3","type":"parent-child","created_at":"2026-01-26T19:49:45Z","created_by":"beads/crew/jane"},{"issue_id":"bd-ats9.3.1","depends_on_id":"bd-wisp-tpb","type":"blocks","created_at":"2026-01-26T20:10:11Z","created_by":"beads/crew/emma"}],"comments":[{"id":26,"issue_id":"bd-ats9.3.1","author":"beads/polecats/topaz","text":"Fix: Added ShouldExportJSONL() checks to syncBranchCommitAndPushWithOptions and syncBranchPull functions. In dolt-native mode, these functions now return early (true, nil) to skip JSONL operations since Dolt handles sync through its own Push/Pull methods. This prevents 'JSONL path not found' errors when JSONL doesn't exist in dolt-native mode.","created_at":"2026-01-27T04:13:40Z"}]}
{"id":"bd-ats9.3.2","title":"Error messages expose internal implementation details","description":"**Files:** Multiple files in cmd/bd/\n\n**Examples:**\n- daemon_sync_branch.go:82 - 'JSONL path not found'\n- daemon_sync.go:490 - 'Error: JSONL path not found'  \n- nodb.go:50 - 'failed to load issues from %s: %w' (exposes jsonlPath)\n- daemon_guard.go:19 - Exposes that Dolt is 'single-process only' and suggests SQLite\n\n**Issue:** Users see backend-specific terminology (JSONL, Dolt internals) in error messages. Should use abstract storage terminology.\n\n**Fix:** Replace 'JSONL path not found' with 'storage not found'. Replace backend-specific messages with generic ones.\n\n**Severity:** HIGH","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/lizzy","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:47Z","created_by":"beads/crew/jane","updated_at":"2026-01-27T04:15:49Z","closed_at":"2026-01-27T04:15:49Z","close_reason":"Fixed error messages in 7 files to use abstract storage terminology instead of exposing internal implementation details (JSONL, single-process, etc.)","dependencies":[{"issue_id":"bd-ats9.3.2","depends_on_id":"bd-ats9.3","type":"parent-child","created_at":"2026-01-26T19:49:47Z","created_by":"beads/crew/jane"}]}
{"id":"bd-ats9.3.3","title":"Add bd backend and bd sync mode subcommands","description":"**Issue:** Backend/sync mode management isn't discoverable.\n\n**Current state:**\n- Backend can only be set at init time via --backend flag\n- Sync mode set via bd sync --set-mode (flag, not subcommand)\n- No way to list available backends or modes\n\n**Proposed commands:**\n- `bd backend list` - Show available backends (jsonl, dolt, sqlite)\n- `bd backend show` - Show current backend\n- `bd sync mode list` - Show available sync modes  \n- `bd sync mode current` - Show current sync mode\n- `bd sync mode set \u003cmode\u003e` - Set sync mode with validation\n\n**Severity:** MEDIUM - Important for v3 discoverability","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/lydia","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:49Z","created_by":"beads/crew/jane","updated_at":"2026-01-27T04:17:34Z","closed_at":"2026-01-27T04:17:34Z","close_reason":"Closed","dependencies":[{"issue_id":"bd-ats9.3.3","depends_on_id":"bd-ats9.3","type":"parent-child","created_at":"2026-01-26T19:49:48Z","created_by":"beads/crew/jane"}]}
{"id":"bd-ats9.3.4","title":"Add consistent --backend flag to key commands","description":"**Issue:** The --backend flag only exists on init command.\n\n**Commands that should have backend awareness:**\n- `bd doctor` - Should validate backend-specific health\n- `bd export` - Should allow specifying export format\n- `bd daemon` - Should support backend selection\n- `bd migrate` - Should show source/target backends clearly\n\n**Fix:** Add --backend flag (or use current backend from config) to commands that interact with backends.\n\n**Severity:** MEDIUM","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:51Z","created_by":"beads/crew/jane","updated_at":"2026-01-27T03:49:51Z","dependencies":[{"issue_id":"bd-ats9.3.4","depends_on_id":"bd-ats9.3","type":"parent-child","created_at":"2026-01-26T19:49:51Z","created_by":"beads/crew/jane"}]}
{"id":"bd-ats9.3.5","title":"Hardcoded issues.jsonl paths throughout codebase","description":"**Issue:** ~50+ files have hardcoded filepath.Join(beadsDir, 'issues.jsonl')\n\n**Files include:**\n- activity_watcher.go:43\n- compact_tombstone.go:26, 121, 285\n- create.go:790, 1124\n- nodb.go:41, 216\n- sync_git.go:242-244\n- Many more\n\n**Impact:** Assumes JSONL is always the primary storage. In Dolt-native or multi-repo modes, JSONL path may differ or not exist.\n\n**Fix:** Extract to a storage-aware function that respects current backend configuration.\n\n**Severity:** MEDIUM","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:50:04Z","created_by":"beads/crew/jane","updated_at":"2026-01-27T03:50:04Z","dependencies":[{"issue_id":"bd-ats9.3.5","depends_on_id":"bd-ats9.3","type":"parent-child","created_at":"2026-01-26T19:50:04Z","created_by":"beads/crew/jane"}]}
{"id":"bd-ats9.3.6","title":"Compact command assumes JSONL tombstone handling","description":"**File:** cmd/bd/compact.go, compact_tombstone.go\n\n**Issue:** `compact --purge-tombstones` operates on tombstones in JSONL format. In Dolt backend, tombstones are handled differently (soft delete with deleted_at field).\n\n**Impact:** Compact may not work correctly in Dolt mode.\n\n**Fix:** Make compact backend-aware, delegating tombstone purging to storage layer.\n\n**Severity:** MEDIUM","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:50:07Z","created_by":"beads/crew/jane","updated_at":"2026-01-27T03:50:07Z","dependencies":[{"issue_id":"bd-ats9.3.6","depends_on_id":"bd-ats9.3","type":"parent-child","created_at":"2026-01-26T19:50:07Z","created_by":"beads/crew/jane"}]}
{"id":"bd-ats9.4","title":"Review Dolt integration points","description":"Review Dolt-specific code throughout the codebase.\n\n**Check for:**\n- Dolt server mode handling (concurrent access)\n- Pure-Go vs CGO code paths (are they properly separated?)\n- Dolt-specific features (AS OF, history, cell-level merge) - are they properly gated?\n- Performance-sensitive paths that need CGO\n- Build tag readiness (can code be excluded at compile time?)\n\n**Output:** List of issues found with severity ratings, filed as new beads if significant.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/lizzy","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:41:19Z","created_by":"mayor","updated_at":"2026-01-27T03:50:13Z","closed_at":"2026-01-27T03:50:13Z","close_reason":"Review complete. Dolt integration is well-architected with proper CGO separation, concurrent access handling, and feature gating. Filed bd-k4u7 for minor port constant inconsistency.","dependencies":[{"issue_id":"bd-ats9.4","depends_on_id":"bd-ats9","type":"parent-child","created_at":"2026-01-26T19:41:18Z","created_by":"mayor"}]}
{"id":"bd-ats9.5","title":"Synthesize pre-review findings into prioritized backlog","description":"## Synthesis: Beads v3 Pre-Review Findings\n\n### Executive Summary\n\nFour parallel code reviews (bd-ats9.1 through bd-ats9.4) identified **29 issues total**:\n- **3 HIGH priority (P1)** - JSONL export bugs in dolt-native mode\n- **20 MEDIUM priority (P2)** - Leaky abstractions, routing issues, test gaps\n- **6 LOW priority (P3)** - Documentation, UI polish, minor inconsistencies\n\n### CRITICAL BLOCKERS (Must Fix Before v3 Test Strategy)\n\nThese P1 bugs cause incorrect behavior in dolt-native mode:\n\n| ID | Issue | Impact |\n|----|-------|--------|\n| bd-a9ka | flushRoutedRepo() doesnt check sync mode | JSONL writes when shouldnt |\n| bd-ixip | autoflush.go writes JSONL unconditionally | JSONL writes when shouldnt |\n| bd-u9yv | daemon_sync.go exports JSONL unconditionally | JSONL writes when shouldnt |\n\n**Common fix:** Add ShouldExportJSONL() check to all JSONL export paths. See bd-t8x8 for centralized solution.\n\n### HIGH PRIORITY - Architectural Issues\n\n**Leaky Storage Abstractions (5 issues):**\n- bd-oslm: RPC layer imports sqlite directly\n- bd-oa45: compact/ requires SQLiteStorage\n- bd-2kgr: importer uses sqlite.IsUniqueConstraintError\n- bd-nrcp: molecules uses sqlite.BatchCreateOptions\n- bd-7cjc: beads.go creates sqlite.New directly\n\n**Fix:** Expand Storage interface, move shared types to storage package. See bd-e3q2 for detailed recommendations.\n\n**Gas Town Integration (3 issues):**\n- bd-xcs4: Missing routes.jsonl - FIXED by gt doctor --fix\n- bd-uepu: Routing mode mismatch between bd config and gt\n- bd-6tft: Dolt connection stability (bad connection warnings)\n\n### MEDIUM PRIORITY - Test Infrastructure\n\n**Test Matrix Tasks (7 issues):**\n- bd-fb78: Design comprehensive test strategy\n- bd-161v: Test Classic mode (SQLite + JSONL)\n- bd-9xwt: Test Dolt native mode\n- bd-j1af: Test belt-and-suspenders mode\n- bd-ynga: Test Dolt + JSONL export mode\n- bd-hex1: Add build tags for binary variants\n- bd-t8x2: Set up CI/CD for two binary builds\n\n### LOW PRIORITY - Can Defer to Post-v3\n\n- bd-ats9.3.4: Add consistent --backend flag\n- bd-ats9.3.5: Hardcoded issues.jsonl paths\n- bd-ats9.3.6: Compact assumes JSONL tombstones\n- bd-k4u7: Port constant inconsistency\n- bd-gnko: Gastown description field parsing\n- bd-8tru, bd-k51o, bd-qok6: Documentation tasks\n\n### RECOMMENDATION\n\n**Phase 1 - Blockers (do first):**\n1. Fix the three P1 JSONL export bugs (bd-a9ka, bd-ixip, bd-u9yv)\n2. Implement centralized ShouldExportJSONL() (bd-t8x8)\n\n**Phase 2 - Test Strategy (proceed with bd-fb78):**\nOnce P1 bugs are fixed, the test strategy work can proceed. The leaky abstractions are technical debt but dont prevent testing.\n\n**Phase 3 - Abstractions (parallel or post-v3):**\nClean up storage abstractions. This is important but not blocking.\n\n### Decision Point\n\nAfter fixing the 3 P1 JSONL bugs, we can confidently proceed with:\n- bd-fb78 (test strategy design)\n- Test matrix implementation (bd-161v, bd-9xwt, bd-j1af, bd-ynga)","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/emma","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:41:26Z","created_by":"mayor","updated_at":"2026-01-27T03:54:49Z","closed_at":"2026-01-27T03:54:49Z","close_reason":"Synthesis complete. See description for prioritized findings and recommendations.","dependencies":[{"issue_id":"bd-ats9.5","depends_on_id":"bd-ats9","type":"parent-child","created_at":"2026-01-26T19:41:26Z","created_by":"mayor"},{"issue_id":"bd-ats9.5","depends_on_id":"bd-ats9.1","type":"blocked-by","created_at":"2026-01-26T19:41:26Z","created_by":"mayor"},{"issue_id":"bd-ats9.5","depends_on_id":"bd-ats9.2","type":"blocked-by","created_at":"2026-01-26T19:41:26Z","created_by":"mayor"},{"issue_id":"bd-ats9.5","depends_on_id":"bd-ats9.3","type":"blocked-by","created_at":"2026-01-26T19:41:26Z","created_by":"mayor"},{"issue_id":"bd-ats9.5","depends_on_id":"bd-ats9.4","type":"blocked-by","created_at":"2026-01-26T19:41:26Z","created_by":"mayor"}]}
{"id":"bd-azddy","title":"Review PR #1260: Dolt lock retry and stale lock cleanup","description":"Review and approve PR #1260: fix(dolt): add lock retry and stale lock cleanup for operational reliability\n\n**PR URL:** https://github.com/steveyegge/beads/pull/1260\n**Author:** groblegark\n**Changes:** 163 additions, 31 deletions in internal/storage/dolt/store.go\n\n**Easy-win criteria met:**\n- Bug fix with clear reproduction and solution\n- Operational reliability improvement\n- Sensible defaults, no breaking changes\n\n**Problem:**\nDolt embedded driver creates exclusive locks that can cause:\n- 'database is read only' errors when lock acquisition fails\n- Stale lock files after crashes preventing subsequent opens\n- Lock contention between concurrent CLI commands\n\n**Solution:**\n1. Lock retry with exponential backoff (default: 30 retries, ~6 second window)\n2. Stale lock file cleanup on startup\n3. Transient error detection for retryable conditions\n\n**Review steps:**\n1. Review retry logic and error detection\n2. Verify stale lock cleanup is safe (only removes empty locks \u003e5s old)\n3. Approve and merge if all checks pass\n\n```bash\ngh pr review 1260 --repo steveyegge/beads --approve\ngh pr merge 1260 --repo steveyegge/beads --squash\n```","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T21:03:28Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T21:05:32Z","closed_at":"2026-01-22T21:05:32Z","work_type":"mutex"}
{"id":"bd-b88x3","title":"bd doctor: add checks for redirect configuration health","description":"When a repo uses .beads/redirect for shared rig beads, bd doctor should verify: (1) redirect target exists and has valid beads db, (2) redirect target repo has working beads-sync worktree, (3) local repo does NOT have vestigial beads-sync worktrees (these are unused with redirects and waste space). Currently only checks if redirect file is tracked by git. See also bd-lmqhe for related redirect handling bug in restoreBeadsDirFromBranch.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-09T22:16:52Z","created_by":"gastown/crew/george","updated_at":"2026-01-11T05:29:39Z","closed_at":"2026-01-11T05:29:39Z","work_type":"mutex"}
{"id":"bd-b956c6","title":"Clean up legacy deprecations across codebase","description":"Several deprecated features are still actively supported:\n\n1. **Legacy JSONL filename**: beads.jsonl → issues.jsonl migration still running\n2. **Legacy config.json**: Migrated to metadata.json on read\n3. **LastBdVersion field**: Deprecated in favor of .local_version\n4. **admin cleanup/compact/reset aliases**: Deprecated in favor of subcommands (GH#1006)\n5. **Legacy contributor config keys**: contributor.* → routing.contributor\n6. **--persist flag in cook.go**: Marked as legacy behavior\n7. **--reverse flag in dep.go**: Superseded by --direction\n\nShould:\n- Document deprecation timeline\n- Add deprecation warnings where missing\n- Plan eventual removal (major version bump)","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:36:19Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:36:19Z"}
{"id":"bd-bd575","title":"Fix: bd edit --wait editor issues (GH#987)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #987. bd edit has problems opening editor with --wait flag.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/polecats/topaz","created_at":"2026-01-10T06:20:04Z","created_by":"beads/crew/dave","updated_at":"2026-01-11T00:36:13Z","closed_at":"2026-01-11T00:36:13Z","work_type":"mutex"}
{"id":"bd-beads-crew-collins","title":"Crew worker collins in beads - human-managed persistent workspace.","description":"Crew worker collins in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:44:18Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T05:26:35Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-crew-darcy","title":"Crew worker darcy in beads - human-managed persistent workspace.","description":"Crew worker darcy in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:14:28Z","created_by":"deacon","updated_at":"2026-01-22T01:29:33Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-crew-dave","title":"Crew worker dave in beads - human-managed persistent workspace.","description":"Crew worker dave in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T06:31:23Z","created_by":"deacon","updated_at":"2026-01-22T06:31:23Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-crew-elinor","title":"Crew worker elinor in beads - human-managed persistent workspace.","description":"Crew worker elinor in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:34:40Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T00:52:28Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-crew-emma","title":"Crew worker emma in beads - human-managed persistent workspace.","description":"Crew worker emma in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: gt-crew-role\ncleanup_status: null","status":"open","priority":2,"issue_type":"agent","created_at":"2025-12-31T07:14:05Z","created_by":"deacon","updated_at":"2026-01-17T22:00:20Z","labels":["gt:sheriff"],"work_type":"mutex"}
{"id":"bd-beads-crew-fang","title":"Crew worker fang in beads - human-managed persistent workspace.","description":"Crew worker fang in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: gt-crew-role\ncleanup_status: null","status":"open","priority":2,"issue_type":"agent","created_at":"2025-12-31T07:14:05Z","created_by":"deacon","updated_at":"2026-01-17T08:26:00Z","work_type":"mutex"}
{"id":"bd-beads-crew-gastown-dennis","title":"Crew worker gastown-dennis in beads - human-managed persistent workspace.","description":"Crew worker gastown-dennis in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T07:40:24Z","created_by":"gastown/crew/joe","updated_at":"2026-01-13T07:40:24Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-crew-gastown-george","title":"Crew worker gastown-george in beads - human-managed persistent workspace.","description":"Crew worker gastown-george in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-18T00:13:58Z","created_by":"deacon","updated_at":"2026-01-18T00:13:58Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-crew-gastown-joe","title":"Crew worker gastown-joe in beads - human-managed persistent workspace.","description":"Crew worker gastown-joe in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-26T02:42:19Z","created_by":"mayor","updated_at":"2026-01-26T02:42:19Z","labels":["gt:agent"]}
{"id":"bd-beads-crew-jane","title":"Crew worker jane in beads - human-managed persistent workspace.","description":"Crew worker jane in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:44:01Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T03:30:14Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-crew-lizzy","title":"Crew worker lizzy in beads - human-managed persistent workspace.","description":"Crew worker lizzy in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:44:09Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T03:15:10Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-crew-lydia","title":"Crew worker lydia in beads - human-managed persistent workspace.","description":"Crew worker lydia in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:44:27Z","created_by":"beads/crew/emma","updated_at":"2026-01-17T18:47:18Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-crew-wickham","title":"Crew worker wickham in beads - human-managed persistent workspace.","description":"Crew worker wickham in beads - human-managed persistent workspace.\n\nrole_type: crew\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: hq-crew-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:14:30Z","created_by":"deacon","updated_at":"2026-01-21T05:24:35Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-polecat-DoltTest","title":"Polecat DoltTest in beads","description":"Polecat DoltTest in beads\n\nrole_type: polecat\nrig: beads\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-26T02:02:55Z","created_by":"mayor","updated_at":"2026-01-26T02:03:32Z","closed_at":"2026-01-26T02:03:32Z","close_reason":"removed via gt polecat identity remove","labels":["gt:agent"]}
{"id":"bd-beads-polecat-TestCat","title":"Polecat TestCat in beads","description":"Polecat TestCat in beads\n\nrole_type: polecat\nrig: beads\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-26T02:00:03Z","created_by":"mayor","updated_at":"2026-01-26T02:00:17Z","closed_at":"2026-01-26T02:00:17Z","close_reason":"removed via gt polecat identity remove","labels":["gt:agent"]}
{"id":"bd-beads-polecat-jasper","title":"bd-beads-polecat-jasper","description":"bd-beads-polecat-jasper\n\nrole_type: polecat\nrig: beads\nagent_state: closed\nhook_bead: null\nrole_bead: hq-polecat-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:55:52Z","created_by":"mayor","updated_at":"2026-01-17T10:24:59Z","closed_at":"2026-01-17T10:24:59Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-polecat-obsidian","title":"bd-beads-polecat-obsidian","description":"bd-beads-polecat-obsidian\n\nrole_type: polecat\nrig: beads\nagent_state: closed\nhook_bead: null\nrole_bead: hq-polecat-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:53:13Z","created_by":"mayor","updated_at":"2026-01-17T10:25:00Z","closed_at":"2026-01-17T10:25:00Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-polecat-onyx","title":"bd-beads-polecat-onyx","description":"bd-beads-polecat-onyx\n\nrole_type: polecat\nrig: beads\nagent_state: closed\nhook_bead: null\nrole_bead: hq-polecat-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:57:12Z","created_by":"mayor","updated_at":"2026-01-17T10:25:01Z","closed_at":"2026-01-17T10:25:01Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-polecat-opal","title":"bd-beads-polecat-opal","description":"bd-beads-polecat-opal\n\nrole_type: polecat\nrig: beads\nagent_state: closed\nhook_bead: null\nrole_bead: hq-polecat-role\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:58:33Z","created_by":"mayor","updated_at":"2026-01-17T10:25:02Z","closed_at":"2026-01-17T10:25:02Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-polecat-quartz","title":"bd-beads-polecat-quartz","description":"bd-beads-polecat-quartz\n\nrole_type: polecat\nrig: beads\nagent_state: closed\nhook_bead: null\ncleanup_status: has_unpushed\nactive_mr: bd-612h\nnotification_level: null","status":"closed","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:54:33Z","created_by":"mayor","updated_at":"2026-01-27T04:16:33Z","closed_at":"2026-01-17T10:25:03Z","labels":["gt:agent"],"work_type":"mutex"}
{"id":"bd-beads-polecat-topaz","title":"bd-beads-polecat-topaz","description":"bd-beads-polecat-topaz\n\nrole_type: polecat\nrig: beads\nagent_state: spawning\nhook_bead: bd-ats9.3.1\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T04:09:57Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T04:09:57Z","labels":["gt:agent"],"hook_bead":"bd-ats9.3.1"}
{"id":"bd-beads-refinery","title":"Refinery for beads - processes merge queue.","description":"Refinery for beads - processes merge queue.\n\nrole_type: refinery\nrig: beads\nagent_state: idle\nhook_bead: null\nrole_bead: gt-refinery-role\ncleanup_status: null","status":"open","priority":2,"issue_type":"agent","created_at":"2025-12-31T07:14:04Z","created_by":"deacon","updated_at":"2026-01-07T07:53:59Z","work_type":"mutex"}
{"id":"bd-beads-witness","title":"Witness for beads - monitors polecat health and progress.","description":"Witness for beads - monitors polecat health and progress.\n\nrole_type: witness\nrig: beads\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","status":"open","priority":2,"issue_type":"agent","owner":"steve.yegge@gmail.com","created_at":"2026-01-26T02:42:19Z","created_by":"mayor","updated_at":"2026-01-26T02:42:19Z","labels":["gt:agent"]}
{"id":"bd-beiz7","title":"Improve beads-release formula based on v0.47.0 learnings","description":"During the v0.47.0 release, several issues were encountered that could be addressed in the formula:\n\n## Issues Found\n\n1. **Stale CHANGELOG detection** - The draft was from Jan 8 but ~50 commits were missing. Formula should verify CHANGELOG completeness by comparing commits since last tag.\n\n2. **Half-done release detection** - CHANGELOG said 0.47.0 but code was 0.46.0. Formula should detect version mismatches upfront.\n\n3. **Dirty working tree handling** - Non-release files (.beads/config.yaml, .claude/settings.json) blocked the bump script. Formula should auto-stash unrelated changes or provide clearer guidance.\n\n4. **Multi-worktree git context** - Commit from wrong directory captured wrong files. Formula should enforce running from correct directory or handle worktrees explicitly.\n\n5. **Branch divergence recovery** - After a botched commit, branch was behind origin. Formula should check for this and guide recovery.\n\n## Suggested Improvements\n\n- Add CHANGELOG completeness check step (compare `git log \u003clast-tag\u003e..HEAD` with CHANGELOG entries)\n- Add version consistency pre-check (detect if CHANGELOG/code/tags are out of sync)\n- Add auto-stash step for non-release files before bump script\n- Add explicit working directory validation for worktree setups\n- Add branch sync verification before and after commits\n\n## Context\nRelease session: 2026-01-11, v0.47.0\nAgent: beads/crew/emma","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:07:21Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T02:12:45Z","closed_at":"2026-01-12T02:12:45Z","work_type":"mutex"}
{"id":"bd-bmzg2","title":"Refactor: Move Claude Code plugin to subdirectory (GH#985)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #985. Reorganize Claude Code plugin into its own subdirectory.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-10T06:20:07Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T06:59:13Z","closed_at":"2026-01-10T06:59:13Z","work_type":"mutex"}
{"id":"bd-bojye","title":"Add positional message support to 'gt mail reply'","description":"## What I Tried\n```\ngt mail reply hq-c0lyw \"Work completed. Commit 7cf67153 removed all Gas Town type constants...\"\n```\n\n## Error Received\n```\nError: accepts 1 arg(s), received 2\n```\n\n## What I Expected\nThe second argument to be treated as the message body, similar to how many CLI tools accept inline content.\n\n## Workaround\nUse the `-m` flag:\n```\ngt mail reply hq-c0lyw -m \"message here\"\n```\n\n## Why This Is a Desire Path\nPassing the message as a positional argument is a natural pattern - it mirrors conversational syntax (\"reply to X with Y\") and reduces flag ceremony for quick replies. The `-m` flag is fine for complex cases, but positional should work too.","status":"closed","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T00:46:28Z","created_by":"beads/crew/collins","updated_at":"2026-01-22T00:48:29Z","closed_at":"2026-01-22T00:48:29Z","labels":["desire-path"],"work_type":"mutex"}
{"id":"bd-bpx35","title":"Add 'bd view' as alias for 'bd show'","description":"For intuitive UX, add 'view' as an alias for the 'show' command. Users naturally try 'bd view \u003cid\u003e' when they want to see an issue.\n\n(Moved from hq-0kasn)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-21T01:37:11Z","created_by":"mayor","updated_at":"2026-01-22T03:43:46Z","closed_at":"2026-01-22T03:43:46Z","work_type":"mutex"}
{"id":"bd-br7hj","title":"Updated title","status":"closed","priority":0,"issue_type":"feature","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:00Z","created_by":"beads/crew/wolf","updated_at":"2026-01-13T00:41:38Z","closed_at":"2026-01-13T00:41:38Z","work_type":"mutex"}
{"id":"bd-bur4u","title":"Review PR #16605: ralph-wiggum nix/nixos fix","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #16605 (anthropics/claude-code)\n\nPR: https://github.com/anthropics/claude-code/pull/16605\nAuthor: onsails\nStatus: APPROVED by otavio and philiptaron\n\nNix/NixOS environment fix.\n- gh pr view 16605 --repo anthropics/claude-code\n- gh pr diff 16605 --repo anthropics/claude-code\n- If good: gh pr merge 16605 --repo anthropics/claude-code --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-08T22:20:27Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:29:36Z","closed_at":"2026-01-08T22:29:36Z","work_type":"mutex"}
{"id":"bd-bvysk","title":"Polecats don't get Claude Code hooks - settings.json at wrong level","description":"## Problem\n\nPolecat sandboxes don't have Claude Code hooks active because settings.json is installed at the wrong directory level.\n\nCurrent:\n- Settings at: gastown/polecats/.claude/settings.json\n- Polecat runs in: gastown/polecats/Toast/\n- Claude Code only looks in cwd, doesn't traverse up\n- Result: hooks not active for polecats\n\n## Root Cause\n\nIn session_manager.go:178-180:\n```go\npolecatsDir := filepath.Join(m.rig.Path, \"polecats\")\nif err := runtime.EnsureSettingsForRole(polecatsDir, \"polecat\", runtimeConfig); err != nil {\n```\n\nThis installs to polecats/ but should install to polecats/\u003cname\u003e/.\n\n## Fix\n\nCall EnsureSettingsForRole with the polecat's workDir (sandbox path), not the parent polecats/ dir.\n\nThe workDir is already available - it's set on line 163:\n```go\nworkDir := polecatObj.ClonePath\n```\n\nJust move the EnsureSettingsForRole call after we have workDir and use that instead.\n\n## Impact\n\n- pr-workflow-guard not active for polecats\n- All PreToolUse hooks missing\n- Polecats can currently create PRs, feature branches (unguarded)","status":"closed","priority":1,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T01:32:17Z","created_by":"beads/crew/jane","updated_at":"2026-01-21T01:32:46Z","closed_at":"2026-01-21T01:32:46Z","work_type":"mutex"}
{"id":"bd-bx5ko","title":"Review PR #1052: Add jira-beads-sync to COMMUNITY_TOOLS.md","description":"dispatched_by: beads/crew/emma\n\nEasy-win docs addition. PR: https://github.com/steveyegge/beads/pull/1052. Review link, format, approve and merge.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/grip","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T01:26:05Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T01:28:17Z","closed_at":"2026-01-13T01:28:17Z","work_type":"mutex"}
{"id":"bd-bz1ac","title":"Issue to close","status":"closed","priority":1,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:11Z","created_by":"beads/crew/wolf","updated_at":"2026-01-12T02:16:11Z","closed_at":"2026-01-12T02:16:11Z","work_type":"mutex"}
{"id":"bd-bz1g7","title":"Merge: onyx-mk9abhg7","description":"branch: polecat/onyx-mk9abhg7\ntarget: main\nsource_issue: onyx-mk9abhg7\nrig: beads\nagent_bead: bd-beads-polecat-onyx\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T05:30:34Z","created_by":"stevey","updated_at":"2026-01-11T05:53:12Z","closed_at":"2026-01-11T05:53:12Z","labels":["gt:merge-request"],"work_type":"mutex"}
{"id":"bd-c0b6","title":"bd init --from-jsonl: Skip git history scan","description":"## Problem\n\n`bd init` scans git history to find all issues ever created, which:\n- Resurrects deleted/compacted issues\n- Takes a long time on large repos\n- Defeats manual JSONL cleanup\n\n## Solution\n\nAdd `bd init --from-jsonl` flag that:\n1. Creates fresh database\n2. Imports ONLY from current .beads/issues.jsonl\n3. Skips git history scan entirely\n\n## Use Case\n\nAfter manually cleaning JSONL or receiving a clean JSONL from another source:\n```bash\n# Clean JSONL manually or via script\nbd init --from-jsonl  # Use current JSONL as-is\n```\n\n(Moved from hq-c21fj)","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-02T09:29:21Z","created_by":"beads/crew/dave","updated_at":"2026-01-03T00:59:09Z","closed_at":"2026-01-03T00:59:09Z","work_type":"mutex"}
{"id":"bd-c40999","title":"Dolt storage uses hardcoded 6-char ID length instead of adaptive scaling","description":"The Dolt storage backend has a hardcoded 6-char ID length in generateIssueID() (issues.go:621-629), while SQLite uses adaptive length scaling (3-8 chars based on DB size per birthday paradox).\n\nCurrent Dolt code:\n```go\nfunc generateIssueID(...) (string, error) {\n    hash := issue.ComputeContentHash()\n    if len(hash) \u003e 6 {\n        hash = hash[:6]\n    }\n    return fmt.Sprintf(\"%s-%s\", prefix, hash), nil\n}\n```\n\nSQLite has:\n- adaptive_length.go with computeAdaptiveLength() using birthday paradox\n- GetAdaptiveIDLength() returning 3-8 chars based on issue count\n- GenerateIssueID() with collision handling via nonces\n\nFix: Port the adaptive_length.go logic to Dolt and update generateIssueID to use it.","status":"closed","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-26T00:46:04Z","created_by":"mayor","updated_at":"2026-01-26T00:47:56Z","closed_at":"2026-01-26T00:47:56Z","close_reason":"Fixed: Ported adaptive_length.go to Dolt backend and updated generateIssueID to use adaptive 3-8 char length based on database size with nonce-based collision handling"}
{"id":"bd-c4nfq","title":"Review PR #16929: Respect --comment flag","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #16929 (anthropics/claude-code)\n\nPR: https://github.com/anthropics/claude-code/pull/16929\nAuthor: heathdutton\nFixes: #16606\n\nThe /code-review command was posting inline comments by default, but README says terminal output is default.\n- gh pr view 16929 --repo anthropics/claude-code\n- gh pr diff 16929 --repo anthropics/claude-code\n- If good: gh pr merge 16929 --repo anthropics/claude-code --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","created_at":"2026-01-08T22:20:29Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:29:36Z","closed_at":"2026-01-08T22:29:36Z","work_type":"mutex"}
{"id":"bd-c5da2e","title":"Reconcile DOLT-STORAGE-DESIGN.md with multi-backend reality","description":"The hop/docs/design/DOLT-STORAGE-DESIGN.md states:\n\n\u003e 'Dolt becomes the only storage backend. SQLite is retired.'\n\nHowever, the reality is that we're maintaining three co-existing backends for the foreseeable future:\n1. SQLite + JSONL (default, battle-tested)\n2. Dolt embedded (solo use)\n3. Dolt server (Gas Town)\n\nThe design doc should be updated to reflect this reality:\n- Remove 'SQLite is retired' language\n- Reframe as 'three supported backends'\n- Keep the aspirational vision but mark timeline as TBD\n- Document which features are backend-specific","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:36:15Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:36:15Z"}
{"id":"bd-c769a9","title":"Update ARCHITECTURE.md to document all three storage backends","description":"ARCHITECTURE.md needs to document the v3 storage architecture per DOLT-STORAGE-DESIGN-V3.md:\n\n## Updates Needed\n\n1. **Fidelity Levels** (v3 concept)\n   - Level 0: Ephemeral ops (disk logs, TTL: days)\n   - Level 1: Operational state (local DB, weeks/months)\n   - Level 2: Work records (ledger, permanent, compressed)\n   - Level 3: Ground truth (ledger, permanent, full fidelity)\n\n2. **Three-Backend Model**\n   - SQLite (Classic mode)\n   - Dolt pure-Go (embedded)\n   - Dolt CGO (server mode)\n\n3. **Four Federation Modes**\n   - Classic (SQLite + JSONL)\n   - Dolt + JSONL Export\n   - Dolt Native (no JSONL)\n   - Belt and Suspenders (both)\n\n4. **Updated Diagrams**\n   - Remove single-backend assumption\n   - Show sync mode decision tree\n   - Illustrate ledger vs working state separation\n\nCurrent state: ARCHITECTURE.md only describes SQLite+JSONL.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:35:06Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T03:47:58Z"}
{"id":"bd-cad503","title":"Handoff: Dolt migration unblocked - bd v0.49.0 required","description":"## Session Summary\n\nFixed the Dolt connection failure that was blocking beads operations.\n\n### Root Cause\nInstalled bd binary (v0.48.0, commit 5264d7aa) was 50 commits behind source and missing critical fix from commit e82f5136:\n- \"Handle Dolt 'database exists' error (error 1007) gracefully\"\n- \"main.go bypassed server mode config when creating Dolt storage\"\n\n### Fix Applied\n1. Rebuilt bd from ~/gt/beads/mayor/rig (make build)\n2. Copied to ~/.local/bin/bd\n3. Signed binary (codesign --sign -)\n4. Verified: bd version 0.49.0 (ca51980f)\n\n### Verified Working\n- gt hook - works\n- gt mail inbox - works (found previous handoff mail hq-c25c13)\n- bd create/show/close - writes persist correctly\n\n### Closed Blocker\n- hq-76da36: Dolt server write persistence failure - RESOLVED\n\n### Next Priority (from hq-c25c13)\nContinue Dolt migration epic hq-e4eefc:\n1. hq-c9440e: Scorched-earth SQLite removal from codebase\n2. hq-3f9f66: Remove bd daemon code entirely\n3. hq-05fed0: Aggressive Dolt database cleanup\n\n### Important Note\nThe bd binary in ~/.local/bin must stay at v0.49.0+. If gt/bd commands fail with \"Error 1007: can't create database beads\", the fix is:\n  cd ~/gt/beads/mayor/rig \u0026\u0026 make build \u0026\u0026 cp bd ~/.local/bin/ \u0026\u0026 codesign --sign - ~/.local/bin/bd","status":"closed","priority":1,"issue_type":"message","owner":"steve.yegge@gmail.com","created_at":"2026-01-25T20:25:15Z","created_by":"mayor","updated_at":"2026-01-27T03:48:57Z","closed_at":"2026-01-27T03:48:57Z","close_reason":"Handoff message consumed - v0.49.0 fix applied","labels":["dolt","handoff"]}
{"id":"bd-cdbc97","title":"Federation CLI UX improvements","description":"## Problem\n\nFederation is powerful but under-discoverable. Both humans and agents need better awareness.\n\n## Current State\n- bd federation add-peer/remove-peer/sync/status/list-peers exist\n- Doctor has federation checks (requires --deep)\n- No setup wizard or guided configuration\n- Sovereignty tiers defined but not enforced\n\n## Design Questions\n1. Should 'bd init --federation' exist?\n2. 'bd federation setup' wizard?\n3. How should sovereignty tiers affect sync?\n4. Auto-start daemon in federation mode when peers configured?\n\n## Proposed\n- bd federation setup - interactive wizard\n- bd federation dashboard - peer health at a glance\n- Surface federation issues in bd doctor prominently\n- Document topologies: hub-spoke, mesh, hierarchical","status":"open","priority":2,"issue_type":"feature","owner":"steve.yegge@gmail.com","created_at":"2026-01-25T19:44:09Z","created_by":"gastown/crew/joe","updated_at":"2026-01-25T19:44:09Z","labels":["ux"]}
{"id":"bd-ce70","title":"Review: Polecats should not delete tracked beads files","description":"During gt-3w685 implementation, nux accidentally included .beads/issues.jsonl deletion in commit. Review polecat sandboxing to ensure .beads/ files are protected from accidental deletion. Consider adding .beads/ to a protected paths list or gitignore in polecat worktrees.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T04:10:44Z","created_by":"mayor","updated_at":"2026-01-07T04:14:26Z","closed_at":"2026-01-07T04:14:26Z","work_type":"mutex"}
{"id":"bd-ckt23","title":"Deferred HOP schema additions (P2/P3)","description":"Moved from beads bd-zt59 - out of scope for Beads today.\n\nDeferred from bd-7pwh after review. Add when semantics are clearer and actually needed:\n\n- assignee_ref: Structured EntityRef alongside string assignee\n- work_type: 'mutex' vs 'open_competition' (everything is mutex in v0.1)\n- crystallizes: bool for work that compounds vs evaporates (can derive from issue_type)\n- cross_refs: URIs to beads in other repos (needs federation first)\n- skill_vector: []float32 embeddings placeholder (YAGNI)\n\nThese can be added later without breaking changes (all optional fields).\n\nNote: HOP-specific schema concerns belong in town HQ, not in the beads tool itself.\n\n(Moved from hq-my0dy9)","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-21T01:37:41Z","created_by":"mayor","updated_at":"2026-01-21T01:37:41Z","work_type":"mutex"}
{"id":"bd-clvv8","title":"Review and merge PR #1055: bump upload-pages-artifact v3→v4","description":"dispatched_by: beads/crew/emma\n\n## Easy-win PR Review\n\nPR: https://github.com/steveyegge/beads/pull/1055\nType: Dependabot dependency bump (GitHub Actions)\nChange: actions/upload-pages-artifact v3 → v4\n\n## Task\n1. Review the PR diff: `gh pr diff 1055 --repo steveyegge/beads`\n2. Check CI status: `gh pr checks 1055 --repo steveyegge/beads`\n3. If CI passes and diff looks safe, approve and merge:\n   `gh pr review 1055 --repo steveyegge/beads --approve`\n   `gh pr merge 1055 --repo steveyegge/beads --squash`\n4. Close this bead when done\n\n## Notes\n- Major version bump: dotfiles will NOT be included in artifacts (breaking change)\n- Likely OK for beads since we probably don't rely on dotfiles in page artifacts","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T03:28:33Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T07:05:20Z","closed_at":"2026-01-13T07:05:20Z","work_type":"mutex"}
{"id":"bd-cmdfo","title":"Assigned issue","status":"closed","priority":1,"issue_type":"task","assignee":"testuser","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:02Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:42Z","closed_at":"2026-01-27T03:48:42Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-cn56","title":"Update merge_slot.go to use labels instead of type","description":"Change merge slot bead management to use gt:slot label instead of TypeSlot.\n\n## Work\n- Change IssueType=slot to IssueType=task when creating slots\n- Add gt:slot label when creating slot beads  \n\n## Files\n- cmd/bd/merge_slot.go","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T04:40:22Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T06:11:04Z","closed_at":"2026-01-07T06:11:04Z","dependencies":[{"issue_id":"bd-cn56","depends_on_id":"bd-i54l","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-coh0k","title":"Blocked issue","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:02Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:43Z","closed_at":"2026-01-27T03:48:43Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-crv06","title":"Issue 1","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:14Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:43Z","closed_at":"2026-01-27T03:48:43Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-cwazv","title":"Bootstrap: Make actor string configurable","description":"The bootstrap code uses a hardcoded actor string:\n\n```go\n_, err := tx.ExecContext(ctx, `\n    INSERT IGNORE INTO dependencies (issue_id, depends_on_id, type, created_at, created_by)\n    VALUES (?, ?, ?, ?, ?)\n`, dep.IssueID, dep.DependsOnID, dep.Type, createdAt, \"bootstrap\")\n```\n\nShould be a constant or configurable via BootstrapConfig.\n\nLocation: internal/storage/dolt/bootstrap.go:152\n\n(Moved from hq-zvcaw)","status":"open","priority":4,"issue_type":"chore","created_at":"2026-01-21T01:37:38Z","created_by":"mayor","updated_at":"2026-01-21T01:37:38Z","labels":["dolt-backend"],"work_type":"mutex"}
{"id":"bd-d1n1","title":"Epic: Gate-Aware Release Workflow","description":"Reimagine beads-release.formula using gates for async waits.\n\n## Background\nCurrent release workflow has polecat sitting idle during CI (5-10 min wait).\nGates allow clean handoff: polecat completes phase, gate blocks next step,\nRefinery polls external condition, gate closes, new polecat resumes.\n\n## Phases\n1. Formula gate syntax (Step.Gate field)\n2. Gate bead creation during cook\n3. Polecat phase handoff protocol\n4. Refinery gh:run auto-discovery\n5. Full gate-aware release formula\n\n## Related\n- bd-mcva: Gate Evaluation (phases 2-4) - infrastructure\n- beads-release.formula.json: Current workflow","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-02T21:26:59Z","created_by":"mayor","updated_at":"2026-01-03T00:54:51Z","closed_at":"2026-01-03T00:54:51Z","work_type":"mutex"}
{"id":"bd-d1rda","title":"Review and merge PR #1059: bump golang.org/x/term v0.38→v0.39","description":"dispatched_by: beads/crew/emma\n\n## Easy-win PR Review\n\nPR: https://github.com/steveyegge/beads/pull/1059\nType: Dependabot dependency bump (Go modules)\nChange: golang.org/x/term 0.38.0 → 0.39.0\n\n## Task\n1. Review the PR diff: `gh pr diff 1059 --repo steveyegge/beads`\n2. Check CI status: `gh pr checks 1059 --repo steveyegge/beads`\n3. If CI passes and diff looks safe, approve and merge:\n   `gh pr review 1059 --repo steveyegge/beads --approve`\n   `gh pr merge 1059 --repo steveyegge/beads --squash`\n4. Close this bead when done\n\n## Notes\n- Minor version bump, adds transpose and delete key handling","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T03:28:37Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T03:38:46Z","closed_at":"2026-01-13T03:38:46Z","work_type":"mutex"}
{"id":"bd-d2n74","title":"Add 'work_type' field for mutex vs open_competition","description":"dispatched_by: beads/crew/emma\n\nAdd string field for work type. Values: 'mutex' (one worker, exclusive - default) or 'open_competition' (many submit, buyer picks). Per Decision 006. Default: mutex.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/giles","created_at":"2026-01-11T00:34:07Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T03:35:05Z","closed_at":"2026-01-11T03:35:05Z","dependencies":[{"issue_id":"bd-d2n74","depends_on_id":"bd-imi7w","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-d3zju","title":"Refactor: Consider passing max-depth as parameter instead of importing config in storage","description":"The GH#995 fix introduced a config dependency in the storage layer (both sqlite and memory). This creates coupling between storage and config packages.\n\nConsider refactoring to pass max-depth as a parameter to GetNextChildID, or via a StorageOptions struct, to maintain better separation of concerns.\n\nFiles affected:\n- internal/storage/sqlite/hash_ids.go\n- internal/storage/memory/memory.go\n\nLow priority - current implementation works correctly.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T21:36:01Z","created_by":"beads/crew/fang","updated_at":"2026-01-10T21:36:01Z","labels":["refactor"],"work_type":"mutex"}
{"id":"bd-d62qd","title":"beads_channel.go: Duplicate pruning logic between EnforceChannelRetention and PruneAllChannels","description":"In internal/beads/beads_channel.go, there is significant code duplication between:\n- EnforceChannelRetention (lines 386-453)\n- PruneAllChannels (lines 459-529)\n\nBoth functions contain nearly identical logic for:\n1. Querying messages with --type=message --label=channel:\u003cname\u003e\n2. Time-based retention: deleting messages older than RetentionHours\n3. Count-based retention: deleting oldest messages beyond RetentionCount\n4. Building a toDeleteIDs map to avoid duplicates\n5. Calling b.run(\"close\", id, ...) to prune messages\n\nThe only differences are:\n- PruneAllChannels iterates over all channels\n- PruneAllChannels uses a 10% buffer threshold for count-based pruning to avoid thrashing\n\nRecommendation: Extract a helper function like pruneChannelMessages(name string, fields *ChannelFields, useBuffer bool) to eliminate the ~50 lines of duplicated code.\n\nLocation: internal/beads/beads_channel.go:386-529","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T03:58:04Z","created_by":"gastown/crew/george","updated_at":"2026-01-22T03:58:04Z","labels":["dead-code","gt:code-review"],"work_type":"mutex"}
{"id":"bd-d7kdn","title":"Review and merge PR #1043: Pass hookArgs to pre-push (fixes #1041)","description":"dispatched_by: beads/crew/emma","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/grip","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T00:35:30Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T00:41:59Z","closed_at":"2026-01-13T00:41:59Z","work_type":"mutex"}
{"id":"bd-dcahx","title":"Add 'gt cat \u003cbead-id\u003e' alias to display bead content","description":"## Desire Path\n\n**Tried:** `gt cat bd-pr-sheriff`\n\n**Got:** Error - 'cat' is aliased to 'polecat', which doesn't handle bead IDs\n\n**Expected:** Display the bead's content (title, description, status, etc.) - like `bd show \u003cid\u003e` but via gt\n\n**Why it's a desire path:** Unix users expect `cat` to display content. When working with beads through gt, `gt cat \u003cbead-id\u003e` is the natural command to \"show me this bead.\" It follows the pattern of `cat file.txt` → `gt cat bd-xyz`.\n\n**Workaround:** `bd show \u003cbead-id\u003e --json`\n\n**Suggested implementation:** Add `cat` as a gt subcommand (or alias) that detects bead IDs (bd-*) and calls `bd show`.","status":"closed","priority":3,"issue_type":"feature","owner":"steve.yegge@gmail.com","created_at":"2026-01-15T20:10:48Z","created_by":"beads/crew/emma","updated_at":"2026-01-16T01:45:55Z","closed_at":"2026-01-16T01:45:55Z","labels":["desire-path"],"work_type":"mutex"}
{"id":"bd-dcu13","title":"Fix: Daemon mode doesn't persist defer_until (GH#993)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #993. Daemon mode isn't persisting the defer_until value properly.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/polecats/opal","created_at":"2026-01-10T06:19:57Z","created_by":"beads/crew/dave","updated_at":"2026-01-11T00:39:38Z","closed_at":"2026-01-11T00:39:38Z","work_type":"mutex"}
{"id":"bd-dd3vs","title":"bd sync fails on git status in worktrees","description":"This bug is already fixed in main (commit 3298c45e) but not yet released. \n\nThe installed bd v0.47.0 doesn't have the fix for redirect + sync-branch incompatibility. Building from source fixes the issue.\n\nRoot cause: gitHasUncommittedBeadsChanges() was not properly detecting the redirect and was running git status without the -C flag, causing 'path is outside repository' error.\n\nFix: commit 3298c45e 'fix(sync): handle redirect + sync-branch incompatibility (bd-wayc3)' - adds proper redirect detection and skips sync-branch operations for redirected clones.","status":"closed","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-15T05:02:51Z","created_by":"beads/crew/emma","updated_at":"2026-01-15T05:17:17Z","closed_at":"2026-01-15T05:17:17Z","work_type":"mutex"}
{"id":"bd-dh24","title":"bd migrate sync enables core.sparseCheckout on main worktree (GH#886)","description":"Running bd migrate sync sets core.sparseCheckout=true in main repo's .git/config, causing annoying git status message. Fix: disable sparse checkout after worktree creation.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-04T19:20:03Z","created_by":"beads/crew/grip","updated_at":"2026-01-04T19:24:20Z","closed_at":"2026-01-04T19:24:20Z","work_type":"mutex"}
{"id":"bd-dkf1g","title":"Add 'owner' field for human attribution (HOP CV chains)","description":"dispatched_by: beads/crew/emma\n\nProblem: created_by tracks executor (agent), but HOP CV needs owner (human email).\n\nSolution: Add owner field to Issue struct.\n\nDesign: Decision 008 says human identity = git author email. This is the foundation of CV accumulation.\n\nMigration: Add column, populate from GIT_AUTHOR_EMAIL.\n\nAcceptance Criteria:\n- owner field added to types.go\n- Migration adds column\n- bd create populates from git author\n- Owner included in content hash","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-11T00:33:31Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T03:28:26Z","closed_at":"2026-01-11T03:28:26Z","dependencies":[{"issue_id":"bd-dkf1g","depends_on_id":"bd-imi7w","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-dolt","title":"Dolt backend for Beads storage layer","description":"Implement Dolt storage backend per DOLT-STORAGE-DESIGN-V3.md. SQLite remains for Classic mode; Dolt is an option for users who need history queries, cell-level merge, or Dolt native federation.\n\n## Status: Phase 1 Complete ✓\n\n### Completed\n- Full Storage interface implementation (~50 methods)\n- MySQL-compatible schema with all tables and views  \n- Version control operations: commit, push, pull, branch, merge, checkout\n- History queries via AS OF and dolt_history_* tables\n- SQL injection protection with input validation\n- Comprehensive test suite (17 tests)\n- Federation commands (bd-wkumz epic - CLOSED as complete)\n\n## v3 Architecture Context\n\nPer DOLT-STORAGE-DESIGN-V3.md:\n- SQLite stays for Classic mode (not retired)\n- Two binaries: bd (pure-Go Dolt) and bd-cgo (CGO Dolt)\n- Four federation modes supported\n- Fidelity levels (0-3) for different work types\n\n## Next Steps (Phase 2)\n\n### Build System\n- Add build tags: sqlite_only, dolt_cgo (see bd-hex1)\n- Set up CI for both binaries (see bd-t8x2)\n\n### Sync Mode Guards\n- Fix autoflush.go ShouldExportJSONL() check (bd-ixip)\n- Fix flushRoutedRepo() sync mode check (bd-a9ka)\n\n### Documentation  \n- BACKENDS.md (bd-aed050)\n- ARCHITECTURE.md updates (bd-c769a9)\n- Migration guides (bd-qok6, bd-k51o)\n\nLABELS: backend, dolt, storage","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-21T01:37:39Z","created_by":"mayor","updated_at":"2026-01-27T03:48:26Z","labels":["backend","dolt","storage"],"dependencies":[{"issue_id":"bd-dolt","depends_on_id":"bd-2j2t5","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-dolt.1","title":"Dolt migration fails with 'cannot update manifest: database is read only'","description":"## Problem\n\nWhen migrating HQ beads to Dolt via `bd migrate --to-dolt`, the migration succeeds but subsequent write operations fail with:\n\n```\ncannot update manifest: database is read only\nError: failed to open database: failed to initialize schema: failed to create ready_issues view: cannot update manifest: database is read only\n```\n\n## Reproduction\n\n1. `cd ~/gt \u0026\u0026 bd migrate --to-dolt --yes`\n2. Migration completes successfully (6502 issues imported)\n3. `bd list` works (read operations succeed)\n4. `bd create -t task \"test\"` fails with read-only error\n\n## Observations\n\n- The error comes from the `.dolt/stats/` subdatabase manifest\n- Multiple zombie bd processes accumulate holding LOCK files\n- Removing LOCK files temporarily fixes reads but writes still fail\n- Removing the stats directory doesn't permanently fix it (recreated)\n- `bd migrate --to-sqlite` also fails (can't open Dolt DB)\n- Had to manually restore from SQLite backup\n\n## Environment\n\n- bd version 0.49.0\n- dolt version 1.80.1\n- macOS Darwin 25.2.0 arm64\n\n## Files involved\n\n- ~/gt/.beads/dolt/beads/.dolt/noms/LOCK\n- ~/gt/.beads/dolt/beads/.dolt/noms/manifest  \n- ~/gt/.beads/dolt/beads/.dolt/stats/.dolt/noms/LOCK\n\n## Notes\n\nInitially suspected macOS code signing, but binaries work fine for normal operations. The issue is specific to Dolt's embedded stats database initialization.\n\nMoved from gastown gt-dolt.5","status":"closed","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T03:21:41Z","created_by":"gastown/crew/joe","updated_at":"2026-01-26T01:01:53Z","closed_at":"2026-01-26T01:01:53Z","close_reason":"Fixed: Added stats subdatabase LOCK cleanup and fully disabled stats collection (dolt_stats_stop + auto_refresh_interval=0)","dependencies":[{"issue_id":"bd-dolt.1","depends_on_id":"bd-dolt","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-dolt.2","title":"Tech debt: documentation gaps for multi-backend","description":"See full review notes in session.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:48:23Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:48:23Z","dependencies":[{"issue_id":"bd-dolt.2","depends_on_id":"bd-dolt","type":"parent-child","created_at":"2026-01-23T23:48:23Z","created_by":"beads/crew/emma"}]}
{"id":"bd-dolt.4","title":"Tech debt: connection stability and legacy cleanup","description":"- Intermittent MySQL connection errors (bad connection)\n- Connection pool lifecycle issues\n- Also: clean up legacy deprecations (beads.jsonl, config.json, etc.)","status":"open","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:48:37Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:48:37Z","dependencies":[{"issue_id":"bd-dolt.4","depends_on_id":"bd-dolt","type":"parent-child","created_at":"2026-01-23T23:48:37Z","created_by":"beads/crew/emma"}]}
{"id":"bd-dolt.5","title":"Document multi-backend interoperability","description":"Document how maintainer (Dolt) and contributors (SQLite) can collaborate:\n- JSONL is the lingua franca\n- metadata.json is gitignored (local backend choice)\n- Both export/import same JSONL format\n- Contributor routing to ~/.beads-planning/","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:48:44Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:48:44Z","dependencies":[{"issue_id":"bd-dolt.5","depends_on_id":"bd-dolt","type":"parent-child","created_at":"2026-01-23T23:48:44Z","created_by":"beads/crew/emma"}]}
{"id":"bd-dpkdm","title":"Add AllowStale option to beads List API for resilient GUPP detection","description":"## Problem\n\nWhen the beads database is out of sync with the JSONL file (common after another agent syncs), `bd list` fails with \"Database out of sync with JSONL\". This causes `checkSlungWork()` in gastown's `gt prime` to silently fail, which means:\n\n1. AUTONOMOUS WORK MODE is never shown\n2. Normal startup directive is displayed instead\n3. Agents follow that instead of GUPP\n4. **Hooked work sits idle - massive GUPP violation**\n\nRoot cause: Commit 1da3e18 made staleness checks stricter, and `checkSlungWork()` silently returns false on error.\n\n## Solution\n\nImplement a resilient three-layer approach:\n\n### Step 1: Add AllowStale to ListOptions (beads)\n- Add `AllowStale bool` field to `ListOptions` struct\n- Update `List()` to pass `--allow-stale` flag when set\n\n### Step 2: Update checkSlungWork in gastown\n- Try quick `bd sync --import-only` first (best effort)\n- Try normal list\n- If error, log warning and retry with `AllowStale: true`\n- Only return false if both attempts fail\n\n### Step 3: Never fail silently\n- Always log errors instead of silent `return false`\n\n## Concurrency Note\n\nMultiple workers may spin up and try `bd sync` simultaneously. SQLite's own locking serializes writes, so this is safe but potentially slow. No additional mutex needed for correctness.\n\n## Files to Change\n\n**In beads:**\n- `internal/beads/beads.go` - Add AllowStale to ListOptions, update List()\n\n**In gastown (separate PR):**\n- `internal/cmd/prime.go` - Update checkSlungWork() with resilient logic\n\n## Testing\n- Simulate stale DB by modifying JSONL without importing\n- Verify AUTONOMOUS MODE shows with AllowStale fallback\n- Test concurrent worker startup","status":"closed","priority":1,"issue_type":"epic","assignee":"beads/crew/dave","created_at":"2026-01-09T08:36:55Z","created_by":"gastown/crew/george","updated_at":"2026-01-09T08:42:33Z","closed_at":"2026-01-09T08:42:33Z","work_type":"mutex"}
{"id":"bd-dqmb1","title":"Fix: SQLite WAL fails on WSL2 /mnt/c/ (GH#920)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #920. SQLite WAL mode fails when database is on Windows filesystem via WSL2.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/dave","created_at":"2026-01-10T06:20:24Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T07:03:05Z","closed_at":"2026-01-10T07:03:05Z","work_type":"mutex"}
{"id":"bd-dqwuf","title":"Add IsBuiltIn() method to IssueType","description":"Add a method to types.IssueType that returns true for built-in types (task, bug, feature, epic, chore).\n\nLocation: internal/types/types.go\n\n```go\nfunc (t IssueType) IsBuiltIn() bool {\n    switch t {\n    case TypeTask, TypeBug, TypeFeature, TypeEpic, TypeChore:\n        return true\n    }\n    return false\n}\n```\n\nAdd tests in internal/types/types_test.go.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T22:05:53Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T22:08:36Z","closed_at":"2026-01-09T22:08:36Z","dependencies":[{"issue_id":"bd-dqwuf","depends_on_id":"bd-9ji4z","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-dv7pn","title":"Create crew-cleanup formula at town level","description":"dispatched_by: beads/crew/fang\n\n## Summary\n\nCreate a shareable formula for cleaning up crew worker sandboxes.\n\n## Location\n`~/gt/.beads/formulas/crew-cleanup.formula.toml`\n\n## Steps to include\n1. verify-merged: Ensure all work pushed to main\n2. remove-untracked: `git clean -fd`\n3. discard-stashes: `git stash clear`\n4. delete-branches: Delete all non-main branches\n5. handoff: `gt handoff` for fresh context\n\n## Usage\n```bash\ngt sling dave --formula crew-cleanup\ngt sling gastown/crew/max --formula crew-cleanup\n```\n\n## Rationale\n- Rig-agnostic (works anywhere)\n- Discrete workflow with steps (formula, not bead)\n- Shareable via Mol Mall\n- Town-level so available to all rigs","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-16T19:02:30Z","created_by":"beads/crew/emma","updated_at":"2026-01-16T19:57:33Z","closed_at":"2026-01-16T19:57:33Z","work_type":"mutex"}
{"id":"bd-dx2dc","title":"Refactor merge queue to use wisps instead of .beads/mq/ JSON files","description":"## Simplified Scope\n\nAdd bd doctor check for stale .beads/mq/*.json files + auto-fix to delete them.\n\n**Files to modify:**\n- cmd/bd/doctor/maintenance.go - Add CheckStaleMQFiles()\n- cmd/bd/doctor.go - Wire up the check\n- cmd/bd/doctor_fix.go - Add fix handler\n\n**Why this is simple:**\n- The .beads/mq/ files are LOCAL ONLY (not committed to git)\n- They're stale because their branches no longer exist\n- gt done already creates merge-request wisps correctly\n- No migration needed - just delete the orphaned files\n\n**Full design:** See plan file at ~/.claude-accounts/ghosttrack/plans/reflective-splashing-canyon.md\n\n**Follow-up:** After this merges, create gastown convoy for full mrqueue removal.","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T02:17:00Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T03:42:58Z","closed_at":"2026-01-13T03:42:58Z","work_type":"mutex"}
{"id":"bd-e1bp5","title":"Review \u0026 merge PR #1013: Hyphenated prefix support","description":"dispatched_by: beads/crew/emma\n\n## PR Review Task\n\n**PR:** https://github.com/steveyegge/beads/pull/1013\n**Author:** sukhodolin\n\n## Summary\nFix ValidateIDFormat to support hyphenated prefixes (e.g., 'bead-me-up-3e9').\n\n## Changes\n- internal/validation/bead.go: Use utils.ExtractIssuePrefix instead of naive first-hyphen split\n- internal/validation/bead_test.go: Add comprehensive test cases\n\n## The Bug\nBefore: 'bead-me-up-3e9' → prefix 'bead' (wrong)\nAfter: 'bead-me-up-3e9' → prefix 'bead-me-up' (correct)\n\nThis fixes `bd create --parent` failing for projects with hyphenated prefixes.\n\n## Review Checklist\n1. Pull branch locally: `gh pr checkout 1013 --repo steveyegge/beads`\n2. Run tests: `go test ./internal/validation/...`\n3. Verify all new test cases pass\n4. If all good, merge: `gh pr merge 1013 --repo steveyegge/beads --squash`\n\n## Classification\nEasy-win: Bug fix using existing utility, excellent test coverage.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:17:33Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T02:46:14Z","closed_at":"2026-01-12T02:46:14Z","work_type":"mutex"}
{"id":"bd-e3q2","title":"Storage abstraction review: summary of findings","description":"## Review Summary\n\nReview of internal/storage/ for v3 readiness per bd-ats9.1.\n\n### Issues Found (5 beads filed)\n\n**Leaky Abstractions:**\n- bd-oslm: RPC layer imports sqlite directly\n- bd-oa45: compact/ requires SQLiteStorage concrete type  \n- bd-2kgr: importer uses sqlite.IsUniqueConstraintError\n- bd-nrcp: molecules uses sqlite.BatchCreateOptions\n- bd-7cjc: beads.go creates sqlite.New directly bypassing factory\n\n### Root Cause\nCode outside storage/ has grown to depend on SQLite-specific:\n- Types (SQLiteStorage, BatchCreateOptions, CompactionCandidate)\n- Methods (CheckEligibility, GetTier1/2Candidates, DeleteIssues with cascade)\n- Error checking (IsUniqueConstraintError)\n\n### Positive Findings\n\n**Well Designed:**\n- Storage interface is comprehensive (84 lines of methods)\n- VersionedStorage/RemoteStorage/FederatedStorage hierarchy is clean\n- Factory pattern correctly implemented with backend registration\n- Build tags (//go:build cgo) correctly applied to Dolt files\n- Backend configuration in configfile is well structured\n- Sync mode guard (ShouldExportJSONL) is properly designed\n\n**Configuration Handling:**\n- BackendCapabilities struct for behavioral differences\n- Proper server mode vs embedded mode handling for Dolt\n\n### Recommendations\n\n1. **Interface Expansion**: Add commonly used methods to Storage interface:\n   - Batch delete with cascade\n   - Batch create with options\n   - Error type checking (IsUniqueConstraint, etc.)\n\n2. **Type Migration**: Move shared types to storage package:\n   - BatchCreateOptions -\u003e storage.BatchCreateOptions\n   - CompactionCandidate -\u003e storage.CompactionCandidate\n   - OrphanHandling -\u003e storage.OrphanHandling\n\n3. **Feature Flagging**: For SQLite-only features (compact), add interface check:\n   - Define CompactableStorage interface\n   - Check at runtime rather than compile-time type assertion\n\n4. **Documentation**: Document which features are backend-specific\n\n### Files Reviewed\n- internal/storage/storage.go\n- internal/storage/versioned.go\n- internal/storage/provider.go\n- internal/storage/local_provider.go\n- internal/storage/factory/*.go\n- internal/storage/sqlite/store.go\n- internal/storage/dolt/store.go\n- cmd/bd/sync_mode.go\n- internal/configfile/configfile.go\n- Plus grep analysis of sqlite imports across codebase","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:50:19Z","created_by":"beads/crew/darcy","updated_at":"2026-01-27T03:50:19Z","dependencies":[{"issue_id":"bd-e3q2","depends_on_id":"bd-ats9.1","type":"blocks","created_at":"2026-01-26T19:50:27Z","created_by":"beads/crew/darcy"}]}
{"id":"bd-e3qkw","title":"Fix AGENTS.md broken link to CLAUDE.md (GHI #1049)","description":"attached_args: Simple docs fix: AGENTS.md references CLAUDE.md which doesn't exist on main. See GHI #1049.\ndispatched_by: beads/crew/emma","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/grip","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:11:35Z","created_by":"beads/crew/emma","updated_at":"2026-01-17T08:30:18Z","closed_at":"2026-01-17T08:30:18Z","work_type":"mutex"}
{"id":"bd-e6llb","title":"BG's issue to reopen","status":"closed","priority":1,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:00Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:44Z","closed_at":"2026-01-27T03:48:44Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-en43","title":"Evaluate agent fields on Issue struct","description":"Investigate and decide what to do with Gas Town-specific fields on Issue struct.\n\n## Fields to evaluate\n- HookBead (current work on agent's hook)\n- RoleBead (role definition bead)\n- AgentState (idle|running|stuck|stopped)\n- LastActivity (timestamp for timeout detection)\n- RoleType (polecat|crew|witness|refinery|mayor|deacon)\n- Rig (rig name)\n\n## Options\n1. Keep as optional fields (pragmatic, non-breaking)\n2. Move to separate agent_state table (clean but complex)\n3. Store in description/notes as JSON (hacky)\n4. Document as 'extension fields' for now\n\n## Files\n- internal/types/types.go\n- internal/storage/sqlite/migrations/030_agent_fields.go","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T04:40:51Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T06:19:21Z","closed_at":"2026-01-07T06:19:21Z","dependencies":[{"issue_id":"bd-en43","depends_on_id":"bd-i54l","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-ex1wk","title":"Review PR #831: fix(mq) use label for MR filtering","description":"dispatched_by: beads/crew/emma\n\nEasy-win PR review: Fix MR filtering to use gt:merge-request label instead of deprecated issue_type field.\n\nPR: https://github.com/steveyegge/gastown/pull/831\nAuthor: aleiby\nChanges: 63 additions, 2 deletions\nFixes: #816\n\nTask: Review the PR, verify tests pass, approve and merge if good.\n\nCommands:\ngh pr view 831 --repo steveyegge/gastown\ngh pr diff 831 --repo steveyegge/gastown\ngh pr review 831 --repo steveyegge/gastown --approve\ngh pr merge 831 --repo steveyegge/gastown --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/darcy","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:30:16Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T03:32:06Z","closed_at":"2026-01-21T03:32:06Z","work_type":"mutex"}
{"id":"bd-eyyer","title":"Review PR gastown#754: fix orphan-processes check only detects Gas Town processes","description":"dispatched_by: beads/crew/emma\n\nBug fix: 35 additions, 60 deletions. Prevents false positives when users have personal Claude sessions. URL: https://github.com/steveyegge/gastown/pull/754","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/jane","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T04:01:16Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T04:03:28Z","closed_at":"2026-01-21T04:03:28Z","work_type":"mutex"}
{"id":"bd-ezsnt","title":"Review PR #1091: fix doctor project-level settings detection","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #1091 from jamesmacaulay.\n\n**PR**: https://github.com/steveyegge/beads/pull/1091\n\n**Summary**: Fix isBeadsPluginInstalled() and hasClaudeHooks() to check project-level settings (.claude/settings.json and .claude/settings.local.json) in addition to user-level settings.\n\n**Easy-win criteria met**: Bug fix with clear reproduction, tests added, follows existing patterns.\n\n**Review checklist**:\n1. Verify tests pass locally\n2. Check code follows existing patterns\n3. Verify the fix addresses the issue described\n4. Approve and merge if everything looks good","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","owner":"steve.yegge@gmail.com","created_at":"2026-01-15T04:42:15Z","created_by":"beads/crew/emma","updated_at":"2026-01-15T05:49:19Z","closed_at":"2026-01-15T05:49:19Z","work_type":"mutex"}
{"id":"bd-f1050a","title":"Ensure bd doctor handles all three backends consistently","description":"bd doctor now has --server mode for Dolt server checks. Need to verify:\n\n1. Classic SQLite mode: All checks work correctly\n2. Dolt embedded mode: Appropriate checks run (no daemon checks)\n3. Dolt server mode: --server flag runs all federation checks\n\nAlso need to verify the error messaging is clear about which backend is in use and what checks are/aren't applicable.\n\nCurrent state: doctor/server.go looks complete but need end-to-end verification of all three modes.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T07:35:31Z","created_by":"beads/crew/emma","updated_at":"2026-01-24T07:35:31Z"}
{"id":"bd-f27it","title":"Help merge PR #1238: Daemon stack overflow fix","description":"dispatched_by: beads/crew/emma","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/elinor","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T00:47:52Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T00:52:24Z","closed_at":"2026-01-22T00:52:24Z","work_type":"mutex"}
{"id":"bd-fb78","title":"Design comprehensive test strategy for v3 backend/federation matrix","description":"The v3 design (DOLT-STORAGE-DESIGN-V3.md) introduces significant complexity:\n\n**Test Matrix Dimensions:**\n- 3 backends: SQLite, Dolt (pure-Go), Dolt (CGO)\n- 4 federation modes: Classic, Dolt+JSONL, Dolt native, belt-and-suspenders\n- 3 build variants: sqlite_only, default, dolt_cgo\n\n**Required Test Coverage:**\n1. Sync mode guards - every write path must respect ShouldExportJSONL()\n2. Mode transitions - migration paths need integration tests\n3. Build-time feature gating - build tags must exclude code properly\n4. Concurrent operations - Dolt server vs SQLite single-writer\n5. Valid combination matrix (not all 36 combinations are valid)\n\n**Deliverables:**\n- Test matrix definition (valid combinations)\n- Integration test suite for each federation mode\n- CI matrix configuration for build variants\n- Regression tests for sync mode guard pattern\n- Performance benchmarks for pure-Go vs CGO Dolt","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:36:49Z","created_by":"mayor","updated_at":"2026-01-27T03:36:49Z"}
{"id":"bd-fbkd","title":"Gate check should auto-discover non-numeric await_id","description":"When `bd gate check` encounters a gh:run gate with a non-numeric await_id (workflow name hint like 'release.yml'), it currently returns:\n\n```\nawaiting discovery (workflow hint: release.yml) - run 'bd gate discover'\n```\n\nThis requires manual intervention. The fix committed in 8528fcaa added the message, but didn't add auto-discovery.\n\n**Proposal:** `checkGHRun` should automatically call the discovery logic when it encounters a workflow name hint, rather than requiring a separate command.\n\n**Why this matters:**\n- The beads-release formula creates gates with `id = 'release.yml'`\n- Agents running the formula shouldn't need to know about the discover command\n- The chicken-and-egg problem: you can't release the version that fixes the release process\n\n**Implementation:**\n1. In `checkGHRun`, when `!isNumericID(gate.AwaitID)`:\n   - Query recent GitHub runs\n   - Match using `workflowNameMatches`\n   - Auto-update the gate's await_id\n   - Then proceed with the normal check","status":"closed","priority":1,"issue_type":"feature","assignee":"beads/crew/emma","created_at":"2026-01-07T08:20:22Z","created_by":"beads/crew/emma","updated_at":"2026-01-07T08:37:06Z","closed_at":"2026-01-07T08:37:06Z","work_type":"mutex"}
{"id":"bd-fen8","title":"Remove Gas Town types from IssueType enum","description":"Remove agent, role, rig, convoy, slot from built-in IssueType constants.\n\n## Work\n- Remove TypeAgent, TypeRole, TypeRig, TypeConvoy, TypeSlot constants\n- Update IsValid() switch statement to remove these types\n- Update RequiredSections() to remove agent/role/convoy references in default case comment\n\n## Files\n- internal/types/types.go","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T04:40:19Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T06:17:27Z","closed_at":"2026-01-07T06:17:27Z","dependencies":[{"issue_id":"bd-fen8","depends_on_id":"bd-16z7","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-fen8","depends_on_id":"bd-4jxh","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-fen8","depends_on_id":"bd-4kp2","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-fen8","depends_on_id":"bd-649s","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-fen8","depends_on_id":"bd-cn56","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-fen8","depends_on_id":"bd-i54l","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-fen8","depends_on_id":"bd-mgt2","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-ffp5","title":"Review PR #908: feat(doctor) external hook managers","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #908 from roelofb.\n\nPR: https://github.com/anthropics/beads/pull/908\nChanges: +1364/-5, 4 files (doctor/fix/hooks.go, hooks_test.go, git.go, CHANGELOG.md)\n\nFeature: detect external hook managers and check bd integration\n\nReview checklist:\n- [ ] Code quality and style\n- [ ] Tests pass\n- [ ] Feature works as intended\n- [ ] Approve or request changes","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","created_at":"2026-01-06T03:09:22Z","created_by":"beads/crew/emma","updated_at":"2026-01-06T03:12:30Z","closed_at":"2026-01-06T03:12:30Z","work_type":"mutex"}
{"id":"bd-fghuk","title":"Review and merge PR #1058: bump golang.org/x/mod v0.31→v0.32","description":"dispatched_by: beads/crew/emma\n\n## Easy-win PR Review\n\nPR: https://github.com/steveyegge/beads/pull/1058\nType: Dependabot dependency bump (Go modules)\nChange: golang.org/x/mod 0.31.0 → 0.32.0\n\n## Task\n1. Review the PR diff: `gh pr diff 1058 --repo steveyegge/beads`\n2. Check CI status: `gh pr checks 1058 --repo steveyegge/beads`\n3. If CI passes and diff looks safe, approve and merge:\n   `gh pr review 1058 --repo steveyegge/beads --approve`\n   `gh pr merge 1058 --repo steveyegge/beads --squash`\n4. Close this bead when done\n\n## Notes\n- Minor version bump, routine Go dependency update","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T03:28:36Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T03:30:27Z","closed_at":"2026-01-13T03:30:27Z","work_type":"mutex"}
{"id":"bd-fgqpg","title":"bd mol ready --gated: hardcoded query limits","description":"Hardcoded Limit:100 for closed gates and Limit:500 for ready work (mol_ready_gated.go:122,134). Could miss molecules in large deployments. Consider making configurable or at least documenting the limitation.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T05:32:19Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T05:32:19Z","dependencies":[{"issue_id":"bd-fgqpg","depends_on_id":"bd-ka761","type":"discovered-from","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-find4","title":"Remove Gas Town types from beads core built-in types","description":"## Background\n\nThe beads core has Gas Town-specific types baked in as built-in types:\n- molecule, gate, convoy, merge-request, slot (system types)\n- agent, role, rig, event, message (agent types)\n\nThese are Gas Town infrastructure concepts that leaked into the beads core model.\n\n## Desired State\n\nCore beads built-in types should only include work types:\n- task, bug, feature, chore, epic\n\nGas Town should configure its types via `types.custom` in config.\n\n## Tasks\n\n1. Remove non-work types from `internal/types/types.go` IssueType constants\n2. Update `IsValid()` to only accept work types\n3. Update `bd types` command to show only work types (and custom types if configured)\n4. Update documentation\n\n## Migration\n\n- Existing repos using these types will continue to work if they add them to `types.custom`\n- Gas Town rigs should have `types.custom` configured in their `.beads/config.yaml`\n\n## Companion Issue\n\nSee Gas Town issue for the other side of this change.","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T00:06:54Z","created_by":"beads/crew/wolf","updated_at":"2026-01-17T13:07:29Z","closed_at":"2026-01-17T13:07:29Z","labels":["architecture","tech-debt"],"work_type":"mutex"}
{"id":"bd-fivze","title":"Configure Gas Town types as custom types in beads","description":"## Background\n\nGas Town uses beads types that are currently built-in but should be custom:\n- molecule, gate, convoy, merge-request, slot (system types)\n- agent, role, rig, event, message (agent types)\n\nThese are being moved out of beads core (see bd-find4).\n\n## Tasks\n\n1. Add `types.custom` to Gas Town rig configs:\n   ```yaml\n   types.custom: \"molecule,gate,convoy,merge-request,slot,agent,role,rig,event,message\"\n   ```\n\n2. Update Gas Town documentation to explain these custom types\n\n3. Ensure all Gas Town rigs have the config before beads core removes built-in support\n\n## Dependency\n\nBlocked by: bd-find4 (beads core needs to support the transition)","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T00:07:03Z","created_by":"beads/crew/wolf","updated_at":"2026-01-17T00:08:34Z","closed_at":"2026-01-17T00:08:34Z","labels":["architecture","tech-debt"],"dependencies":[{"issue_id":"bd-fivze","depends_on_id":"bd-find4","type":"blocked-by","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-fjth5","title":"Refactor: Use types.MaxHierarchyDepth constant for fallback default","description":"The GH#995 fix added fallback defaults in two places:\n\n- internal/storage/sqlite/hash_ids.go:58: `maxDepth = 3 // fallback default`\n- internal/storage/memory/memory.go:1606: `maxDepth = 3 // fallback default`\n\nThese duplicate the value from types.MaxHierarchyDepth (internal/types/id_generator.go:92).\n\nShould reference the constant instead of hardcoding 3 to maintain single source of truth.\n\nLow priority - cosmetic improvement.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T21:36:08Z","created_by":"beads/crew/fang","updated_at":"2026-01-10T21:36:08Z","labels":["refactor"],"work_type":"mutex"}
{"id":"bd-fl9xb","title":"Review PR #960: Fix filepath.Rel sync error","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #960 (steveyegge/beads)\n\nPR: https://github.com/steveyegge/beads/pull/960\nAuthor: peterkc\nFixes: #959\n\nFixes bd sync failing with filepath.Rel error when dbPath is relative.\n- gh pr view 960 --repo steveyegge/beads\n- gh pr diff 960 --repo steveyegge/beads\n- If good: gh pr merge 960 --repo steveyegge/beads --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","created_at":"2026-01-08T22:30:24Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:37:20Z","closed_at":"2026-01-08T22:37:20Z","work_type":"mutex"}
{"id":"bd-foqmt","title":"Fix periodic auto-pull never executing git pull (GH#1015)","description":"dispatched_by: beads/crew/emma\n\n## GitHub Issue\nhttps://github.com/steveyegge/beads/issues/1015\n\n## Problem\nThe `remoteSyncTicker` periodic sync never actually pulls from remote because `performAutoImport()` has a `hasJSONLChanged()` check that returns early BEFORE the git pull can execute.\n\n## Root Cause\nIn `cmd/bd/daemon_sync.go`, `performAutoImport()` checks the hash BEFORE pulling:\n- Check compares local JSONL to database hash\n- Since no git pull happened, local file hasn't changed\n- Returns early, never reaches `syncBranchPull()`\n\n## Fix\nMove `hasJSONLChanged()` check to AFTER `syncBranchPull()`:\n1. Pull from git first\n2. Then check if pulled JSONL differs from DB\n3. If changed, proceed with import\n\n## Files\n- `cmd/bd/daemon_sync.go` - `performAutoImport()` function","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T10:45:39Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T10:48:55Z","closed_at":"2026-01-12T10:48:55Z","work_type":"mutex"}
{"id":"bd-fqze8","title":"Add 'crystallizes' field for work economics","description":"dispatched_by: beads/crew/emma\n\nAdd boolean field to track whether work compounds (crystallizes=true: code, features) or evaporates (crystallizes=false: ops, support). Per Decision 006, this affects CV weighting. Default: false (conservative).","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-11T00:34:06Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T07:21:17Z","closed_at":"2026-01-11T07:21:17Z","dependencies":[{"issue_id":"bd-fqze8","depends_on_id":"bd-imi7w","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-frhpd","title":"Fix read-only commands producing warnings when JSONL newer (GHI #1089)","description":"attached_args: Architectural issue: read-only store opened but ensureDatabaseFresh still calls autoImportIfNewer. See GHI #1089 for analysis.\ndispatched_by: beads/crew/emma","status":"hooked","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:11:25Z","created_by":"beads/crew/emma","updated_at":"2026-01-17T08:31:05Z","work_type":"mutex"}
{"id":"bd-g2hm8","title":"Design: Reconcile identity model across federation, rigs, and sovereignty tiers","description":"Deep design work needed to reconcile:\n\n1. Identity hierarchy: Human \u003e Town \u003e Rig \u003e Agent\n2. Town = Human principle (single-human towns, federation for collaboration)\n3. Sovereignty tiers per rig (public/org/pseudonymous/anonymous)\n4. Reputation aggregation across different sovereignty levels\n5. Anonymous chain reputation (cryptographic identity separate from human)\n6. Account-switching problem (executor changes, work context persists)\n\nKey docs to reconcile:\n- decisions/008-identity-model.md\n- PLATFORM-OF-PLATFORMS.md (sovereignty tiers)\n- FEDERATION.md (new identity section)\n\nOpen questions:\n- Rig sovereignty changes (does historical work become public?)\n- Cross-rig reputation (how does Tier 4 affect Tier 1 CV?)\n- Key rotation and ownership proofs\n- Rig migration between towns\n\nSee FEDERATION.md 'Identity Hierarchy and Sovereignty' section for context.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T03:02:30Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T03:09:52Z","closed_at":"2026-01-11T03:09:52Z","work_type":"mutex"}
{"id":"bd-g2qoq","title":"LookupChannelByName has redundant fallback logic","description":"In beads_channel.go:354-381, LookupChannelByName has a redundant fallback path.\n\n**Issue:**\n1. First tries GetChannelBead(name) which uses ChannelBeadID(name) to construct ID\n2. If not found, lists ALL channels and searches by name field\n3. Then in fallback (lines 370-377), constructs same ID again with ChannelBeadID(name) and calls Show(id)\n\nThe fallback logic is inefficient because:\n- If GetChannelBead(name) already failed with that ID, re-fetching via Show(id) using the same deterministic ID will fail again\n- The intermediate ListChannelBeads() call adds overhead but the subsequent Show() call doesn't use its results properly\n\n**Recommendation:** Remove the redundant Show(id) call in the fallback path since the issue is already found in the channels map.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T03:51:16Z","created_by":"gastown/crew/george","updated_at":"2026-01-22T03:51:16Z","work_type":"mutex"}
{"id":"bd-g4fx","title":"Test: Dolt persistence check","status":"closed","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-26T02:22:34Z","created_by":"mayor","updated_at":"2026-01-26T02:22:43Z","closed_at":"2026-01-26T02:22:43Z","close_reason":"Test passed - persistence working"}
{"id":"bd-g66dq","title":"beads-metadata sync branch deleted from origin","description":"The beads-metadata remote tracking branch was deleted from origin, causing bd sync to fail. The local worktree at .git/beads-worktrees/beads-metadata/ has uncommitted changes but cannot push because the upstream is gone.\n\nError: git status in worktree shows 'Your branch is based on origin/beads-metadata, but the upstream is gone.'\n\nInvestigation needed:\n- Was beads-metadata intentionally replaced by beads-sync?\n- Should the sync config be updated to use a different branch?\n- The deleted branch was shown during git fetch --prune","status":"closed","priority":1,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T18:42:47Z","created_by":"beads/refinery","updated_at":"2026-01-13T20:50:43Z","closed_at":"2026-01-13T20:50:43Z","work_type":"mutex"}
{"id":"bd-g6ibb","title":"Review PR #1262: Add abacus to community tools","description":"Review and approve PR #1262: Add terminal UI tool abacus to community tools\n\n**PR URL:** https://github.com/steveyegge/beads/pull/1262\n**Author:** curena\n**Changes:** 2 additions to docs/COMMUNITY_TOOLS.md\n\n**Easy-win criteria met:**\n- Documentation fix (adding community tool)\n- Simple, straightforward change\n\n**Review steps:**\n1. Verify the linked repo exists: https://github.com/ChrisEdwards/abacus\n2. Confirm the description is accurate\n3. Approve and merge if all checks pass\n\n```bash\ngh pr review 1262 --repo steveyegge/beads --approve\ngh pr merge 1262 --repo steveyegge/beads --squash\n```","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T21:03:24Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T21:05:31Z","closed_at":"2026-01-22T21:05:31Z","work_type":"mutex"}
{"id":"bd-gcij3","title":"Review PR #1086: fix daemon docs syntax","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #1086 from enjunear.\n\n**PR**: https://github.com/steveyegge/beads/pull/1086\n\n**Summary**: Documentation fix updating daemon command syntax from '--start/--stop/--status' to 'start/stop/status' format.\n\n**Easy-win criteria met**: Documentation fix (command syntax update), no code logic changes.\n\n**Review checklist**:\n1. Verify changes are consistent throughout\n2. Check no '--' syntax remains for start/stop/status\n3. Approve and merge","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-15T04:42:16Z","created_by":"beads/crew/emma","updated_at":"2026-01-15T04:43:14Z","closed_at":"2026-01-15T04:43:14Z","work_type":"mutex"}
{"id":"bd-gds85","title":"Review PR #828: fix(sling) check hooked status and shutdown on --force","description":"dispatched_by: beads/crew/emma\n\nEasy-win PR review: Prevent re-slinging hooked beads and send proper shutdown on --force.\n\nPR: https://github.com/steveyegge/gastown/pull/828\nAuthor: julianknutsen\nChanges: 49 additions, 3 deletions\n\nTask: Review the PR, verify tests pass, approve and merge if good.\n\nCommands:\ngh pr view 828 --repo steveyegge/gastown\ngh pr diff 828 --repo steveyegge/gastown\ngh pr review 828 --repo steveyegge/gastown --approve\ngh pr merge 828 --repo steveyegge/gastown --squash","notes":"PR #828 merged after fixing agent.Self() compilation error","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/lizzy","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:32:45Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T03:57:41Z","closed_at":"2026-01-21T03:57:41Z","work_type":"mutex"}
{"id":"bd-gfcmf","title":"Dog workers never created - plugin dispatch broken","description":"dispatched_by: mayor\n\n## Problem\n\nThe plugin dispatch system is wired up but non-functional because no dog workers exist.\n\n## Findings\n\n1. `gt plugin list` finds rebuild-gt plugin ✓\n2. `gt plugin run --dry-run` shows gate is open ✓\n3. `gt dog dispatch --plugin rebuild-gt` fails:\n   ```\n   Error: assigning work to dog: loading state: open /Users/stevey/gt/deacon/dogs/boot/.dog.json: no such file or directory\n   ```\n\n4. `gt dog list` shows \"boot\" as idle, but boot is actually the Boot watchdog (uses `.boot-status.json`), not a regular dog worker (uses `.dog.json`)\n\n5. No actual dog workers have ever been created via `gt dog add`\n\n## Impact\n\n- Deacon patrol plugin-run step cannot dispatch work\n- rebuild-gt plugin has never executed\n- Any plugin with cooldown/cron gates is dead\n\n## Root Cause\n\nBoot watchdog lives in `deacon/dogs/boot/` but is not a dog worker. The naming collision causes `gt dog list` to show it, but dispatch correctly fails because it lacks `.dog.json`.\n\n## Fix\n\n1. Either move boot watchdog out of `deacon/dogs/` \n2. Or create actual dog workers via `gt dog add alpha` etc.\n3. Clarify the boot vs dog distinction in docs/code","status":"closed","priority":1,"issue_type":"bug","assignee":"gastown/crew/george","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T12:54:06Z","created_by":"mayor","updated_at":"2026-01-17T17:46:52Z","closed_at":"2026-01-17T17:46:52Z","labels":["blocks:plugins","category:dogs"],"work_type":"mutex"}
{"id":"bd-gfcmf.1","title":"gt dog list incorrectly shows boot watchdog as a dog","description":"gt dog list shows 'boot' as idle, but boot is the Boot watchdog (uses .boot-status.json), not a dog worker (uses .dog.json). Either move boot out of deacon/dogs/ or filter it from dog list.","status":"open","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T17:38:19Z","created_by":"mayor","updated_at":"2026-01-17T17:38:19Z","labels":["category:dogs"],"dependencies":[{"issue_id":"bd-gfcmf.1","depends_on_id":"bd-gfcmf","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-gfcmf.2","title":"Create initial dog worker pool","description":"Create actual dog workers via gt dog add. Suggested initial pack: alpha, bravo. These are needed for plugin dispatch and other Deacon-delegated work.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T17:38:20Z","created_by":"mayor","updated_at":"2026-01-17T17:38:20Z","labels":["category:dogs"],"dependencies":[{"issue_id":"bd-gfcmf.2","depends_on_id":"bd-gfcmf","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-gfcmf.3","title":"Validate dog dispatch end-to-end","description":"Once dogs exist, test: gt dog dispatch --plugin rebuild-gt. Verify dog receives mail, executes plugin, creates result wisp, sends DOG_DONE.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T17:38:21Z","created_by":"mayor","updated_at":"2026-01-17T17:38:21Z","labels":["category:dogs"],"dependencies":[{"issue_id":"bd-gfcmf.3","depends_on_id":"bd-gfcmf","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-glnl","title":"Fix agent ID parser for hyphenated rig names (GH#868)","description":"Agent ID format \u003cprefix\u003e-\u003crig\u003e-\u003crole\u003e-\u003cname\u003e fails when rig contains hyphens. Fix: parse from ends - prefix first, name last, role second-to-last (must be crew/polecat/witness/etc), rig is everything in between.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-03T21:12:37Z","created_by":"beads/crew/grip","updated_at":"2026-01-03T21:22:35Z","closed_at":"2026-01-03T21:22:35Z","work_type":"mutex"}
{"id":"bd-gn5r","title":"Implement bd lint command","description":"New command to check issues for missing sections. Supports: bd lint (all open), bd lint \u003cid\u003e (single), bd lint --fix (interactive).","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-01T19:19:08Z","created_by":"beads/crew/grip","updated_at":"2026-01-01T22:18:39Z","closed_at":"2026-01-01T22:18:39Z","dependencies":[{"issue_id":"bd-gn5r","depends_on_id":"bd-615z","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-gn5r","depends_on_id":"bd-ou35","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-gnko","title":"Gastown uses description field parsing for structured data","description":"Gastown parses structured fields from bead descriptions using key:value line patterns. Files affected: fields.go (AttachmentFields, MRFields, RoleConfig, SynthesisFields). This works but is fragile - any prose description with colons could be misinterpreted. Consider: native beads slots, JSON metadata field, or formal field schema. Lower priority since it works today.","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:50:45Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T03:50:45Z"}
{"id":"bd-goeti","title":"Add 'delegated-from' edge type for completion cascades","description":"dispatched_by: beads/crew/emma\n\nAdd new DependencyType 'delegated-from' for work delegation chains. Enables completion cascade: when delegated work completes, validation flows up to parent. Per GRAPH-ARCHITECTURE delegation semantics.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","created_at":"2026-01-11T00:34:08Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T03:39:09Z","closed_at":"2026-01-11T03:39:09Z","dependencies":[{"issue_id":"bd-goeti","depends_on_id":"bd-imi7w","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-gsuhb","title":"Fix bd init --stealth excludes in wrong file for worktrees (GHI #1053)","description":"attached_args: Fix worktree exclude path - should use main repo .git/info/exclude not worktree path. See GHI #1053.\ndispatched_by: beads/crew/emma","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:11:34Z","created_by":"beads/crew/emma","updated_at":"2026-01-17T10:29:22Z","closed_at":"2026-01-17T10:29:22Z","work_type":"mutex"}
{"id":"bd-gxaf","title":"BUG: gt rig shutdown doesn't kill tmux sessions","description":"## Problem\n\n`gt rig shutdown wyvern` updates runtime JSON to `state: stopped` but does NOT kill the tmux sessions (`gt-wyvern-witness`, `gt-wyvern-refinery`).\n\nSince `gt rig status` checks for tmux sessions (correctly), it shows them as running.\n\n## Evidence\n\nAfter `gt rig shutdown wyvern`:\n- Runtime JSON: `state: stopped` ✓\n- tmux sessions: still exist ✗\n\n## Impact\n\n- Rig appears running after shutdown\n- tmux status shows green icon for 'stopped' rigs\n- User confusion\n\n## Root Cause\n\n`gt rig shutdown` in internal/cmd/rig.go updates runtime state but doesn't call `tmux kill-session` for witness/refinery.\n\n## Fix\n\nIn shutdown logic, after setting state to stopped, kill:\n- `gt-{rig}-witness` session\n- `gt-{rig}-refinery` session","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-06T21:07:50Z","created_by":"mayor","updated_at":"2026-01-06T21:17:46Z","closed_at":"2026-01-06T21:17:46Z","work_type":"mutex"}
{"id":"bd-gxb4","title":"gt done --phase-complete: gastown changes for phase handoff","description":"The gt done --phase-complete flag and Witness handling changes need to be\napplied to the gastown project. These changes are already written and tested\nin the mayor/rig but need to be properly committed through a gastown worktree.\n\nFiles changed:\n- internal/cmd/done.go: Add --phase-complete and --gate flags\n- internal/beads/beads.go: Add AddGateWaiter method\n- internal/witness/protocol.go: Add Gate field to PolecatDonePayload\n- internal/witness/handlers.go: Handle PHASE_COMPLETE exit type\n\nThis is a dependency for bd-quw1 (polecat phase handoff).\n\nThe beads changes (bd gate add-waiter, bd gate show) are committed in bd-quw1.","status":"closed","priority":1,"issue_type":"task","assignee":"gastown/polecats/nux","created_at":"2026-01-03T00:36:48Z","created_by":"beads/polecats/jasper","updated_at":"2026-01-03T00:41:46Z","closed_at":"2026-01-03T00:41:46Z","work_type":"mutex"}
{"id":"bd-hcppl","title":"Merge: ruby-mk905whv","description":"branch: polecat/ruby-mk905whv\ntarget: main\nsource_issue: ruby-mk905whv\nrig: beads\nagent_bead: bd-beads-polecat-ruby\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T05:03:05Z","created_by":"beads/polecats/ruby","updated_at":"2026-01-11T06:05:22Z","closed_at":"2026-01-11T06:05:22Z","labels":["gt:merge-request"],"work_type":"mutex"}
{"id":"bd-hex1","title":"Add build tags for sqlite_only and dolt_cgo variants","description":"Per DOLT-STORAGE-DESIGN-V3.md, we need build tags to support different binary configurations:\n- sqlite_only: SQLite only, no Dolt at all\n- dolt_cgo: CGO Dolt for performance-sensitive federation\n\nExample build commands:\n  go build -tags=sqlite_only ./cmd/bd\n  CGO_ENABLED=1 go build -tags=dolt_cgo ./cmd/bd","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:44:53Z","created_by":"mayor","updated_at":"2026-01-27T02:44:53Z"}
{"id":"bd-hmeb","title":"bd slot set doesn't support cross-beads prefix routing","description":"## Problem\n\n`bd slot set` fails when setting a slot to a bead that lives in a different beads database (cross-db routing).\n\n## Evidence\n\nWhen spawning a polecat:\n```\nWarning: could not set role slot: bd slot set gt-gastown-polecat-chumbucket role hq-polecat-role: \nError: failed to resolve bead hq-polecat-role: no issue found matching \"hq-polecat-role\"\n```\n\nThe agent bead `gt-gastown-polecat-chumbucket` is in rig beads (`gastown/mayor/rig/.beads/`).\nThe role bead `hq-polecat-role` is in town beads (`~/gt/.beads/`).\n\n`bd show hq-polecat-role` works fine (uses prefix routing via routes.jsonl).\n`bd slot set ... hq-polecat-role` fails (does not use routing).\n\n## Root Cause\n\n`bd slot set` resolves the target bead in the current database only, ignoring the `hq-` prefix that should route to town beads.\n\n## Expected Behavior\n\n`bd slot set \u003cagent\u003e \u003cslot\u003e \u003cbead\u003e` should:\n1. Check if `\u003cbead\u003e` has a routable prefix (e.g., `hq-`, `gt-`, `bd-`)\n2. If so, resolve it via routes.jsonl like `bd show` does\n3. Store the bead reference (cross-db references are valid for slots)\n\n## Workaround\n\nCurrently the warning is non-fatal - the role slot just is not set. But this breaks role-based queries.\n\n## Files\n\n- `cmd/slot.go` - slot set command implementation\n- Need to add routing logic similar to `cmd/show.go`","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/polecats/garnet","created_at":"2026-01-04T23:12:40Z","created_by":"mayor","updated_at":"2026-01-04T23:16:19Z","closed_at":"2026-01-04T23:16:19Z","work_type":"mutex"}
{"id":"bd-hu3sg","title":"Review PR #1257: Fix PrefixOverride in transaction storage","description":"Review and approve PR #1257: Fix PrefixOverride not respected in transaction storage layer\n\n**PR URL:** https://github.com/steveyegge/beads/pull/1257\n**Author:** justSteve\n**Changes:** 14 additions, 5 deletions in internal/storage/sqlite/transaction.go\n\n**Easy-win criteria met:**\n- Bug fix with clear reproduction and solution\n- Small, focused change\n- Fix mirrors existing pattern in queries.go\n\n**Problem:**\nWhen creating issues with explicit IDs via PrefixOverride (for cross-rig creation), transaction.go wasn't handling PrefixOverride - only queries.go did.\n\n**Fix:**\nAdded same PrefixOverride handling to transaction.go:\n1. Check if PrefixOverride is set\n2. If set, use it and skip prefix validation\n3. Otherwise fall back to existing logic\n\n**Review steps:**\n1. Review the diff for correctness\n2. Confirm fix matches existing pattern in queries.go\n3. Approve and merge if all checks pass\n\n```bash\ngh pr review 1257 --repo steveyegge/beads --approve\ngh pr merge 1257 --repo steveyegge/beads --squash\n```","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T21:03:26Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T21:05:31Z","closed_at":"2026-01-22T21:05:31Z","work_type":"mutex"}
{"id":"bd-hvim5","title":"Review PR #1040: Add prek support as pre-commit alternative","description":"dispatched_by: beads/crew/emma\n\nEasy-win feature with tests. PR: https://github.com/steveyegge/beads/pull/1040. prek is Rust-based pre-commit alternative. Run tests, verify detection patterns, approve and merge.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T01:26:06Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T01:30:20Z","closed_at":"2026-01-13T01:30:20Z","work_type":"mutex"}
{"id":"bd-hvwnb","title":"gt prime: detectSessionState duplicates checkSlungWork logic","description":"detectSessionState() (lines 1775-1799) duplicates the hooked bead detection logic from checkSlungWork() (lines 1035-1066). This could lead to drift if one is updated without the other.\n\nOptions:\n1. Extract shared helper function for hooked bead detection\n2. Have detectSessionState call into checkSlungWork (would need refactoring)\n3. Accept duplication with comment noting the relationship\n\nLocation: gastown/mayor/rig/internal/cmd/prime.go","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T08:45:58Z","created_by":"mayor","updated_at":"2026-01-12T04:41:20Z","closed_at":"2026-01-12T04:41:20Z","work_type":"mutex"}
{"id":"bd-hz46s","title":"Ensure last-touched is never tracked in git","description":"The `.beads/last-touched` file is local runtime state that should never be in git.\n\n**Current issue:**\n- `~/gt/wyvern/.beads/last-touched` is tracked in git\n- Missing `.beads/.gitignore` in some repos allows this\n\n**Required changes:**\n\n1. **Remove from git** (one-time fix for wyvern):\n   ```bash\n   cd ~/gt \u0026\u0026 git rm --cached wyvern/.beads/last-touched\n   ```\n\n2. **bd doctor check** - add to `cmd/bd/doctor/gitignore.go`:\n   - Verify `last-touched` is NOT tracked in git (`git ls-files --error-unmatch`)\n   - Verify `last-touched` IS in `.beads/.gitignore`\n   - Provide auto-fix if missing\n\n3. **bd init** - ensure `.beads/.gitignore` is created with full template including `last-touched`\n\n4. **Town .gitignore safety net** - add `**/.beads/last-touched` to town's `.gitignore`\n\n**Files to modify:**\n- `cmd/bd/doctor/gitignore.go` - add tracked-in-git check\n- `cmd/bd/init.go` - ensure .gitignore creation\n- `~/gt/.gitignore` - add safety net pattern","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T09:49:58Z","created_by":"mayor","updated_at":"2026-01-12T09:49:58Z","work_type":"mutex"}
{"id":"bd-i3ed","title":"Refactor bd setup to recipe-based architecture (GH#898)","description":"## Summary\n\nReplace tool-specific setup commands (cursor, claude, etc.) with a generic recipe-based system. New tools become config entries, not code changes.\n\n## Motivation\n\nGH#898 requests Kilo Code integration. Current approach requires new Go code for each tool:\n- `cmd/bd/setup/cursor.go`\n- `cmd/bd/setup/kilocode.go` (proposed)\n- `cmd/bd/setup/windsurf.go` (future?)\n- ...\n\nThis does not scale. All these integrations do the same thing:\n1. Generate markdown content (beads workflow instructions)\n2. Write to tool-specific path\n\nThe **content** is identical. Only the **destination path** varies.\n\n## Design\n\n### Core Insight\n\nBeads does not need to know anything about Kilo Code, Cursor, or Claude Code beyond where they read their rules files. That is a path mapping—data, not code.\n\n### Recipe Format\n\n```toml\n# .beads/recipes.toml (user additions/overrides)\n[cursor]\npath = \".cursor/rules/bd.md\"\n\n[claude]\npath = \"CLAUDE.md\"\n\n[kilocode]\npath = \".kilocode/rules/bd.md\"\n\n[my-custom-editor]\npath = \".myeditor/config/bd.md\"\n```\n\n### Built-in Defaults\n\nShip sensible defaults compiled into binary:\n- cursor → `.cursor/rules/bd.md`\n- claude → `CLAUDE.md`\n- windsurf → `.windsurf/rules/bd.md`\n- cody → `.cody/rules/bd.md` (verify path)\n\nUser file overrides/extends built-in defaults.\n\n### Commands\n\n| Command | Description |\n|---------|-------------|\n| `bd setup \u003crecipe\u003e` | Write template to recipe path |\n| `bd setup --list` | Show available recipes (built-in + user) |\n| `bd setup --print` | Dump template to stdout |\n| `bd setup -o \u003cpath\u003e` | Write to arbitrary path (escape hatch) |\n| `bd setup \u003crecipe\u003e --check` | Verify if installed |\n| `bd setup \u003crecipe\u003e --remove` | Delete the file |\n| `bd setup --add \u003cname\u003e \u003cpath\u003e` | Save custom recipe |\n\n### Template\n\nSingle markdown template embedded in binary. Contains:\n- What beads is\n- Key commands (`bd ready`, `bd create`, `bd close`, etc.)\n- Workflow guidance\n- JSON flags for programmatic use\n\n### Implementation Plan\n\n1. Add `--print` and `-o` flags to existing setup command\n2. Create `internal/recipes/` package\n   - Built-in recipes (Go map or embed)\n   - Load/merge user `.beads/recipes.toml`\n3. Refactor `cmd/bd/setup/setup.go` to use recipes\n4. Remove tool-specific files (`cursor.go`, etc.)\n5. Add `--add` command to save custom recipes\n6. Update documentation\n\n### Migration\n\nExisting `bd setup cursor` continues to work—just backed by recipe lookup instead of dedicated code.\n\n## Out of Scope (for now)\n\n- `--global` flag (user-level config paths) — use `-o` escape hatch\n- `mode: append` (add to existing file) — wait until requested\n- GitHub recipe registry — overkill for path mappings\n- TOML migration for config.yaml — separate initiative\n\n## Response to GH#898\n\nOnce implemented, respond to PR:\n\n\u003e Thanks for the contribution! We are refactoring `bd setup` to a recipe-based approach where new tools are config entries, not code changes.\n\u003e\n\u003e Instead of new Go files, please submit a PR adding Kilo Code to the built-in recipes in `internal/recipes/builtin.go` (or equivalent). Happy to help if you have questions!\n\n## References\n\n- GH#898: Kilo Code integration request\n- Current setup code: `cmd/bd/setup/`\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-05T04:05:44Z","created_by":"beads/crew/fang","updated_at":"2026-01-05T05:57:21Z","closed_at":"2026-01-05T05:57:21Z","work_type":"mutex"}
{"id":"bd-i54l","title":"Extract Gas Town-specific issue types from beads core","description":"dispatched_by: beads/crew/dave\n\n## Problem\n\nBeads has accumulated issue types that are specific to Gas Town's orchestration model:\n\n```go\nTypeAgent   IssueType = \"agent\"   // Agent identity bead\nTypeRole    IssueType = \"role\"    // Agent role definition  \nTypeRig     IssueType = \"rig\"     // Rig identity bead (project container)\nTypeConvoy  IssueType = \"convoy\"  // Cross-project tracking\nTypeSlot    IssueType = \"slot\"    // Exclusive access slot (merge-slot gate)\n```\n\nThis violates separation of concerns. Beads is supposed to be a **generic AI-friendly issue tracker** that Gas Town happens to use - not \"Gas Town's issue tracker.\"\n\n## Impact\n\n- **Credibility**: Beads can't be presented as a standalone tool when it has hardcoded knowledge of a specific orchestration system\n- **Coupling**: Changes to Gas Town's identity model require beads releases\n- **Confusion**: Users outside Gas Town see types that don't apply to them\n\n## Solution\n\n### Option A: Labels instead of types\nGas Town uses labels like `gt:agent`, `gt:role`, `gt:rig` instead of dedicated types. Beads stays generic.\n\n### Option B: Type extension mechanism\nBeads supports custom type registration via config. Gas Town registers its types at init time.\n\n### Option C: Separate identity store\nGas Town maintains agent/role/rig identity outside beads entirely. Beads only tracks work items.\n\n## Types to evaluate\n\n| Type | Keep in beads? | Rationale |\n|------|----------------|-----------|\n| `gate` | Yes | Generic workflow concept (async waits) |\n| `molecule` | Yes | Generic workflow templates |\n| `agent` | **No** | Gas Town identity |\n| `role` | **No** | Gas Town identity |\n| `rig` | **No** | Gas Town identity |\n| `convoy` | **No** | Gas Town cross-rig tracking |\n| `slot` | Maybe | Could be generic \"mutex\" concept |\n\n## Files affected\n\n- `internal/types/types.go` - Type definitions\n- `cmd/bd/create.go` - Type validation\n- `cmd/bd/update.go` - Type validation  \n- `internal/storage/sqlite/migrations/030_agent_fields.go` - Schema fields\n- Possibly others with type switch statements","status":"closed","priority":1,"issue_type":"epic","assignee":"beads/crew/dave","created_at":"2026-01-07T04:26:52Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T06:19:33Z","closed_at":"2026-01-07T06:19:33Z","labels":["architecture","separation-of-concerns"],"work_type":"mutex"}
{"id":"bd-i8zab","title":"Batch wisp deletion in deleteSessionCostWisps","description":"## Problem\n\n`deleteSessionCostWisps()` (internal/cmd/costs.go:1188) burns wisps one at a time in a loop. This creates O(n) subprocess calls for deletion.\n\n## Location\n\ninternal/cmd/costs.go:1143-1191\n\n## Solution\n\nCheck if `bd mol burn` supports multiple IDs. If so, collect IDs and burn in one call.\nIf not, consider adding batch support to bd.","status":"closed","priority":3,"issue_type":"task","assignee":"beads/polecats/quartz","created_at":"2026-01-09T06:55:16Z","created_by":"mayor","updated_at":"2026-01-09T08:25:54Z","closed_at":"2026-01-09T08:25:54Z","work_type":"mutex"}
{"id":"bd-ihu31","title":"Add --ready flag to bd list to show only available work","description":"## Problem\n`bd list` by default shows all non-closed issues including hooked ones. Hooked work is actively being worked on and shouldn't appear in the pool of available work.\n\n## Solution\nAdd a `--ready` flag to `bd list` that filters to show only work that can actually be picked up:\n- Status is `open` (not hooked, not in_progress, not blocked, not deferred)\n- Could potentially also exclude assigned issues (optional consideration)\n\n## Current Workaround\n`bd list --status open` works but isn't as intuitive as `--ready`\n\n## Implementation\n- Add `--ready` boolean flag to list command\n- When set, filter to status=open only\n- Consider if it should also filter out assigned issues (probably not by default)","status":"closed","priority":1,"issue_type":"feature","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T09:59:57Z","created_by":"beads/crew/dave","updated_at":"2026-01-12T10:05:30Z","closed_at":"2026-01-12T10:05:30Z","work_type":"mutex"}
{"id":"bd-ik1b","title":"Add --validate flag to bd create","description":"Opt-in strict mode that fails creation if required sections are missing. Uses ValidateTemplate() under the hood.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-01T19:19:09Z","created_by":"beads/crew/grip","updated_at":"2026-01-04T23:22:09Z","closed_at":"2026-01-01T22:20:07Z","dependencies":[{"issue_id":"bd-ik1b","depends_on_id":"bd-615z","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-ik1b","depends_on_id":"bd-ou35","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-ilfo1","title":"Closed gate cleanup/pruning mechanism","description":"Closed gates accumulate over time and never get cleaned up. The SearchIssues query for closed gates will grow unbounded. Options: (1) Add --since filter, (2) Automatic pruning of old closed gates, (3) Tombstone old gates after N days.","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-09T05:32:20Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T05:32:20Z","dependencies":[{"issue_id":"bd-ilfo1","depends_on_id":"bd-ka761","type":"discovered-from","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-imi7w","title":"Schema Readiness: Pre-Federation Schema Changes","description":"Track schema changes needed in Beads BEFORE federation features are implemented.\n\n## Context\n\nBeads is a multi-orchestrator work tracker. Schema changes made NOW are cheap; changes made AFTER production adoption are expensive.\n\n## Design Principles\n\n1. **Beads is multi-orchestrator** - Nothing specific to any single orchestrator\n2. **Progressive enhancement** - New fields are optional, backwards compatible\n3. **Owner vs Executor** - Human identity (owner) distinct from agent identity (executor)\n4. **Git as ledger** - Work history IS the source of truth\n\n## Success Criteria\n\n- [ ] All Priority 1 fields implemented\n- [ ] URI scheme is protocol-agnostic\n- [ ] Migration path documented\n- [ ] No breaking changes to existing beads","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-11T00:33:12Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T04:36:39Z","closed_at":"2026-01-11T04:36:39Z","work_type":"mutex"}
{"id":"bd-imxi","title":"Add bd setup gemini for Gemini CLI integration","description":"## Summary\n\nAdd `bd setup gemini` command to install beads hooks for Gemini CLI, similar to existing `bd setup claude`.\n\nRef: GitHub #845\n\n## Research Findings\n\n### Gemini CLI Has Compatible Hooks\n\nGemini CLI (https://geminicli.com/docs/hooks/) supports nearly identical hook events:\n\n| Gemini CLI Event | Claude Code Equivalent | Purpose |\n|------------------|----------------------|---------|\n| **SessionStart** | SessionStart | Initialize resources, load context |\n| **SessionEnd** | - | Clean up, save state |\n| **PreCompress** | PreCompact | Before context compression |\n| **BeforeAgent** | - | Add context before planning |\n\nConfiguration format is almost identical to Claude:\n```json\n{\n  \"hooks\": {\n    \"SessionStart\": [{\n      \"matcher\": \"\",\n      \"hooks\": [{\n        \"type\": \"command\",\n        \"command\": \"bd prime\"\n      }]\n    }]\n  }\n}\n```\n\n### GEMINI.md Support\n\n- Hierarchical loading: ~/.gemini/GEMINI.md → project root → subdirectories\n- Concatenated into system prompt automatically\n- Gemini CLI also reads AGENTS.md (already supported via `bd setup factory`)\n\n### Antigravity\n\nGoogle's IDE-based agentic platform (released Nov 2025):\n- Uses Gemini 3 with 1M token context\n- Has \"knowledge base\" for saved context\n- Less documented - may share Gemini CLI infrastructure\n- Needs separate research for dedicated support\n\n## Implementation Plan\n\n### Phase 1: Core Gemini CLI Support\n\n1. **Create `cmd/bd/setup/gemini.go`**\n   - Mirror structure from `claude.go`\n   - Target: `~/.gemini/settings.json`\n   - Install SessionStart and PreCompress hooks\n   - Support --project flag for local settings\n   - Support --stealth flag\n\n2. **Add doctor check in `cmd/bd/doctor/gemini.go`**\n   - Check if hooks installed\n   - Verify settings.json structure\n\n3. **Update `cmd/bd/setup.go`**\n   - Add gemini subcommand\n   - Wire up to setup/gemini.go\n\n### Phase 2: Optional Enhancements\n\n4. **GEMINI.md generation** (optional)\n   - Could generate project-level GEMINI.md\n   - Or document that AGENTS.md already works\n\n5. **Antigravity support** (separate issue)\n   - Needs research on Antigravity's configuration system\n   - May be able to share Gemini CLI hooks\n   - May need IDE-specific integration\n\n## Open Questions\n\n1. Where does Gemini CLI store settings? Need to verify `~/.gemini/settings.json` path\n2. Does Gemini CLI use same JSON structure as Claude for hooks?\n3. Can one implementation cover both Gemini CLI and Antigravity?\n4. Should we generate GEMINI.md or rely on AGENTS.md?\n\n## Acceptance Criteria\n\n- [ ] `bd setup gemini` installs hooks to Gemini CLI settings\n- [ ] `bd setup gemini --check` verifies installation\n- [ ] `bd doctor` reports Gemini CLI integration status\n- [ ] Documentation updated in docs/SETUP.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T07:47:07Z","created_by":"beads/crew/wolf","updated_at":"2026-01-02T08:01:16Z","closed_at":"2026-01-02T08:01:16Z","comments":[{"id":7,"issue_id":"bd-imxi","author":"beads/crew/wolf","text":"Deprioritizing Antigravity - focusing on Gemini CLI only. Antigravity may share the same hook infrastructure anyway, so Gemini CLI support might just work. Will revisit if there's demand.","created_at":"2026-01-02T07:55:13Z"}],"work_type":"mutex"}
{"id":"bd-ipjuy","title":"Add schema migration to drop dirty_issues and export_hashes tables","description":"The implementation removed the dirty_issues and export_hashes table definitions from schema.go, but didn't add a migration to drop these tables from existing databases.\n\nExisting Dolt databases will still have these tables (wasting space, causing confusion).\n\n**Needed:**\nAdd a migration that runs:\n```sql\nDROP TABLE IF EXISTS dirty_issues;\nDROP TABLE IF EXISTS export_hashes;\n```\n\nThis should be added to the schema migration system (if one exists) or handled on startup.\n\nFiles: internal/storage/dolt/schema.go or migrations/","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:08:36Z","created_by":"beads/crew/darcy","updated_at":"2026-01-21T03:08:36Z","work_type":"mutex"}
{"id":"bd-isi6q","title":"Fix daemon socket path exceeds macOS 104-char limit (GH#1001)","description":"dispatched_by: mayor\n\nDaemon socket path can exceed macOS 104-char limit in deep directories. See https://github.com/steveyegge/beads/issues/1001","status":"closed","priority":2,"issue_type":"task","assignee":"beads/polecats/quartz","created_at":"2026-01-10T20:18:32Z","created_by":"mayor","updated_at":"2026-01-11T00:43:58Z","closed_at":"2026-01-11T00:43:58Z","labels":["bug"],"work_type":"mutex"}
{"id":"bd-ixip","title":"autoflush.go writes JSONL without checking ShouldExportJSONL()","description":"autoflush.go doesn't check ShouldExportJSONL() before writing JSONL files. This causes JSONL writes in dolt-native mode when they shouldn't happen. The autoflush code should respect the sync mode configuration. See DOLT-STORAGE-DESIGN-V3.md for context on federation modes. This is blocking correct dolt-native operation.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/emma","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:44:40Z","created_by":"mayor","updated_at":"2026-01-27T04:00:25Z","closed_at":"2026-01-27T04:00:25Z","close_reason":"Fixed in commit 6320e2a1. Added ShouldExportJSONL() check to flushToJSONLWithState()."}
{"id":"bd-j00iu","title":"Optimize incremental export: fetch only dirty issue dependencies","description":"Currently performIncrementalExport calls GetAllDependencyRecords() which fetches ALL dependencies in the database. For truly large repos (10k+ issues), this defeats some of the incremental export benefits.\n\nCurrent behavior:\n  allDeps, err := store.GetAllDependencyRecords(ctx)\n\nProposed fix:\nAdd a new method GetDependencyRecordsForIssues(ctx, issueIDs []string) that only fetches dependencies where issue_id IN (...).\n\nLocation: cmd/bd/sync_export.go:performIncrementalExport()\n\nImpact: Medium - improves incremental export performance for large repos with many dependencies","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:07:12Z","created_by":"beads/crew/lydia","updated_at":"2026-01-21T03:07:12Z","work_type":"mutex"}
{"id":"bd-j1af","title":"Test belt-and-suspenders mode","description":"Per DOLT-STORAGE-DESIGN-V3.md Mode 4: Belt and suspenders.\nVerify:\n- Both Dolt remotes AND JSONL export work together\n- Maximum redundancy achieved\n- Best for migration periods and paranoid setups","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:45:15Z","created_by":"mayor","updated_at":"2026-01-27T02:45:15Z","labels":["testing"]}
{"id":"bd-j8msa","title":"EnforceChannelRetention and PruneAllChannels have significant code duplication","description":"In beads_channel.go:386-529, EnforceChannelRetention and PruneAllChannels contain nearly identical retention logic.\n\n**Duplicated code blocks:**\n\n1. **Time-based retention** (lines 424-435 and 496-507):\n   - Same cutoff calculation: `time.Now().Add(-time.Duration(fields.RetentionHours) * time.Hour)`\n   - Same timestamp parsing and comparison\n\n2. **Count-based retention** (lines 438-444 and 509-518):\n   - Same deletion calculation: `len(messages) - fields.RetentionCount`\n   - Same iteration to mark messages for deletion\n\n3. **Deletion loop** (lines 447-449 and 521-525):\n   - Both iterate toDeleteIDs map\n   - Both call `b.run(\"close\", id, ...)`\n\n**Recommendation:** Extract a shared helper:\n```go\nfunc (b *Beads) pruneChannelMessages(name string, fields *ChannelFields, messages []messageInfo) int\n```\nThis reduces ~50 lines of duplication and ensures retention logic stays consistent.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T03:51:43Z","created_by":"gastown/crew/george","updated_at":"2026-01-22T03:51:43Z","work_type":"mutex"}
{"id":"bd-j9ac9","title":"Update GIT_INTEGRATION.md for Jujutsu (GH#906)","description":"dispatched_by: beads/crew/dave\n\nUpdate the Jujutsu integration section to use 'bd merge' instead of standalone beads-merge binary. Fix provided in issue.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T04:42:19Z","created_by":"beads/crew/dave","updated_at":"2026-01-13T00:34:51Z","closed_at":"2026-01-13T00:34:51Z","work_type":"mutex"}
{"id":"bd-jjnk","title":"Code health review: Beads codebase assessment after v3 churn","description":"Beads has gone through significant churn recently with Dolt integration, federation modes, and the v3 architecture evolution. Time for a comprehensive code health review.\n\n**Review Areas:**\n1. Dead code - features removed but code still present\n2. Inconsistent patterns - sync mode checks in some places but not others (see bd-ixip, bd-a9ka)\n3. Test coverage gaps - especially around new code paths\n4. Error handling consistency\n5. Configuration sprawl - how many ways to set backend/sync mode?\n6. Documentation drift - do comments match current behavior?\n\n**Specific Concerns:**\n- autoflush.go and create.go have sync mode bugs - likely other similar issues\n- Build tag architecture not yet implemented\n- Migration code paths untested\n\n**Deliverables:**\n- Code smell inventory with severity ratings\n- Refactoring recommendations prioritized by impact\n- Technical debt backlog (new beads for issues found)\n- Architectural diagram reflecting current state vs intended v3 state","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:36:50Z","created_by":"mayor","updated_at":"2026-01-27T03:36:50Z"}
{"id":"bd-jm7ku","title":"Add export state migration from .beads/ to ~/.beads/","description":"Export state files were moved from:\n  `.beads/export-state/\u003cworktree-hash\u003e.json` (inside repo, git-tracked)\nto:\n  `~/.beads/export-state/\u003crepo-hash\u003e/\u003cworktree-hash\u003e.json` (user home, not tracked)\n\nOld export state files are not migrated. This means:\n1. First export after upgrade will do a full export (no harm, just slower)\n2. Old state files in .beads/ will be orphaned\n\n**Options:**\n1. Add migration code to check for old state files and copy them\n2. Add a one-time cleanup to remove old .beads/export-state/ directory\n3. Document in release notes that first export after upgrade is full\n\nProbably option 3 is sufficient given the low impact.\n\nFiles: cmd/bd/hook.go","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:08:53Z","created_by":"beads/crew/darcy","updated_at":"2026-01-21T03:08:53Z","work_type":"mutex"}
{"id":"bd-jnyci","title":"Review and merge PR #1055: bump actions/upload-pages-artifact from 3 to 4","description":"dispatched_by: beads/crew/emma\n\nPR: https://github.com/steveyegge/beads/pull/1055\n\n**Change:** Dependabot version bump for GH Actions upload-pages-artifact from v3 to v4.\n\n**Note:** v4 has a potentially breaking change: dotfiles will not be included in the artifact. This shouldn't affect us unless we rely on dotfiles in pages artifacts.\n\n**Review tasks:**\n1. Check if our pages workflow uses dotfiles (unlikely)\n2. If no concerns, merge with: gh pr merge 1055 --repo steveyegge/beads --squash\n3. Close this bead after merge","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T07:03:53Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T07:30:54Z","closed_at":"2026-01-13T07:30:54Z","work_type":"mutex"}
{"id":"bd-jple","title":"Fix cross-worktree sync losing status changes (GH#865)","description":"Left snapshot protection during sync ignores timestamps, causing newer remote changes to be skipped. Need to make protection timestamp-aware: only protect if local is newer than incoming. See issue for detailed analysis and fix options.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/emma","created_at":"2026-01-03T21:12:54Z","created_by":"beads/crew/grip","updated_at":"2026-01-03T21:27:48Z","closed_at":"2026-01-03T21:27:48Z","work_type":"mutex"}
{"id":"bd-jrjwx","title":"Bug: resolve_conflicts.go has closed winning over tombstone (should be reversed)","description":"In `cmd/bd/resolve_conflicts.go` lines 418-425:\n\n```go\n// Status: closed wins\nif left.Status == \"closed\" || right.Status == \"closed\" {\n    result.Status = \"closed\"\n} else if left.Status == \"tombstone\" || right.Status == \"tombstone\" {\n    result.Status = \"tombstone\"\n}\n```\n\nThis is backwards. Tombstone should win over closed because:\n1. Tombstone represents an explicit deletion\n2. The main merge library (`internal/merge/merge.go` lines 657-660) correctly has tombstone winning first\n3. This bug causes corrupted state: status=closed + deleted_at set\n\n**Fix:** Swap the order so tombstone is checked first.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/collins","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T09:26:18Z","created_by":"mayor","updated_at":"2026-01-27T04:13:54Z","closed_at":"2026-01-27T04:13:54Z","close_reason":"fixed","work_type":"mutex"}
{"id":"bd-jsoze","title":"Review PR #1255: Add kanban-ui and orchestration to community tools","description":"Review and approve PR #1255: Add beads-kanban-ui and beads-orchestration to Community Tools\n\n**PR URL:** https://github.com/steveyegge/beads/pull/1255\n**Author:** AvivK5498\n**Changes:** 7 additions to docs/COMMUNITY_TOOLS.md\n\n**Easy-win criteria met:**\n- Documentation fix (adding community tools)\n- Simple additions with proper formatting\n\n**Review steps:**\n1. Verify the linked repos exist:\n   - https://github.com/AvivK5498/Beads-Kanban-UI\n   - https://github.com/AvivK5498/Claude-Code-Beads-Orchestration\n2. Confirm descriptions are accurate\n3. Approve and merge if all checks pass\n\n```bash\ngh pr review 1255 --repo steveyegge/beads --approve\ngh pr merge 1255 --repo steveyegge/beads --squash\n```","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T21:03:25Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T21:05:31Z","closed_at":"2026-01-22T21:05:31Z","work_type":"mutex"}
{"id":"bd-jvwjr","title":"Bug P0","status":"closed","priority":0,"issue_type":"bug","assignee":"alice","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:14Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:43Z","closed_at":"2026-01-27T03:48:43Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-jy5f6","title":"Fix: Global install leaves invalid hooks (GH#955)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #955. Global installation leaves invalid hooks in settings.json causing Claude Code to fail.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/grip","created_at":"2026-01-10T06:20:07Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T07:04:15Z","closed_at":"2026-01-10T07:04:15Z","work_type":"mutex"}
{"id":"bd-jybi","title":"Migration: add gt:* labels to existing Gas Town beads","description":"One-time migration to add gt:* labels to existing Gas Town beads.\n\n## Work\n- Create migration command or script\n- Find all beads with type=agent, add label gt:agent\n- Find all beads with type=role, add label gt:role\n- Find all beads with type=rig, add label gt:rig\n- Find all beads with type=convoy, add label gt:convoy\n- Find all beads with type=slot, add label gt:slot\n\n## Notes\nThis runs in Gas Town, not in beads core. May be a gt command rather than bd command.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-07T04:40:54Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T04:40:54Z","dependencies":[{"issue_id":"bd-jybi","depends_on_id":"bd-i54l","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-k4cyb","title":"macOS binaries not codesigned - causes Gatekeeper kills","description":"## Problem\n\nThe bd and gt binaries built by goreleaser are not codesigned or notarized for macOS. This causes:\n\n1. `spctl --assess` rejects the binary\n2. Gatekeeper can kill processes mid-operation (exit code 137)\n3. Database corruption when Dolt operations are interrupted\n\n## Evidence\n\n```\n$ spctl --assess --type execute ~/.local/bin/bd\n/Users/stevey/.local/bin/bd: rejected\n```\n\nDuring Dolt migration testing, bd processes were killed mid-operation, leaving the Dolt database in a corrupted 'read only' state.\n\n## Solution\n\nAdd macOS codesigning and notarization to .goreleaser.yml:\n\n1. Create Apple Developer ID certificate\n2. Add sign-macos.sh script (similar to sign-windows.sh)\n3. Configure notarization via `xcrun notarytool`\n4. Add post-build hooks for darwin builds\n\n## References\n\n- Windows signing already configured in .goreleaser.yml\n- scripts/sign-windows.sh exists as template","status":"closed","priority":1,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T07:47:28Z","created_by":"gastown/crew/joe","updated_at":"2026-01-22T23:45:19Z","closed_at":"2026-01-22T23:45:19Z","work_type":"mutex"}
{"id":"bd-k4u7","title":"Port constant inconsistency between server.go and configfile.go","description":"**Issue:**\nserver.go:23 defines DefaultSQLPort = 3306\nconfigfile.go:225 defines DefaultDoltServerPort = 3307\n\nThe comment in configfile.go says 'Use 3307 to avoid conflict with MySQL on 3306' which is the correct approach.\n\n**Impact:** Documentation confusion only - actual defaults work correctly.\n\n**Fix:** Update server.go to use 3307 as default, or add a comment explaining when 3306 is appropriate.\n\n**Found during:** bd-ats9.4 Dolt integration review","status":"open","priority":3,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:50:07Z","created_by":"beads/crew/lizzy","updated_at":"2026-01-27T03:50:07Z","labels":["code-quality"]}
{"id":"bd-k51o","title":"Migration guide: JSONL federation to Dolt native","description":"Per DOLT-STORAGE-DESIGN-V3.md Part 6, document migration to Dolt native:\n  bd config set sync.mode dolt-native\n  dolt remote add origin https://doltremote.example.com/db\n\nInclude:\n- When to switch to Dolt native federation\n- JSONL no longer updated after switch\n- Belt-and-suspenders option for gradual migration","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:45:27Z","created_by":"mayor","updated_at":"2026-01-27T02:45:27Z","labels":["docs"]}
{"id":"bd-k7vfx","title":"Bootstrap: Replace fmt.Printf with structured logging","description":"The bootstrap code in store.go uses fmt.Printf directly for output:\n\n```go\nfmt.Printf(\"Bootstrapped Dolt from JSONL: %d issues\", result.IssuesImported)\n```\n\nLibrary code shouldn't print directly. Options:\n- Use a logger interface\n- Return info for caller to handle\n- Add a BootstrapCallback to Config\n\nLocation: internal/storage/dolt/store.go:165-169\n\n(Moved from hq-6ezso)","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-21T01:37:26Z","created_by":"mayor","updated_at":"2026-01-21T01:37:26Z","labels":["dolt-backend"],"work_type":"mutex"}
{"id":"bd-k9wf9","title":"Create /pr-list and /ghi-list skills for formatted tabular output","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T06:19:01Z","created_by":"gastown/crew/max","updated_at":"2026-01-12T06:19:01Z","work_type":"mutex"}
{"id":"bd-ka761","title":"Gate-based async molecule resume","description":"## Summary\n\nRefactor molecule execution to use gates for async coordination, eliminating spin-wait\nanti-patterns. When a polecat hits a gate step, it exits cleanly. The Deacon patrol\ndiscovers molecules with resolved gates and dispatches new polecats to continue.\n\n## Motivation\n\nThe beads-release formula has a `wait-ci` step that tells agents to poll GitHub Actions\nfor 5-10 minutes. This is wasteful and unreliable. We have gate infrastructure in beads\nbut no integration with molecule execution flow.\n\nDave ran a version bump to 0.46.0 without the release molecule - exactly because agents\ndon't know all the steps when there's no enforced workflow with proper async handling.\n\n## Design\n\n### Gate Steps in Formula Schema\n\n```toml\n[[steps]]\nid = \"wait-ci\"\ngate = \"gh:run\"\ngate_hint = \"release.yml\"\ntimeout = \"30m\"\n```\n\n### Flow\n\n1. `bd mol cook` creates gate beads for gate steps\n2. Polecat reaches gate step → checks if gate closed\n3. If open → `gt done --phase-complete --gate \u003cid\u003e` and exit\n4. Deacon patrol runs `bd gate check` → closes resolved gates\n5. Deacon discovers molecules with closed gates → slings to polecats\n6. New polecat continues from gate step\n\n### Key Principle\n\nDiscovery-based resume, not waiter-based. The molecule state IS the waiter.\nPatrol discovers reality each cycle. Nondeterministic idempotence.\n\n## Components\n\n- **Beads**: Formula parser, mol cook, mol ready --gated\n- **Gas Town**: Deacon patrol step for molecule dispatch\n- **Release formula**: Refactor to use gate step\n\n## References\n\n- Gate infrastructure: cmd/bd/gate.go\n- Current release formula: formulas/beads-release.formula.toml\n- Deacon patrol: mol-deacon-patrol.formula.toml","status":"closed","priority":1,"issue_type":"epic","assignee":"beads/crew/dave","created_at":"2026-01-09T04:53:10Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T07:04:09Z","closed_at":"2026-01-09T07:04:09Z","work_type":"mutex"}
{"id":"bd-kbfn","title":"Phase 2: Timer Gates (Witness integration)","description":"Implement timer gate evaluation in Witness patrol.\n\n## Behavior\n- Witness patrol includes `bd gate check --type=timer`\n- Gate metadata: timeout, created_at stored on gate issue\n- Expired gates escalate to Deacon/Overseer (not auto-close)\n\n## Implementation\n1. Add timer gate check to mol-witness-patrol.formula.toml\n2. `bd gate check --type=timer` evaluates: now \u003e created_at + timeout\n3. Expired gates: escalate via `gt escalate --type gate_timeout`\n4. Non-expired gates: skip (will check next patrol)\n\n## Acceptance Criteria\n- [ ] `bd gate check --type=timer` works\n- [ ] Witness patrol runs timer check each cycle\n- [ ] Expired gates trigger escalation\n- [ ] Gate timeout configurable per-gate","status":"closed","priority":2,"issue_type":"task","assignee":"beads/polecats/quartz","created_at":"2026-01-02T09:55:40Z","created_by":"mayor","updated_at":"2026-01-02T20:48:35Z","closed_at":"2026-01-02T20:48:35Z","dependencies":[{"issue_id":"bd-kbfn","depends_on_id":"bd-mcva","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-kgjzm","title":"Daemon should cleanup /tmp/beads-* directories on shutdown","description":"Code review follow-up from GH#1001 fix.\n\nWhen using short socket paths (/tmp/beads-{hash}/bd.sock), the daemon creates directories in /tmp but doesn't clean them up on shutdown. These empty directories accumulate over time.\n\nThe CleanupSocketDir() function exists but isn't called from Server.Stop().\n\nShould:\n1. Call CleanupSocketDir() from server shutdown path\n2. Add integration test verifying cleanup happens\n\nRelated: GH#1001, commit 3ecffa11, bd-1vc13","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T21:36:41Z","created_by":"beads/crew/wolf","updated_at":"2026-01-10T21:36:41Z","work_type":"mutex"}
{"id":"bd-kpa7c","title":"Consolidate DaemonStatusReport with DaemonHealthReport types","description":"daemon_status.go defines DaemonStatusReport and DaemonStatusAllResponse which are very similar to DaemonHealthReport and DaemonHealthResponse in daemons.go.\n\nConsider:\n1. Merging these types into a single shared type\n2. Making daemon status --all and daemon health use the same type\n3. Deciding if 'bd daemon health' should be deprecated in favor of 'bd daemon status --all'\n\nBoth have: Workspace, PID, Version, Status, Issue, VersionMismatch fields.\nDaemonStatusReport adds: Started, UptimeSeconds, AutoCommit, AutoPush, AutoPull, LocalMode, SyncInterval, DaemonMode, LogPath, IsCurrent","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-11T00:30:46Z","created_by":"beads/crew/emma","updated_at":"2026-01-11T00:30:46Z","work_type":"mutex"}
{"id":"bd-kqhgs","title":"Optimize memory usage for incremental export on very large repos","description":"readJSONLToMap loads the entire JSONL file into memory before merging changes. Memory usage estimates:\n\n- 10k issues @ 1KB each = ~10MB (acceptable)\n- 100k issues @ 1KB each = ~100MB (concerning)\n- 100k issues @ 10KB each = ~1GB (problematic)\n\nFor very large repos, consider a streaming approach:\n1. Read existing JSONL line by line\n2. Check if each ID is in dirty set\n3. If dirty: write updated version; if not: copy original line\n4. Append any new issues at the end (then re-sort if needed)\n\nThis would reduce memory from O(total_issues) to O(dirty_issues).\n\nLocation: cmd/bd/sync_export.go:readJSONLToMap(), performIncrementalExport()\n\nImpact: Low for now - most repos are well under 100k issues. Monitor for user reports.","status":"open","priority":4,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:07:33Z","created_by":"beads/crew/lydia","updated_at":"2026-01-21T03:07:33Z","work_type":"mutex"}
{"id":"bd-l8xyv","title":"Review and merge PR #970: fix worktree path detection","description":"dispatched_by: beads/crew/emma\n\n## Task\nReview and merge PR #970 from shendsaliaga.\n\n**PR**: https://github.com/steveyegge/beads/pull/970\n\n## What it does\n- Fixes bd migrate sync failing in git worktree environments\n- Uses GetGitCommonDir() instead of GetGitDir() for worktree creation path\n- Uses LastIndex instead of Index to find /worktrees/ in user paths\n\n## Easy-win criteria met\n- Bug fix with clear reproduction (bare repo + worktree)\n- Small diff (26 additions, 8 deletions)\n- Well-documented fix\n- Low risk edge case fix\n\n## Instructions\n1. Clone/fetch the PR: gh pr checkout 970 --repo steveyegge/beads\n2. Run tests: go test ./cmd/bd/... ./internal/git/... ./internal/syncbranch/...\n3. Review the diff: gh pr diff 970 --repo steveyegge/beads\n4. If tests pass and code looks good, approve and merge\n5. Close this bead when done","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","created_at":"2026-01-09T19:00:00Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T19:02:17Z","closed_at":"2026-01-09T19:02:17Z","work_type":"mutex"}
{"id":"bd-lbdy7","title":"Bootstrap: Import routes.jsonl and other JSONL files","description":"dispatched_by: beads/crew/emma\n\nCurrently bootstrap only imports `issues.jsonl`. Other JSONL files are ignored:\n- routes.jsonl (routing configuration)\n- interactions.jsonl (agent audit log)\n\nThe task spec mentioned multi-table bootstrap ordering. Consider importing:\n1. config (from metadata.json)\n2. routes\n3. issues\n4. dependencies/labels/comments\n\nLocation: internal/storage/dolt/bootstrap.go\n\n(Moved from hq-ffmiw)","status":"closed","priority":2,"issue_type":"feature","assignee":"beads/crew/wickham","created_at":"2026-01-21T01:37:30Z","created_by":"mayor","updated_at":"2026-01-21T04:32:16Z","closed_at":"2026-01-21T04:32:16Z","labels":["dolt-backend"],"work_type":"mutex"}
{"id":"bd-lda24","title":"bd edit: support inline --description flag like bd update does","description":"## Desire Path\n\n**Tried:**\n```bash\nbd edit bd-pr-sheriff --description \"## New description content here...\"\n```\n\n**Got:**\n```\nError: accepts 1 arg(s), received 2\n```\n\n**Expected:** Update the description inline without opening an editor.\n\n**Workaround:** Use `bd update` instead:\n```bash\nbd update bd-pr-sheriff --description \"...\"\n```\n\n## Analysis\n\nThis is a desire path, not confusion. The mental model is:\n- `bd edit` = modify a bead\n- `--description \"text\"` = provide the new content inline\n\nThe actual design is:\n- `bd edit` = open $EDITOR for interactive editing\n- `bd update` = programmatic updates with flags\n\nBut agents (and scripts) naturally reach for `edit` when they want to change something. Having `bd edit \u003cid\u003e --description \"text\"` work the same as `bd update` would match expectations.\n\n## Suggested Fix\n\nEither:\n1. Make `bd edit --description \"text\"` accept inline content (skip editor when value provided)\n2. Or alias `bd edit \u003cid\u003e --description \"text\"` to `bd update`","status":"open","priority":3,"issue_type":"feature","owner":"steve.yegge@gmail.com","created_at":"2026-01-18T18:53:21Z","created_by":"beads/crew/emma","updated_at":"2026-01-18T18:53:21Z","labels":["desire-path","ux"],"work_type":"mutex"}
{"id":"bd-lejq","title":"Release: minor version bump","description":"Bump minor version for beads release. Update version in relevant files, update CHANGELOG if present, ensure tests pass, tag release.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/polecats/obsidian","created_at":"2026-01-02T08:56:08Z","created_by":"beads/crew/dave","updated_at":"2026-01-02T09:08:36Z","closed_at":"2026-01-02T09:08:36Z","work_type":"mutex"}
{"id":"bd-lhalq","title":"bd mol ready --gated: find molecules awaiting gate resume","description":"New command/flag to discover molecules ready to resume after gate closure:\n\n```bash\nbd mol ready --gated\n```\n\nLogic:\n1. Find molecules with status=in_progress\n2. For each, find the current step (first incomplete step)\n3. If current step has a gate dependency, check if gate bead is closed\n4. If closed AND no polecat has this molecule hooked → ready to resume\n\nOutput: List of molecule IDs ready for dispatch.\n\nThis enables discovery-based resume without explicit waiter tracking.\n\nParent: bd-ka761","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T04:53:39Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T05:20:12Z","closed_at":"2026-01-09T05:20:12Z","dependencies":[{"issue_id":"bd-lhalq","depends_on_id":"bd-ka761","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-lhalq","depends_on_id":"bd-w7wex","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-lmbzt","title":"Refinery Patrol","description":"Merge queue processor patrol loop with verification gates.","status":"closed","priority":2,"issue_type":"molecule","created_at":"2026-01-08T05:42:20Z","created_by":"gastown/crew/george","updated_at":"2026-01-10T05:15:43Z","closed_at":"2026-01-10T05:15:43Z","work_type":"mutex"}
{"id":"bd-lmqhe","title":"restoreBeadsDirFromBranch fails when beads directory is redirected","description":"When a repo has a .beads/redirect file pointing to a shared beads directory (e.g., crew repos redirecting to ../../mayor/rig/.beads), the restoreBeadsDirFromBranch function in sync.go fails because it runs git checkout from the local repo but with a path outside that repo. Non-fatal (sync completes), but should skip restore when redirected since the beads dir is in a different repo anyway. Fix: check GetRedirectInfo().IsRedirected and return early.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T22:16:11Z","created_by":"gastown/crew/george","updated_at":"2026-01-11T06:12:20Z","closed_at":"2026-01-11T06:12:20Z","work_type":"mutex"}
{"id":"bd-lpg33","title":"Claude Code PreToolUse guard hooks for Gas Town","description":"## Summary\n\nImplement Claude Code PreToolUse hooks to guard against forbidden operations in Gas Town agent contexts.\n\n## Current State\n\n### Implemented (local only, not git-tracked)\n- `gt tap guard pr-workflow` command blocks:\n  - `gh pr create`\n  - `git checkout -b` (feature branches)\n  - `git switch -c` (feature branches)\n- Only blocks when in Gas Town agent context (checks GT_* env vars or /crew/, /polecats/ in path)\n- Shell script `~/gt/.claude/hooks/block-clone-into-town.sh` blocks git clone into ~/gt\n\n### Configured (local settings.json, gitignored)\n- gastown/crew, gastown/polecats\n- beads/crew, beads/polecats\n\n### Not yet configured\n- witness, refinery, deacon, mayor roles\n- sky/*, wyvern/* rigs\n- Clone guard not wired into settings\n\n## Privacy\nAll hooks are private to this Gas Town installation:\n- Code not committed to gastown repo\n- Settings files gitignored\n- End users unaffected\n\n## Remaining Work\n1. Decide: commit tap code to gastown or keep private?\n2. Wire up clone guard in PreToolUse settings\n3. Add guards for other roles (witness, refinery, etc.)\n4. Consider additional guards (force push, rm -rf, etc.)\n5. Document in HOOKS.md (already exists at ~/gt/docs/HOOKS.md)\n\n## References\n- ~/gt/docs/HOOKS.md - full hook documentation\n- gastown/crew/*/internal/cmd/tap_guard.go - implementation\n- ~/gt/.claude/hooks/block-clone-into-town.sh - clone guard script","status":"closed","priority":2,"issue_type":"epic","owner":"steve.yegge@gmail.com","created_at":"2026-01-20T22:28:14Z","created_by":"beads/crew/jane","updated_at":"2026-01-21T01:28:18Z","closed_at":"2026-01-21T01:28:18Z","work_type":"mutex"}
{"id":"bd-lwwyd","title":"hook.go: Use 0600 permissions for export state file","description":"saveExportState (hook.go:126) uses 0644 permissions for the export state file:\n\nreturn os.WriteFile(path, data, 0644)\n\nOther security-conscious code in the repo uses 0600 (e.g., gitignore.go). The export state contains worktree paths. Should standardize on 0600 for consistency with the security posture elsewhere.","status":"closed","priority":4,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:10:45Z","created_by":"beads/crew/elinor","updated_at":"2026-01-21T02:16:45Z","closed_at":"2026-01-21T02:16:45Z","labels":["hooks","security"],"work_type":"mutex"}
{"id":"bd-m678o","title":"Use actual commit timestamp for DeletedAt in GetChangesSinceExport","description":"Currently, GetChangesSinceExport() sets DeletedAt to `time.Now().UTC()` for removed issues (versioned.go:302).\n\nThe comment notes: 'we could query the commit timestamp but now is simpler'\n\nThis could be misleading - the timestamp doesn't reflect when the issue was actually deleted, just when the diff was computed.\n\n**Suggested improvement:**\nQuery the commit metadata to get the actual commit timestamp:\n```sql\nSELECT committer_date FROM dolt_log('HEAD', '-n', '1')\n```\n\nOr accept this as a known limitation and document it in the IssueChange struct.\n\nFiles: internal/storage/dolt/versioned.go","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:08:44Z","created_by":"beads/crew/darcy","updated_at":"2026-01-21T03:08:44Z","work_type":"mutex"}
{"id":"bd-m8ew","title":"Fix release molecule gate discovery and validation","description":"## Problem\n\nThe beads-release molecule has critical issues that cause it to report success when everything fails:\n\n### 1. Gate Discovery Mismatch (Critical)\n\nThe formula declares:\n```toml\n[steps.gate]\ntype = \"gh:run\"\nid = \"release.yml\"  # workflow NAME\n```\n\nThis creates a gate with `AwaitID=\"release.yml\"`. But:\n- `bd gate discover` only finds gates where `AwaitID == \"\"` (empty)\n- `bd gate check` passes `release.yml` to `gh run view release.yml` which fails (expects numeric run ID)\n\n**Result**: Gate can never be automatically resolved. Agent either bypasses it manually or gets stuck.\n\n### 2. No Validation on Step Completion\n\nFormula steps are prose instructions. Nothing validates:\n- Commands actually ran successfully (exit codes)\n- Expected changes actually occurred\n- Verification assertions passed\n\nAgent can mark any step complete regardless of actual success.\n\n## Solution\n\n### Gate Fix Options\n- **Option A**: Store workflow name in separate field, discover populates await_id from matching run\n- **Option B**: Detect non-numeric await_id as workflow name hint, use it to filter gh run list\n\n### Validation Improvements\n- Steps with ```bash``` blocks should capture exit codes\n- Verification steps should have machine-checkable assertions\n- Consider script gates that run validation commands\n\n## Related\n- bd-mcva (Gate Evaluation epic) - infrastructure is done, usage pattern is broken\n- Continues design toward event-driven releases","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-07T04:07:09Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T07:33:46Z","closed_at":"2026-01-07T07:33:46Z","labels":["design","release-workflow"],"work_type":"mutex"}
{"id":"bd-m964","title":"Consider FTS5 for text search at scale","description":"SearchIssues uses LIKE patterns for text search which can't use indexes.\n\n**Current query (queries.go:1475-1477):**\n```sql\n(title LIKE ? OR description LIKE ? OR id LIKE ?)\n```\n\n**Problem:** Full table scan on every text search. At 100K+ issues, this becomes slow.\n\n**SQLite FTS5 solution:**\n```sql\nCREATE VIRTUAL TABLE issues_fts USING fts5(\n  id, title, description, design, notes,\n  content='issues',\n  content_rowid='rowid'\n);\n\n-- Triggers to keep FTS in sync\nCREATE TRIGGER issues_ai AFTER INSERT ON issues BEGIN\n  INSERT INTO issues_fts(rowid, id, title, description, design, notes)\n  VALUES (new.rowid, new.id, new.title, new.description, new.design, new.notes);\nEND;\n-- (similar for UPDATE, DELETE)\n```\n\n**Trade-offs:**\n- Database size increase (~30-50% for text content)\n- Additional write overhead (trigger execution)\n- Better search capabilities (ranking, phrase search)\n\n**Decision needed:** Is full-text search a priority feature? Current LIKE search may be acceptable for most use cases.\n\n**Benchmark first:** Measure SearchIssues at 100K scale before implementing.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-23T06:58:56Z","updated_at":"2026-01-02T08:17:14Z","work_type":"mutex"}
{"id":"bd-mcqyd","title":"Create JUJUTSU.md documentation","description":"The printJJAliasInstructions() function references docs/JUJUTSU.md but it doesn't exist yet.\n\nShould document:\n- How to use bd with jujutsu\n- Colocated vs pure jj repos\n- Alias workaround for pure jj\n- When native jj hooks arrive, how to upgrade\n\nRelated: hq-ew1mbr.12 (jujutsu support)","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:07:54Z","created_by":"beads/crew/lizzy","updated_at":"2026-01-21T03:07:54Z","work_type":"mutex"}
{"id":"bd-mcva","title":"Gate Evaluation: Phases 2-4 (Timer, GitHub, Cross-Rig)","description":"Complete gate evaluation implementation started in bd-7zka.2 (Phase 1: Human Gates).\n\n## Background\nPhase 1 implemented gate issues as beads that block dependent steps. Phases 2-4 add automatic gate resolution.\n\n## Gate Types and Watchers\n\n| Gate Type | Watcher | Trigger |\n|-----------|---------|---------|\n| timer | Witness | Patrol cycle |\n| gh:run | Refinery | Patrol poll |\n| gh:pr | Refinery | Patrol poll |\n| bead (cross-rig) | Existing dep resolution | Sync |\n\n## Commands\n```bash\nbd gate list                    # Show open gates\nbd gate check                   # Evaluate all gates\nbd gate check --type=timer      # Check only timer gates\nbd gate check --type=gh         # Check only GitHub gates\nbd gate resolve \u003cid\u003e [--reason] # Force-close a gate\n```\n\n## Related\n- bd-7zka.2: Phase 1 implementation (closed)\n- gt-dh65: Deacon patrol gate checking integration","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-02T09:55:17Z","created_by":"mayor","updated_at":"2026-01-03T01:04:10Z","closed_at":"2026-01-03T01:04:10Z","work_type":"mutex"}
{"id":"bd-mczr","title":"bd init inherits from parent hub instead of starting empty (GH#896)","description":"When running bd init in a subdirectory of a hub, the new database gets populated with parent hub's issues and repo UUID, causing DATABASE MISMATCH errors. Root cause: FindBeadsDir() walks up to parent directories and finds parent hub's .beads. Need to ensure bd init only looks at LOCAL git repo's history, not parent hub.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-04T23:22:44Z","created_by":"beads/crew/grip","updated_at":"2026-01-04T23:43:39Z","closed_at":"2026-01-04T23:43:39Z","work_type":"mutex"}
{"id":"bd-mfrs6","title":"gt doctor priming check: AGENTS.md check misses rig-level files","description":"The AGENTS.md \u003e 20 lines check is only in checkAgentPriming(), which checks mayor, deacon, witness, refinery directories. But rig-level AGENTS.md files (e.g., gastown/AGENTS.md, beads/AGENTS.md) are not checked.\n\nThese rig-level files should also be thin bootstrap pointers.\n\nFix: Add AGENTS.md check to checkRigPriming() similar to how PRIME.md is checked.\n\nLocation: gastown/mayor/rig/internal/doctor/priming_check.go:152-164","status":"closed","priority":3,"issue_type":"task","assignee":"gastown/polecats/rictus","created_at":"2026-01-10T08:46:14Z","created_by":"mayor","updated_at":"2026-01-10T09:03:24Z","closed_at":"2026-01-10T09:03:24Z","work_type":"mutex"}
{"id":"bd-mfube","title":"Add bd doctor check for non-tombstone issues with deleted_at","description":"Add a doctor check to detect invalid issue states where:\n- status is NOT 'tombstone'\n- deleted_at IS set\n\nThis is an invariant violation that can cause sync failures with error:\n'non-tombstone issues cannot have deleted_at timestamp'\n\nThe check should:\n1. Query for issues with this invalid state\n2. Report the count and example IDs\n3. Suggest fix: either convert to tombstones or remove deleted_at\n\nImplementation location: `cmd/bd/doctor/integrity.go`","status":"open","priority":2,"issue_type":"task","assignee":"beads/crew/grip","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T09:26:18Z","created_by":"mayor","updated_at":"2026-01-12T09:36:55Z","work_type":"mutex"}
{"id":"bd-mgt2","title":"Update UI styles for removed types","description":"Update or remove type-specific styling for agent/role/rig types.\n\n## Work\n- Remove ColorTypeAgent, ColorTypeRole, ColorTypeRig constants\n- Remove TypeAgentStyle, TypeRoleStyle, TypeRigStyle\n- Update RenderIssueType() switch to remove these cases\n- Consider: add label-based styling for gt:* labels\n\n## Files\n- internal/ui/styles.go","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-07T04:40:48Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T06:11:58Z","closed_at":"2026-01-07T06:11:58Z","dependencies":[{"issue_id":"bd-mgt2","depends_on_id":"bd-i54l","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mmrhj","title":"Refactor Dolt imports to use interfaces for CGO-optional builds","description":"## Problem\n\nSeveral files directly import the `internal/storage/dolt` package without CGO build constraints:\n- `cmd/bd/daemon.go` - Uses dolt.Server for federation mode\n- `cmd/bd/federation.go` - Federation commands are Dolt-specific  \n- `cmd/bd/doctor/federation.go` - Federation health checks\n\nThis causes CI failures when building with `CGO_ENABLED=0` because the dolthub/gozstd dependency requires CGO.\n\n## Current Quick Fix (v0.49.0)\n\nAdded `//go:build cgo` constraints to these files with stub versions for non-CGO builds. Federation/Dolt-specific commands are unavailable in non-CGO builds.\n\n## Proper Solution\n\nRefactor to use interfaces and factories:\n1. Define interfaces for dolt.Server, dolt.DoltStore in a non-CGO package\n2. Use factory pattern to instantiate implementations only when CGO available\n3. Graceful degradation when features unavailable\n\n## Related\n- PR #1117 (fix: enable building on Windows without CGO) started this pattern\n- v0.49.0 CI failure exposed incomplete coverage","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T07:58:09Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T07:58:09Z","labels":["dolt","tech-debt"],"work_type":"mutex"}
{"id":"bd-mol-1ip","title":"Update info.go versionChanges","description":"Add entry to versionChanges in cmd/bd/info.go.\n\nThis powers `bd info --whats-new` for agents.\n\n```go\n\"0.48.0\": {\n    \"summary\": \"Brief description\",\n    \"changes\": []string{\n        \"Key change 1\",\n        \"Key change 2\",\n    },\n},\n```\n\nFocus on workflow-impacting changes agents need to know.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:22:37Z","closed_at":"2026-01-17T12:22:37Z","dependencies":[{"issue_id":"bd-mol-1ip","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-mol-1ip","depends_on_id":"bd-mol-gcy","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-28g","title":"Preflight: Check git status \u0026 auto-stash","description":"Ensure working tree is clean before starting release.\n\n```bash\ngit status --short\n```\n\n**Handling uncommitted changes:**\n\nIf changes are in release-related files (CHANGELOG, version files), you may want to:\n- Include them in the release commit\n- Or stash and apply after version bump\n\nIf changes are in **non-release files** (e.g., .beads/config.yaml, .claude/settings.json, local configs):\n```bash\n# Auto-stash non-release files\ngit stash push -m \"pre-release: non-release changes\" -- .beads/ .claude/ *.local* .env*\n\n# Verify working tree is now clean (or only has release files)\ngit status --short\n```\n\n**Important:** The bump script may fail if non-release files are modified. Always stash:\n- `.beads/` directory (local config)\n- `.claude/` directory (agent settings)\n- Any `.local`, `.env`, or personal config files\n\nAfter release completes, restore with:\n```bash\ngit stash pop\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:19:19Z","closed_at":"2026-01-17T12:19:19Z","dependencies":[{"issue_id":"bd-mol-28g","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-mol-28g","depends_on_id":"bd-mol-6mk","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-370","title":"Update local installation","description":"Update local bd to the new version.\n\nOption 1 - Homebrew:\n```bash\nbrew upgrade bd\n```\n\nOption 2 - Install script:\n```bash\ncurl -fsSL https://raw.githubusercontent.com/steveyegge/beads/main/scripts/install.sh | bash\n```\n\nVerify:\n```bash\nbd --version\n```\n\nShould show 0.48.0.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:38:24Z","closed_at":"2026-01-17T12:38:24Z","dependencies":[{"issue_id":"bd-mol-370","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-mol-370","depends_on_id":"bd-mol-96j","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-mol-370","depends_on_id":"bd-mol-9su","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-mol-370","depends_on_id":"bd-mol-y22","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-3wa","title":"Restart daemons","description":"Restart bd daemons to pick up new version.\n\n```bash\nbd daemons killall\n```\n\nDaemons will auto-restart with new version on next bd command.\n\nVerify:\n```bash\nbd daemons list\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:38:24Z","closed_at":"2026-01-17T12:38:24Z","dependencies":[{"issue_id":"bd-mol-3wa","depends_on_id":"bd-mol-370","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-mol-3wa","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-50b","title":"beads-release","description":"Beads release workflow v2 - gate-aware async release.\n\nThis formula orchestrates a complete release cycle with async gates:\n\nPhase 1 (Polecat Work):\n  1. Preflight checks (clean git, up to date)\n  2. Documentation updates (CHANGELOG, info.go)\n  3. Version bump (all components)\n  4. Git operations (commit, tag, push)\n\nGate (Async Wait):\n  5. await-ci: Gate on GitHub Actions release.yml completion\n\nPhase 2 (Parallel Verification):\n  6. Verify GitHub release, npm package, PyPI package (concurrent)\n\nPhase 3 (Installation):\n  7. Local installation update\n  8. Daemon restart\n\n## Usage\n\n```bash\nbd mol wisp create beads-release --var version=0.44.0\n```\n\nOr assign to a polecat:\n```bash\ngt sling beads/polecats/p1 --formula beads-release --var version=0.44.0\n```\n\nThe polecat will complete Phase 1, then signal phase-complete. The gate blocks\nuntil release.yml finishes. A new polecat (or the same one) resumes for Phases 2-3.\n","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:38:30Z","closed_at":"2026-01-17T12:38:30Z","work_type":"mutex"}
{"id":"bd-mol-5j3","title":"Push release tag","description":"Push the version tag to trigger CI release.\n\n```bash\ngit push origin v0.48.0\n```\n\nThis triggers GitHub Actions to build artifacts and publish.\n\n**Phase 1 Complete**: After this step, signal phase-complete:\n```bash\ngt done --phase-complete\n```\n\nThe gate will block until CI finishes. A new session will resume at Phase 2.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:37:02Z","closed_at":"2026-01-17T12:37:02Z","dependencies":[{"issue_id":"bd-mol-5j3","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"},{"issue_id":"bd-mol-5j3","depends_on_id":"bd-mol-zcf","type":"blocks","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-6mk","title":"Preflight: Verify git context","description":"Ensure we're in the correct git directory, especially for worktree setups.\n\n```bash\n# Check current repo root and remote\ngit rev-parse --show-toplevel\ngit remote get-url origin\n\n# Verify this is the main worktree (not a linked worktree)\ngit worktree list\n```\n\nFor worktree setups, releases should be done from the **main worktree** to ensure:\n- Correct file paths in commits\n- Proper tag association\n- Clean branch history\n\nIf you're in a linked worktree:\n1. Note the path to the main worktree (first line of `git worktree list`)\n2. Switch to that directory before proceeding\n3. Or use: `cd $(git worktree list | head -1 | cut -d' ' -f1)`\n\n**Red flags:**\n- Remote URL doesn't match expected repository\n- You're in a linked worktree (not the main one)\n- `git status` shows different files than expected\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:19:01Z","closed_at":"2026-01-17T12:19:01Z","dependencies":[{"issue_id":"bd-mol-6mk","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-6r8","title":"Release complete","description":"Release v0.48.0 is complete!\n\nSummary:\n- All version files updated\n- Git tag pushed\n- CI artifacts built (via gate)\n- npm and PyPI packages verified\n- Local installation updated\n- Daemons restarted\n\nOptional next steps:\n- Announce on social media\n- Update documentation site\n- Close related milestone\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:38:25Z","closed_at":"2026-01-17T12:38:25Z","dependencies":[{"issue_id":"bd-mol-6r8","depends_on_id":"bd-mol-3wa","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-6r8","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:08Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-7ib","title":"Commit release","description":"Stage and commit all version changes.\n\n```bash\ngit add -A\ngit commit -m \"chore: Bump version to 0.48.0\"\n```\n\nReview the commit to ensure all expected files are included.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:36:08Z","closed_at":"2026-01-17T12:36:08Z","dependencies":[{"issue_id":"bd-mol-7ib","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-7ib","depends_on_id":"bd-mol-80t","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-80t","title":"Verify version consistency","description":"Confirm all versions match 0.48.0.\n\n```bash\ngrep 'Version = ' cmd/bd/version.go\njq -r '.version' .claude-plugin/plugin.json\njq -r '.version' npm-package/package.json\ngrep 'version = ' integrations/beads-mcp/pyproject.toml\ngrep 'version = ' default.nix\n```\n\nAll should show 0.48.0.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:35:47Z","closed_at":"2026-01-17T12:35:47Z","dependencies":[{"issue_id":"bd-mol-80t","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-80t","depends_on_id":"bd-mol-kgs","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-8gd","title":"Review changes since last release","description":"Understand what's being released.\n\n```bash\ngit log $(git describe --tags --abbrev=0)..HEAD --oneline\n```\n\nCategorize changes:\n- Features (feat:)\n- Fixes (fix:)\n- Breaking changes\n- Documentation\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:20:24Z","closed_at":"2026-01-17T12:20:24Z","dependencies":[{"issue_id":"bd-mol-8gd","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-8gd","depends_on_id":"bd-mol-kr1","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-8li","title":"Bump version in npm package","description":"Update the npm package version.\n\n```bash\n# macOS/Linux with jq\njq '.version = \"0.48.0\"' npm-package/package.json \u003e tmp \u0026\u0026 mv tmp npm-package/package.json\n```\n\nVerify:\n```bash\njq -r '.version' npm-package/package.json\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:24:29Z","closed_at":"2026-01-17T12:24:29Z","dependencies":[{"issue_id":"bd-mol-8li","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-8li","depends_on_id":"bd-mol-tts","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-96j","title":"Verify PyPI package","description":"Confirm PyPI package published.\n\n```bash\npip index versions beads-mcp 2\u003e/dev/null | head -3\n```\n\nOr check: https://pypi.org/project/beads-mcp/\n\nShould show 0.48.0.\n\nNote: PyPI may have a small propagation delay (1-2 min).\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:38:24Z","closed_at":"2026-01-17T12:38:24Z","dependencies":[{"issue_id":"bd-mol-96j","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-96j","depends_on_id":"bd-mol-e15","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-9su","title":"Verify GitHub release","description":"Check the GitHub releases page.\n\nhttps://github.com/steveyegge/beads/releases/tag/v0.48.0\n\nVerify:\n- Release created\n- Binaries attached (linux, darwin, windows)\n- Checksums present\n\n```bash\ngh release view v0.48.0 --json assets --jq '.assets[].name'\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:38:24Z","closed_at":"2026-01-17T12:38:24Z","dependencies":[{"issue_id":"bd-mol-9su","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-9su","depends_on_id":"bd-mol-e15","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-bzx","title":"Gate: gh:run release.yml","description":"Async gate for step await-ci","status":"closed","priority":2,"issue_type":"gate","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:37:28Z","closed_at":"2026-01-17T12:37:28Z","dependencies":[{"issue_id":"bd-mol-bzx","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-dj1","title":"Bump version in default.nix","description":"Update the Nix package version.\n\n```bash\n# macOS\nsed -i '' 's/version = \"[^\"]*\";/version = \"0.48.0\";/' default.nix\n\n# Linux\nsed -i 's/version = \"[^\"]*\";/version = \"0.48.0\";/' default.nix\n```\n\nVerify:\n```bash\ngrep 'version = ' default.nix\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:25:32Z","closed_at":"2026-01-17T12:25:32Z","dependencies":[{"issue_id":"bd-mol-dj1","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-dj1","depends_on_id":"bd-mol-oyn","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-e15","title":"Await CI: release.yml completion","description":"Gate step: Wait for GitHub Actions release workflow to complete.\n\nThis gate blocks until the release.yml workflow run succeeds.\nThe Refinery auto-discovers the workflow run triggered by v0.48.0\nand closes this gate when it completes.\n\nExpected time: 5-10 minutes\n\nThe gate monitors:\n- Build artifacts (all platforms)\n- Test suite pass\n- npm publish\n- PyPI publish\n\nIf the workflow fails, this gate remains open and requires manual intervention.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:38:16Z","closed_at":"2026-01-17T12:38:16Z","dependencies":[{"issue_id":"bd-mol-e15","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-e15","depends_on_id":"bd-mol-5j3","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-e15","depends_on_id":"bd-mol-bzx","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-fl0","title":"Bump version in version.go","description":"Update the Go version constant.\n\n```bash\n# macOS\nsed -i '' 's/Version = \"[^\"]*\"/Version = \"0.48.0\"/' cmd/bd/version.go\n\n# Linux\nsed -i 's/Version = \"[^\"]*\"/Version = \"0.48.0\"/' cmd/bd/version.go\n```\n\nVerify:\n```bash\ngrep 'Version = ' cmd/bd/version.go\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:23:06Z","closed_at":"2026-01-17T12:23:06Z","dependencies":[{"issue_id":"bd-mol-fl0","depends_on_id":"bd-mol-1ip","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-fl0","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-gcy","title":"Update CHANGELOG.md","description":"Write the [Unreleased] section with all changes for 0.48.0.\n\nFormat: Keep a Changelog (https://keepachangelog.com)\n\nSections:\n- ### Added\n- ### Changed\n- ### Fixed\n- ### Documentation\n\nThe bump script will stamp the date automatically.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:21:46Z","closed_at":"2026-01-17T12:21:46Z","dependencies":[{"issue_id":"bd-mol-gcy","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-gcy","depends_on_id":"bd-mol-jc2","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-jc2","title":"Verify CHANGELOG completeness","description":"Ensure CHANGELOG captures ALL commits since the last release.\n\n**Step 1: Count commits since last tag**\n```bash\nLAST_TAG=$(git describe --tags --abbrev=0)\nCOMMIT_COUNT=$(git rev-list $LAST_TAG..HEAD --count)\necho \"Commits since $LAST_TAG: $COMMIT_COUNT\"\n```\n\n**Step 2: List all commits with their messages**\n```bash\ngit log $LAST_TAG..HEAD --oneline --no-merges\n```\n\n**Step 3: Cross-reference with CHANGELOG**\nOpen CHANGELOG.md and verify every significant commit is documented in [Unreleased].\n\n**Red flags for stale CHANGELOG:**\n- If CHANGELOG was last modified days ago but there are recent commits\n- If commit count seems high but [Unreleased] section is sparse\n- If PR titles in commits don't match CHANGELOG entries\n\n```bash\n# Check when CHANGELOG was last modified\ngit log -1 --format=\"%ar\" -- CHANGELOG.md\n\n# Compare to latest commit date\ngit log -1 --format=\"%ar\"\n```\n\n**If CHANGELOG is stale:**\n1. Review all commits since last tag\n2. Add missing entries to appropriate sections (Added/Changed/Fixed)\n3. Group related changes\n4. Focus on user-facing changes and breaking changes\n\nDon't proceed until CHANGELOG is complete - it's the release notes!\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:20:52Z","closed_at":"2026-01-17T12:20:52Z","dependencies":[{"issue_id":"bd-mol-jc2","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-jc2","depends_on_id":"bd-mol-8gd","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-kgs","title":"Stamp changelog with release date","description":"Add the release date to the [Unreleased] section header.\n\n```bash\nDATE=$(date +%Y-%m-%d)\n\n# macOS\nsed -i '' \"s/## \\[Unreleased\\]/## [Unreleased]\\\n\\\n## [0.48.0] - $DATE/\" CHANGELOG.md\n\n# Linux\nsed -i \"s/## \\[Unreleased\\]/## [Unreleased]\\n\\n## [0.48.0] - $DATE/\" CHANGELOG.md\n```\n\nNote: The update-changelog step handles the content; this step just adds the date stamp.\n\nVerify:\n```bash\ngrep -A2 '\\[Unreleased\\]' CHANGELOG.md\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:35:28Z","closed_at":"2026-01-17T12:35:28Z","dependencies":[{"issue_id":"bd-mol-kgs","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-kgs","depends_on_id":"bd-mol-ma7","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-kr1","title":"Detect half-done release","description":"Check if a previous release was started but not completed (version mismatch).\n\n**Compare versions across all sources:**\n```bash\n# Last git tag\nLAST_TAG=$(git describe --tags --abbrev=0 2\u003e/dev/null || echo \"none\")\necho \"Last tag: $LAST_TAG\"\n\n# Version in code\nCODE_VERSION=$(grep 'Version = ' cmd/bd/version.go | cut -d'\"' -f2)\necho \"Code version: $CODE_VERSION\"\n\n# Version in CHANGELOG (most recent versioned section)\nCHANGELOG_VERSION=$(grep -E '## \\[[0-9]+\\.[0-9]+\\.[0-9]+\\]' CHANGELOG.md | head -1 | grep -oE '[0-9]+\\.[0-9]+\\.[0-9]+')\necho \"CHANGELOG version: $CHANGELOG_VERSION\"\n\n# Version in npm package\nNPM_VERSION=$(jq -r '.version' npm-package/package.json)\necho \"npm version: $NPM_VERSION\"\n```\n\n**Healthy state (ready for new release):**\n- All versions match (e.g., all show 0.46.0)\n- Last tag matches code version\n\n**Half-done release detected if:**\n- CHANGELOG shows 0.48.0 but code shows previous version\n- Code version doesn't match last tag\n- npm/PyPI versions are out of sync\n\n**Recovery from half-done release:**\n```bash\n# If CHANGELOG was updated but code wasn't bumped:\n# Either complete the release or revert CHANGELOG changes\n\n# Check what state we're in\ngit diff $LAST_TAG -- CHANGELOG.md | head -50\n```\n\nIf mismatch detected, either:\n1. Complete the partial release (bump remaining files)\n2. Revert partial changes and start fresh\n3. Carefully verify what's already pushed vs local-only\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:19:59Z","closed_at":"2026-01-17T12:19:59Z","dependencies":[{"issue_id":"bd-mol-kr1","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-ma7","title":"Update Nix vendorHash if needed","description":"Update vendorHash if go.mod/go.sum changed since last release.\n\nCheck if update is needed:\n```bash\n# Compare go.mod/go.sum against last tag\nLAST_TAG=$(git describe --tags --abbrev=0)\ngit diff $LAST_TAG -- go.mod go.sum\n```\n\nIf there are changes, run the update script:\n```bash\n./scripts/update-nix-vendorhash.sh\n```\n\nThe script auto-detects nix or Docker and updates the hash automatically.\n\nVerify:\n```bash\ngrep 'vendorHash = ' default.nix\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:35:03Z","closed_at":"2026-01-17T12:35:03Z","dependencies":[{"issue_id":"bd-mol-ma7","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-ma7","depends_on_id":"bd-mol-dj1","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-ngp","title":"Bump version in plugin JSON files","description":"Update Claude plugin manifest versions.\n\n```bash\n# macOS/Linux with jq\njq '.version = \"0.48.0\"' .claude-plugin/plugin.json \u003e tmp \u0026\u0026 mv tmp .claude-plugin/plugin.json\njq '.plugins[0].version = \"0.48.0\"' .claude-plugin/marketplace.json \u003e tmp \u0026\u0026 mv tmp .claude-plugin/marketplace.json\n```\n\nVerify:\n```bash\njq -r '.version' .claude-plugin/plugin.json\njq -r '.plugins[0].version' .claude-plugin/marketplace.json\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:23:38Z","closed_at":"2026-01-17T12:23:38Z","dependencies":[{"issue_id":"bd-mol-ngp","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-ngp","depends_on_id":"bd-mol-fl0","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-oyn","title":"Bump version in README badge","description":"Update the Alpha version badge in README.md.\n\n```bash\n# macOS\nsed -i '' 's/Alpha (v[^)]*)/Alpha (v0.48.0)/' README.md\n\n# Linux\nsed -i 's/Alpha (v[^)]*)/Alpha (v0.48.0)/' README.md\n```\n\nVerify:\n```bash\ngrep 'Alpha (v' README.md\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:25:11Z","closed_at":"2026-01-17T12:25:11Z","dependencies":[{"issue_id":"bd-mol-oyn","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-oyn","depends_on_id":"bd-mol-z89","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-tts","title":"Bump version in MCP Python package","description":"Update the beads-mcp Python package version.\n\n```bash\n# macOS\nsed -i '' 's/version = \"[^\"]*\"/version = \"0.48.0\"/' integrations/beads-mcp/pyproject.toml\nsed -i '' 's/__version__ = \"[^\"]*\"/__version__ = \"0.48.0\"/' integrations/beads-mcp/src/beads_mcp/__init__.py\n\n# Linux\nsed -i 's/version = \"[^\"]*\"/version = \"0.48.0\"/' integrations/beads-mcp/pyproject.toml\nsed -i 's/__version__ = \"[^\"]*\"/__version__ = \"0.48.0\"/' integrations/beads-mcp/src/beads_mcp/__init__.py\n```\n\nVerify:\n```bash\ngrep 'version = ' integrations/beads-mcp/pyproject.toml | head -1\ngrep '__version__ = ' integrations/beads-mcp/src/beads_mcp/__init__.py\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:24:13Z","closed_at":"2026-01-17T12:24:13Z","dependencies":[{"issue_id":"bd-mol-tts","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-tts","depends_on_id":"bd-mol-ngp","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-xtb","title":"Create release tag","description":"Create annotated git tag.\n\n```bash\ngit tag -a v0.48.0 -m \"Release v0.48.0\"\n```\n\nVerify: `git tag -l | tail -5`\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:36:24Z","closed_at":"2026-01-17T12:36:24Z","dependencies":[{"issue_id":"bd-mol-xtb","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-xtb","depends_on_id":"bd-mol-7ib","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-y22","title":"Verify npm package","description":"Confirm npm package published.\n\n```bash\nnpm show @beads/bd version\n```\n\nShould show 0.48.0.\n\nAlso check: https://www.npmjs.com/package/@beads/bd\n\nNote: npm registry may have a small propagation delay (1-2 min).\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:38:24Z","closed_at":"2026-01-17T12:38:24Z","dependencies":[{"issue_id":"bd-mol-y22","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-y22","depends_on_id":"bd-mol-e15","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-z89","title":"Bump version in hook templates","description":"Update version comment in git hook templates.\n\n```bash\n# macOS\nfor f in cmd/bd/templates/hooks/pre-commit cmd/bd/templates/hooks/post-merge cmd/bd/templates/hooks/pre-push cmd/bd/templates/hooks/post-checkout; do\n  sed -i '' 's/# bd-hooks-version: .*/# bd-hooks-version: 0.48.0/' \"$f\"\ndone\n\n# Linux\nfor f in cmd/bd/templates/hooks/pre-commit cmd/bd/templates/hooks/post-merge cmd/bd/templates/hooks/pre-push cmd/bd/templates/hooks/post-checkout; do\n  sed -i 's/# bd-hooks-version: .*/# bd-hooks-version: 0.48.0/' \"$f\"\ndone\n```\n\nVerify:\n```bash\ngrep '# bd-hooks-version:' cmd/bd/templates/hooks/pre-commit\n```\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:24:52Z","closed_at":"2026-01-17T12:24:52Z","dependencies":[{"issue_id":"bd-mol-z89","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-z89","depends_on_id":"bd-mol-8li","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mol-zcf","title":"Push to main","description":"Push the release commit to origin.\n\n```bash\ngit push origin main\n```\n\nIf rejected, someone else pushed. Pull, rebase, try again.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-17T12:18:05Z","updated_at":"2026-01-17T12:36:48Z","closed_at":"2026-01-17T12:36:48Z","dependencies":[{"issue_id":"bd-mol-zcf","depends_on_id":"bd-mol-50b","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-mol-zcf","depends_on_id":"bd-mol-xtb","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-mydeg","title":"Review PR #961: Fix daemon JSON output for dep","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #961 (steveyegge/beads)\n\nPR: https://github.com/steveyegge/beads/pull/961\nAuthor: peterkc\n\nFixes bd dep add/remove --json returning empty output in daemon mode.\n- gh pr view 961 --repo steveyegge/beads\n- gh pr diff 961 --repo steveyegge/beads\n- If good: gh pr merge 961 --repo steveyegge/beads --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-08T22:30:23Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:36:27Z","closed_at":"2026-01-08T22:36:27Z","work_type":"mutex"}
{"id":"bd-n0md6","title":"Review and merge PR #975: fix sync --import-only store nil","description":"dispatched_by: beads/crew/emma\n\n## Task\nReview and merge PR #975 from juanre.\n\n**PR**: https://github.com/steveyegge/beads/pull/975\n\n## What it does\n- Adds ensureStoreActive() call after daemon disconnect in sync.go\n- Fixes 'no database store available for inline import' error\n- Includes comprehensive test documenting the bug and fix\n\n## Easy-win criteria met\n- Bug fix with clear reproduction and solution\n- Has comprehensive test\n- Small diff (143 additions, 0 deletions)\n- Low risk\n\n## Instructions\n1. Clone/fetch the PR: gh pr checkout 975 --repo steveyegge/beads\n2. Run tests: go test ./cmd/bd/...\n3. Review the diff: gh pr diff 975 --repo steveyegge/beads\n4. If tests pass and code looks good, approve and merge\n5. Close this bead when done","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-09T18:59:59Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T21:44:59Z","closed_at":"2026-01-09T21:44:59Z","work_type":"mutex"}
{"id":"bd-n7o47","title":"Bug: daemon guard blocks Dolt federation mode","description":"## Problem\n\nWhen running `bd daemon start --federation` with Dolt backend, the daemon guard blocks it with:\n```\nError: daemon mode is not supported with the \"dolt\" backend (single-process only)\n```\n\nBut `--federation` is supposed to enable dolt sql-server mode which IS multi-writer capable.\n\n## Expected Behavior\n\n`bd daemon start --federation` should start dolt sql-server with remotesapi enabled, allowing multi-writer federation.\n\n## Root Cause\n\nThe guard in `daemon_guard.go` checks for single-process backends but doesn't properly respect the `--federation` flag exception path.\n\n## Fix Location\n\n`cmd/bd/daemon_guard.go` - the federation flag check exists but isn't being evaluated correctly in all code paths.","status":"closed","priority":1,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T01:59:47Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T02:06:12Z","closed_at":"2026-01-22T02:06:12Z","work_type":"mutex"}
{"id":"bd-ne0h","title":"GHI #891: close_reason field dropped during merge/sync","description":"GitHub Issue #891: close_reason field dropped during merge/sync\n\nhttps://github.com/steveyegge/beads/issues/891","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-04T19:22:12Z","created_by":"mayor","updated_at":"2026-01-04T23:22:08Z","closed_at":"2026-01-04T19:28:48Z","work_type":"mutex"}
{"id":"bd-nhoml","title":"Bootstrap: Consider reusing existing importer logic","description":"The bootstrap code reimplements a simplified version of JSONL import. The existing `importer.ImportIssues()` handles many edge cases:\n- Prefix validation and mismatch detection\n- Collision detection (duplicate IDs)\n- External ref canonicalization\n- Orphan handling (Strict/Resurrect/Skip/Allow modes)\n- Incremental import (skip existing if hashes match)\n\nConsider adapting the importer for Dolt backend to get these features for free and reduce code duplication.\n\nCurrent importer location: internal/importer/importer.go\nBootstrap location: internal/storage/dolt/bootstrap.go\n\n(Moved from hq-ckkml)","status":"open","priority":3,"issue_type":"chore","created_at":"2026-01-21T01:37:28Z","created_by":"mayor","updated_at":"2026-01-21T01:37:28Z","labels":["dolt-backend"],"work_type":"mutex"}
{"id":"bd-nlcp","title":"bd doctor: check redirect files for worktree clones","description":"When running in a worktree/clone that should have a redirect (e.g., crew/george, polecats/*), bd doctor should verify:\n\n1. The redirect file exists\n2. The redirect target is valid and accessible\n3. The target has a working beads.db\n\nThis helps catch setup issues when cloning to a new machine where `gt crew add` might not have created the redirect properly.\n\nExample checks:\n- If cwd contains /crew/ or /polecats/, expect a redirect file\n- Warn if redirect is missing: 'Missing redirect - run gt crew add or create .beads/redirect'\n- Warn if redirect target doesn't exist or has no DB","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-07T09:10:23Z","created_by":"gastown/crew/george","updated_at":"2026-01-07T09:11:22Z","closed_at":"2026-01-07T09:11:22Z","work_type":"mutex"}
{"id":"bd-nqr5l","title":"Review PR #16562: Portable shebang in ralph-wiggum","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #16562 (anthropics/claude-code)\n\nPR: https://github.com/anthropics/claude-code/pull/16562\nAuthor: mantrakp04\nFixes: #12880\n\nChanges #!/bin/bash to #!/usr/bin/env bash for NixOS/WSL2 compatibility.\n- gh pr view 16562 --repo anthropics/claude-code\n- gh pr diff 16562 --repo anthropics/claude-code\n- If good: gh pr merge 16562 --repo anthropics/claude-code --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-08T22:20:26Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:29:36Z","closed_at":"2026-01-08T22:29:36Z","work_type":"mutex"}
{"id":"bd-nrcp","title":"Leaky abstraction: molecules uses sqlite.BatchCreateOptions","description":"attached_molecule: bd-wisp-iyh\nattached_at: 2026-01-27T04:09:11Z\ndispatched_by: beads/crew/emma\n\n**Found in:** internal/molecules/molecules.go:152-153\n\n**Issue:** Molecules package type-asserts to SQLiteStorage and uses SQLite-specific BatchCreateOptions:\n```go\nif sqliteStore, ok := l.store.(*sqlite.SQLiteStorage); ok {\n    opts := sqlite.BatchCreateOptions{\n```\n\nAlso in internal/importer/importer.go:915-919:\n```go\nCreateIssuesWithFullOptions(ctx context.Context, issues []*types.Issue, actor string, opts sqlite.BatchCreateOptions) error\nbatchOpts := sqlite.BatchCreateOptions{\n    OrphanHandling: sqlite.OrphanHandling(opts.OrphanHandling),\n```\n\n**Impact:** Batch create optimizations unavailable for Dolt backend. Could affect molecule creation performance.\n\n**Recommendation:**\n1. Move BatchCreateOptions to storage package (backend-agnostic)\n2. Add CreateIssuesWithFullOptions to Storage interface\n3. Implement for Dolt backend\n\n**Severity:** Medium - performance impact, not functional","status":"hooked","priority":2,"issue_type":"task","assignee":"beads/polecats/jasper","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:55Z","created_by":"beads/crew/darcy","updated_at":"2026-01-27T04:09:12Z","dependencies":[{"issue_id":"bd-nrcp","depends_on_id":"bd-ats9.1","type":"blocks","created_at":"2026-01-26T19:50:27Z","created_by":"beads/crew/darcy"},{"issue_id":"bd-nrcp","depends_on_id":"bd-wisp-iyh","type":"blocks","created_at":"2026-01-26T20:09:09Z","created_by":"beads/crew/emma"}]}
{"id":"bd-ntl3b","title":"Deduplicate daemon_start.go validation logic","description":"daemon_start.go (lines 57-124) duplicates validation logic from daemon.go. Should extract shared validation to a helper function and call it from both places.\n\nDuplicated logic:\n- Version mismatch check and auto-stop\n- Local mode constraint validation\n- Git repo validation\n- Upstream check for auto-push\n- Worktree warning\n\nFix: Create validateDaemonStartPrereqs() or similar helper that both daemonCmd.Run and daemonStartCmd.Run can call.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-11T00:30:36Z","created_by":"beads/crew/emma","updated_at":"2026-01-11T00:30:36Z","work_type":"mutex"}
{"id":"bd-nv1z","title":"Fix PR→MR terminology in internal workflow docs","description":"Polecats create MRs (merge requests), not PRs. Fix these references:\n\n- docs/reference.md:326 - 'review PRs' → 'review MRs'\n- docs/INSTALLING.md:187 - 'PR review' → 'MR review'\n\nPRs are external GitHub concept. MRs are internal Gas Town workflow.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-05T06:13:04Z","created_by":"mayor","updated_at":"2026-01-05T06:13:14Z","closed_at":"2026-01-05T06:13:14Z","work_type":"mutex"}
{"id":"bd-nv4g","title":"Add pre-sync validation hook","description":"Future: Hook integration to run bd lint before sync, respecting config settings.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-01T19:19:11Z","created_by":"beads/crew/grip","updated_at":"2026-01-02T08:04:24Z","closed_at":"2026-01-02T08:04:24Z","dependencies":[{"issue_id":"bd-nv4g","depends_on_id":"bd-ou35","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-nv4g","depends_on_id":"bd-t7jq","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-o64zq","title":"Merge: garnet-mk9048ue","description":"branch: polecat/garnet-mk9048ue\ntarget: main\nsource_issue: garnet-mk9048ue\nrig: beads\nagent_bead: bd-beads-polecat-garnet\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T05:03:04Z","created_by":"beads/polecats/garnet","updated_at":"2026-01-11T06:01:41Z","closed_at":"2026-01-11T06:01:41Z","labels":["gt:merge-request"],"work_type":"mutex"}
{"id":"bd-o78","title":"Enhance `bd doctor` to verify Claude Code integration","description":"Add checks to `bd doctor` that verify Claude Code integration is properly set up when .claude/ directory or Claude environment is detected.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-12T07:30:06Z","updated_at":"2025-11-12T08:12:08Z","work_type":"mutex"}
{"id":"bd-oa45","title":"Leaky abstraction: compact/ requires SQLiteStorage","description":"attached_molecule: bd-wisp-cq2\nattached_at: 2026-01-27T04:09:31Z\ndispatched_by: beads/crew/emma\n\n**Found in:** internal/compact/compactor.go:47\n\n**Issue:** Compactor constructor signature requires `*sqlite.SQLiteStorage`:\n```go\nfunc New(store *sqlite.SQLiteStorage, apiKey string, config *Config) (*Compactor, error)\n```\n\n**Impact:** Compact feature is structurally tied to SQLite. Cannot be used with Dolt backend even if Dolt implements required methods.\n\n**Recommendation:** \n1. Define a CompactableStore interface with required methods\n2. Accept interface instead of concrete type\n3. Or document compact as SQLite-only feature intentionally\n\n**Severity:** Medium - limits Dolt backend functionality","status":"hooked","priority":2,"issue_type":"task","assignee":"beads/polecats/onyx","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:38Z","created_by":"beads/crew/darcy","updated_at":"2026-01-27T04:09:32Z","dependencies":[{"issue_id":"bd-oa45","depends_on_id":"bd-ats9.1","type":"blocks","created_at":"2026-01-26T19:50:26Z","created_by":"beads/crew/darcy"},{"issue_id":"bd-oa45","depends_on_id":"bd-wisp-cq2","type":"blocks","created_at":"2026-01-26T20:09:29Z","created_by":"beads/crew/emma"}]}
{"id":"bd-oafjc","title":"Add 'gt bead' subcommand (Phase 2 of gt-82jxwx)","description":"## Context\n\ngt-82jxwx implemented Phase 1 (`gt show \u003cbead-id\u003e`) but Phase 2 (`gt bead` subcommand) was marked \"future\" and never done. The bead was closed prematurely.\n\n## Desire Path Evidence\n\n```\ngt bead show bd-p7r8a\nError: unknown command \"bead\" for \"gt\"\n```\n\nAgent tried `gt bead show` expecting namespaced bead operations. This is a textbook desire path per AGENT-ERGONOMICS.md.\n\n## Implementation\n\nPer the original design in gt-82jxwx:\n\n```go\n// cmd/bead.go\nvar beadCmd = \u0026cobra.Command{\n    Use:   \"bead\",\n    Short: \"Bead operations\",\n}\n\nvar beadShowCmd = \u0026cobra.Command{\n    Use:   \"show \u003cbead-id\u003e\",\n    Short: \"Show details of a bead\",\n    DisableFlagParsing: true,\n    RunE: func(cmd *cobra.Command, args []string) error {\n        // Delegate to gt show (which delegates to bd show)\n        return showCmd.RunE(cmd, args)\n    },\n}\n\nfunc init() {\n    beadCmd.AddCommand(beadShowCmd)\n    rootCmd.AddCommand(beadCmd)\n}\n```\n\n## Acceptance Criteria\n\n- [ ] `gt bead show \u003cid\u003e` works (delegates to `gt show`)\n- [ ] `gt bead --help` shows available subcommands\n- [ ] Future: could add `gt bead list`, `gt bead ready` as aliases","status":"closed","priority":2,"issue_type":"feature","owner":"steve.yegge@gmail.com","created_at":"2026-01-16T22:36:30Z","created_by":"beads/crew/emma","updated_at":"2026-01-16T23:36:21Z","closed_at":"2026-01-16T23:36:21Z","labels":["desire-path"],"work_type":"mutex"}
{"id":"bd-odaaa","title":"Fix: bd show can't find issues bd list finds (GH#942)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #942. Inconsistency between bd show and bd list finding issues.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/wolf","created_at":"2026-01-10T06:20:13Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T06:33:23Z","closed_at":"2026-01-10T06:33:23Z","work_type":"mutex"}
{"id":"bd-oeeb","title":"Fix daemon path mismatch on case-insensitive filesystems (GH#869)","description":"macOS case-insensitive filesystem causes daemon to reject connections when path casing differs (Desktop vs desktop). Fix: normalize paths using filepath.EvalSymlinks + case normalization before comparison in registry lookup.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/wolf","created_at":"2026-01-03T21:12:52Z","created_by":"beads/crew/grip","updated_at":"2026-01-03T21:23:08Z","closed_at":"2026-01-03T21:23:08Z","work_type":"mutex"}
{"id":"bd-omhj8","title":"Merge: quartz-mk8zzb7a","description":"branch: polecat/quartz-mk8zzb7a\ntarget: main\nsource_issue: quartz-mk8zzb7a\nrig: beads\nagent_bead: bd-beads-polecat-quartz\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T05:02:58Z","created_by":"beads/polecats/quartz","updated_at":"2026-01-11T05:53:10Z","closed_at":"2026-01-11T05:53:10Z","labels":["gt:merge-request"],"work_type":"mutex"}
{"id":"bd-oos3","title":"Phase 3: GitHub Gates (Refinery integration)","description":"Implement GitHub gate evaluation in Refinery patrol.\n\n## Gate Types\n- `gh:run` - GitHub Actions workflow run\n- `gh:pr` - Pull request merged/closed status\n\n## Behavior\n- Refinery patrol includes `bd gate check --type=gh`\n- Uses `gh` CLI to check status\n- Resolved gates close automatically\n\n## Implementation\n1. Add GitHub gate check to mol-refinery-patrol.formula.toml\n2. `bd gate check --type=gh:run` calls `gh run view \u003cid\u003e --json status`\n3. `bd gate check --type=gh:pr` calls `gh pr view \u003cid\u003e --json state,merged`\n4. Success states close gate, failure states escalate\n\n## Acceptance Criteria\n- [ ] `bd gate check --type=gh` works for both run and pr\n- [ ] Refinery patrol runs GitHub check each cycle\n- [ ] Successful workflow/merged PR closes gate\n- [ ] Failed workflow/closed-unmerged PR escalates","status":"closed","priority":2,"issue_type":"task","assignee":"beads/polecats/jasper","created_at":"2026-01-02T09:55:42Z","created_by":"mayor","updated_at":"2026-01-02T20:48:59Z","closed_at":"2026-01-02T20:48:59Z","dependencies":[{"issue_id":"bd-oos3","depends_on_id":"bd-mcva","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-oslm","title":"Leaky abstraction: internal/rpc/ imports storage/sqlite directly","description":"attached_molecule: bd-wisp-b3z\nattached_at: 2026-01-27T04:09:51Z\ndispatched_by: beads/crew/emma\n\n**Found in:** internal/rpc/server_compact.go, server_issues_epics.go, server_export_import_auto.go\n\n**Issue:** RPC layer has direct type assertions to `*sqlite.SQLiteStorage`:\n- server_compact.go:29,244 - Type assertion for compact features\n- server_issues_epics.go:933,1645,2343 - Type assertion for batch delete, labels batch\n- server_export_import_auto.go:273,462 - Type assertion for export features\n\n**Impact:** Dolt backend cannot use these features. Code fails silently with \"requires SQLite storage\" errors.\n\n**Recommendation:** Either:\n1. Add these methods to Storage interface (if Dolt should support them)\n2. Create a \"CompactableStorage\" extended interface\n3. Document SQLite-only features clearly\n\n**Severity:** Medium - affects feature parity between backends","status":"hooked","priority":2,"issue_type":"task","assignee":"beads/polecats/opal","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:30Z","created_by":"beads/crew/darcy","updated_at":"2026-01-27T04:09:51Z","dependencies":[{"issue_id":"bd-oslm","depends_on_id":"bd-ats9.1","type":"blocks","created_at":"2026-01-26T19:50:25Z","created_by":"beads/crew/darcy"},{"issue_id":"bd-oslm","depends_on_id":"bd-wisp-b3z","type":"blocks","created_at":"2026-01-26T20:09:49Z","created_by":"beads/crew/emma"}]}
{"id":"bd-ot1qk","title":"Add 'source_system' field for multi-system federation","description":"dispatched_by: beads/crew/emma\n\nAdd string field identifying which system/adapter created this issue. Enables federation across multiple orchestrators or external systems (GitHub, Jira, etc).\n\nField name options:\n- source_system (neutral)\n- adapter_id (implies adapter pattern)\n- origin (simple)\n\nDefault: could be derived from repo config or left empty for local-only beads.\n\nThis is generic infrastructure for any multi-system scenario, not specific to any particular protocol.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/grip","created_at":"2026-01-11T00:34:07Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T03:32:04Z","closed_at":"2026-01-11T03:32:04Z","dependencies":[{"issue_id":"bd-ot1qk","depends_on_id":"bd-imi7w","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-ou35","title":"Opt-in template validation for issues","description":"## Summary\n\nAdd optional validation that issues include required sections based on type, without making it mandatory by default.\n\n## Background\n\nGH#821 proposed mandatory template validation, but that's too draconian for quick capture workflows. Instead, provide opt-in validation through multiple mechanisms.\n\n## Design\n\n### 1. `bd lint` command\n\nCheck issues for missing recommended sections:\n\n```bash\nbd lint              # Lint all open issues\nbd lint bd-xxx       # Lint specific issue\nbd lint --fix        # Interactive: prompt to add missing sections\n```\n\nOutput:\n```\nbd-abc [bug]: Missing \"## Steps to Reproduce\"\nbd-def [task]: Missing \"## Acceptance Criteria\"\n\n2 issues with warnings\n```\n\n### 2. `--validate` flag on `bd create`\n\nOpt-in strict mode at creation time:\n\n```bash\nbd create -t bug --validate -d \"...\"  # Fails if missing required sections\nbd create -t bug -d \"...\"             # Succeeds (current behavior)\n```\n\n### 3. Section requirements by type\n\n| Type | Recommended Sections |\n|------|---------------------|\n| Bug | Steps to Reproduce, Acceptance Criteria |\n| Task/Feature | Acceptance Criteria |\n| Epic | Success Criteria |\n| Chore/Message | None |\n\nNote: \"Workaround\" dropped from GH#821 - not always applicable.\n\n### 4. Config option (future)\n\n```json\n// .beads/config.json\n{\n  \"validation\": {\n    \"on_create\": \"warn\" | \"error\" | \"none\",\n    \"on_sync\": \"warn\" | \"error\" | \"none\"\n  }\n}\n```\n\n### 5. Hook integration (future)\n\nPre-sync hook could run `bd lint` and warn/block based on config.\n\n## Implementation Order\n\n1. Add `RequiredSections()` to IssueType (internal/types)\n2. Add `ValidateTemplate()` function (internal/validation)\n3. Implement `bd lint` command\n4. Add `--validate` flag to `bd create`\n5. (Future) Config file support\n6. (Future) Hook integration\n\n## Acceptance Criteria\n\n- [ ] `bd lint` reports missing sections without blocking\n- [ ] `bd lint \u003cid\u003e` works on single issue\n- [ ] `bd create --validate` enforces sections\n- [ ] `bd create` without flag works as today\n- [ ] Clear, actionable error messages\n\n## References\n\n- GH#821: Original proposal (will close referencing this epic)","status":"closed","priority":3,"issue_type":"epic","created_at":"2026-01-01T19:18:05Z","created_by":"beads/crew/grip","updated_at":"2026-01-04T23:22:09Z","closed_at":"2026-01-02T03:25:10Z","work_type":"mutex"}
{"id":"bd-ov1u","title":"Clean repo cruft: bd_new, @AGENTS.md, state.json","description":"Remove tracked cruft:\n- git rm bd_new (31MB old binary)\n- git rm @AGENTS.md (duplicate, was 'removed' but still tracked)\n- Add state.json to .gitignore, git rm --cached state.json\n- Consider moving history/EPHEMERAL_MOLECULES_DESIGN.md to docs/ or removing","status":"closed","priority":2,"issue_type":"chore","assignee":"beads/polecats/obsidian","created_at":"2026-01-01T19:09:50Z","created_by":"mayor","updated_at":"2026-01-01T19:12:22Z","closed_at":"2026-01-01T19:12:22Z","work_type":"mutex"}
{"id":"bd-ovypp","title":"Review \u0026 merge PR #1023: MCP custom issue types fix","description":"dispatched_by: beads/crew/emma\n\n## PR Review Task\n\n**PR:** https://github.com/steveyegge/beads/pull/1023\n**Author:** marvin-bitterlich\n\n## Summary\nFix Pydantic validation errors when MCP lists issues with custom types (agent, molecule, event, convoy).\n\n## Changes\n- Change IssueType and IssueStatus from Literal to str in models.py\n- Update parameter descriptions in server.py and tools.py\n- Bump version in uv.lock from 0.34.0 to 0.47.0\n\n## Review Checklist\n1. Pull branch locally: `gh pr checkout 1023 --repo steveyegge/beads`\n2. Run tests: `go test ./... \u0026\u0026 cd integrations/beads-mcp \u0026\u0026 uv run pytest`\n3. Verify MCP works with custom types\n4. If all good, merge: `gh pr merge 1023 --repo steveyegge/beads --squash`\n\n## Classification\nEasy-win: Clear bug fix, minimal changes, well-documented reasoning.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:17:30Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T02:46:14Z","closed_at":"2026-01-12T02:46:14Z","work_type":"mutex"}
{"id":"bd-p76kv","title":"bd list can hang indefinitely due to missing timeouts","description":"dispatched_by: gastown/crew/max\n\n## Problem\n\nWhen `bd list` hangs, it can block forever due to missing timeouts at multiple layers:\n\n### 1. No timeout in gastown's `runBdCommand` \n**File:** `internal/mail/bd.go:42-54`\n```go\ncmd := exec.Command(\"bd\", args...)\nif err := cmd.Run(); err != nil {  // Waits forever!\n```\nIf `bd` hangs for any reason, gt commands hang forever.\n\n### 2. No timeout in RPC request processing (beads daemon)\n**File:** `internal/rpc/server_routing_validation_diagnostics.go:262-264`\n```go\nfunc (s *Server) reqCtx(_ *Request) context.Context {\n    return context.Background()  // No deadline!\n}\n```\nIf a database query hangs, the RPC handler hangs forever.\n\n### 3. Mutex starvation potential\n`SearchIssues` takes a read lock on `reconnectMu`, while `reconnect()` takes a write lock. With Go's RWMutex, if there's a steady stream of readers, the writer can starve indefinitely.\n\n## Evidence\n\nObserved stuck processes running for 13+ hours:\n```\nbd list --type message --label cc:mayor/ --status open --json\nbd list --type message --label cc:mayor --status open --json\n```\n\nThe SQLite `busy_timeout` (30s) should have caused failures, not hangs. The processes were likely stuck on the Go `reconnectMu` mutex or a blocked daemon.\n\n## Proposed Fixes\n\n1. **Add timeout to daemon request processing** - Use `context.WithTimeout` in `reqCtx()` (e.g., 60 seconds)\n2. **Consider request timeout propagation** from client to server\n3. **Review reconnectMu usage** for potential starvation scenarios\n\nNote: The gastown side (`runBdCommand`) also needs a fix, but that's a separate repo.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/dave","created_at":"2026-01-10T19:56:35Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T07:44:37Z","closed_at":"2026-01-11T07:44:37Z","work_type":"mutex"}
{"id":"bd-p7r8a","title":"Implement standing orders contextual display (Option A)","description":"## Task\nImplement Option A for standing orders display - contextual prominence based on hooked vs idle state.\n\n## What to implement in prime.go checkStandingOrders():\n\n### When IDLE (no hooked work):\nStanding orders are the directive - prominent, actionable:\n```\n## 🪝 STANDING ORDERS\n\nYou have 1 standing order(s) - persistent directives for your role:\n\n  • PR Sheriff Standing Orders (hq-pr-sheriff)\n      ## Role: PR Sheriff (Town-Level)\n      Review incoming PRs across all repos...\n\n**Execute your standing orders now.** Run: `bd show hq-pr-sheriff`\n```\n\n### When HOOKED (has work):\nStanding orders shown as reference only, less prominent:\n```\n📜 Standing orders (for reference - complete hooked work first):\n  • PR Sheriff Standing Orders (hq-pr-sheriff)\n```\n\n## Implementation approach:\n1. Modify checkStandingOrders() to accept a `hasHookedWork bool` parameter\n2. Change display format based on that flag\n3. Update the call site in runPrime() to pass hasSlungWork\n\n## Key files:\n- /Users/stevey/gt/gastown/mayor/rig/internal/cmd/prime.go (lines 765-860)\n\n## Notes:\n- hq-k5rlof was renamed to hq-pr-sheriff by crew/max\n- Also filed bd-5xpoq for showing standing orders in gt hook output (separate task)\n- Current implementation works, just needs display mode change","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-16T22:30:53Z","created_by":"beads/crew/emma","updated_at":"2026-01-16T22:48:20Z","closed_at":"2026-01-16T22:48:20Z","work_type":"mutex"}
{"id":"bd-par1","title":"doctor: improve messaging for detection-only hook managers","description":"When bd doctor detects hook managers we can't fully check (pre-commit, overcommit, yorkie, simple-git-hooks), the current warning suggests they're broken. Change to informational: 'pre-commit detected, cannot verify bd integration' rather than implying misconfiguration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-06T03:19:09Z","created_by":"beads/crew/giles","updated_at":"2026-01-06T05:06:06Z","closed_at":"2026-01-06T05:06:06Z","work_type":"mutex"}
{"id":"bd-pbcie","title":"Review and merge PR #1037: Ensure daemon lock dir exists (fixes crash)","description":"dispatched_by: beads/crew/emma","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T00:35:32Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T00:38:47Z","closed_at":"2026-01-13T00:38:47Z","work_type":"mutex"}
{"id":"bd-peitc","title":"Review and merge PR #1054: bump actions/setup-node v4→v6","description":"dispatched_by: beads/crew/emma\n\n## Easy-win PR Review\n\nPR: https://github.com/steveyegge/beads/pull/1054\nType: Dependabot dependency bump (GitHub Actions)\nChange: actions/setup-node v4 → v6\n\n## Task\n1. Review the PR diff: `gh pr diff 1054 --repo steveyegge/beads`\n2. Check CI status: `gh pr checks 1054 --repo steveyegge/beads`\n3. If CI passes and diff looks safe, approve and merge:\n   `gh pr review 1054 --repo steveyegge/beads --approve`\n   `gh pr merge 1054 --repo steveyegge/beads --squash`\n4. Close this bead when done\n\n## Notes\n- This is a major version bump but setup-node is a well-maintained GitHub action\n- Breaking changes are documented in release notes (automatic caching behavior)","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T03:28:32Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T03:41:27Z","closed_at":"2026-01-13T03:41:27Z","work_type":"mutex"}
{"id":"bd-pion2","title":"Make incremental export thresholds configurable","description":"The incremental export thresholds are currently hardcoded:\n\n  incrementalThreshold = 1000      // min issues to consider incremental\n  incrementalDirtyRatio = 0.20     // max dirty ratio for incremental\n\nThese work well as defaults but some repos may benefit from different values:\n- Repos with very fast storage might want higher thresholds\n- Repos with slow I/O might want lower thresholds\n\nProposed: Add config options:\n  sync.incremental_threshold: 1000\n  sync.incremental_dirty_ratio: 0.20\n\nLocation: cmd/bd/sync_export.go (constants at top)\n\nImpact: Low - current defaults are reasonable for most cases","status":"open","priority":4,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:07:23Z","created_by":"beads/crew/lydia","updated_at":"2026-01-21T03:07:23Z","work_type":"mutex"}
{"id":"bd-piywi","title":"Review PR #953: Fix --due/--defer in daemon mode","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #953 (steveyegge/beads)\n\nPR: https://github.com/steveyegge/beads/pull/953\nAuthor: peterkc\nFixes: #952, #950\n\nFixes daemon mode silently ignoring --due and --defer flags.\n- gh pr view 953 --repo steveyegge/beads\n- gh pr diff 953 --repo steveyegge/beads\n- If good: gh pr merge 953 --repo steveyegge/beads --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","created_at":"2026-01-08T22:30:25Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:37:02Z","closed_at":"2026-01-08T22:37:02Z","work_type":"mutex"}
{"id":"bd-pnx2","title":"Epic: Bulletproof sync atomicity (GH#885)","description":"Comprehensive fix for GH#885: Sync failure leaves local JSONL stale. Problem: When bd sync fails mid-operation, JSONL/SQLite/git can diverge causing bd ready to show wrong tasks. Solution: Multiple layers - 1) Core fix: Defer SQLite metadata until after git commit, 2) Pre-flight: Detect uncommitted changes, 3) Recovery: bd doctor check, 4) Defense: Rollback on failure.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-04T21:53:45Z","created_by":"beads/crew/emma","updated_at":"2026-01-05T07:07:51Z","closed_at":"2026-01-05T07:07:51Z","work_type":"mutex"}
{"id":"bd-pr-sheriff","title":"PR Sheriff (reference to hq-pr-sheriff)","description":"## Local Reference to Town-Level PR Sheriff\n\nThis is a hookable local reference. Full standing orders at: **hq-pr-sheriff**\n\nHook this bead to activate PR Sheriff duties:\n```bash\ngt hook bd-pr-sheriff\n```\n\nThen check the town bead for current instructions:\n```bash\nbd show hq-pr-sheriff\n```","status":"hooked","priority":1,"issue_type":"task","assignee":"beads/crew/emma","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T20:58:11Z","created_by":"beads/crew/emma","updated_at":"2026-01-18T18:51:33Z","labels":["gt:sheriff"],"comments":[{"id":9,"issue_id":"bd-pr-sheriff","author":"beads/crew/emma","text":"Converting to local reference for hookable standing orders","created_at":"2026-01-18T18:51:12Z"}],"work_type":"mutex"}
{"id":"bd-pubxj","title":"Review PR #1226: fix types.custom from config.yaml","description":"## PR Review Task\n\nReview and merge easy-win PR from beads repo.\n\n**PR**: https://github.com/steveyegge/beads/pull/1226\n**Title**: fix: load types.custom from config.yaml during init auto-import\n**Author**: scbrown\n**Changes**: +144 / -3\n\n## Why it's an easy-win\n- Bug fix with clear reproduction and solution\n- Has tests\n- Fixes fresh clone issue with custom types\n\n## Action\n1. Review the diff: gh pr diff 1226 --repo steveyegge/beads\n2. If code looks good, approve and merge\n3. Mark this bead done when complete","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T06:25:58Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T03:47:32Z","closed_at":"2026-01-22T03:47:32Z","work_type":"mutex"}
{"id":"bd-pwjkr","title":"Review \u0026 merge PR #1013: fix(validation) hyphenated prefixes","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #1013: https://github.com/steveyegge/beads/pull/1013\n\n## Summary\nFixes ValidateIDFormat to support hyphenated prefixes like 'bead-me-up-3e9'. Uses utils.ExtractIssuePrefix instead of naive first-hyphen splitting.\n\n## Changes\n- internal/validation/bead.go - Use ExtractIssuePrefix \n- internal/validation/bead_test.go - Add comprehensive test cases\n\n## Review Checklist\n- [ ] Pull the branch locally\n- [ ] Run tests: go test ./internal/validation/...\n- [ ] Verify hyphenated prefix tests pass\n- [ ] Merge with gh pr merge 1013 --repo steveyegge/beads --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/grip","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:14:26Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T02:17:42Z","closed_at":"2026-01-12T02:17:42Z","work_type":"mutex"}
{"id":"bd-q2b8","title":"Review PR #916: fix(doctor) metadata table query","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #916 from aaron-sangster.\n\nPR: https://github.com/anthropics/beads/pull/916\nChanges: +48/-7, 2 files (cmd/bd/doctor/sync_divergence.go, test)\n\nFix: query metadata table instead of config for last_import_time\n\nReview checklist:\n- [ ] Code quality and style\n- [ ] Tests pass\n- [ ] Logic is correct\n- [ ] Approve or request changes","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-06T03:09:17Z","created_by":"beads/crew/emma","updated_at":"2026-01-06T03:11:45Z","closed_at":"2026-01-06T03:11:45Z","work_type":"mutex"}
{"id":"bd-q68i8","title":"Add --rig flag to bd search command","description":"**Tried:** `bd search \"dolt\" --rig beads`\n**Got:** `Error: unknown flag: --rig`\n**Expected:** Search within beads rig from any directory\n**Workaround:** `cd ~/gt/beads \u0026\u0026 bd search \"dolt\"`\n\nThe `--rig` flag exists on `bd create` for cross-rig operations. It should also work on `bd search`, `bd list`, and other read commands. Agents frequently need to query other rigs without changing directories.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-24T03:23:18Z","created_by":"gastown/crew/joe","updated_at":"2026-01-24T03:23:18Z","labels":["desire-path"],"work_type":"mutex"}
{"id":"bd-qdsx","title":"Support daemon.auto_commit and daemon.auto_push in config.yaml (GH#871)","description":"Allow team-wide auto-sync settings via config.yaml instead of SQLite. This enables teams to share auto-commit/auto-push settings through version control.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-04T18:38:10Z","created_by":"beads/crew/wolf","updated_at":"2026-01-04T18:42:33Z","closed_at":"2026-01-04T18:42:33Z","work_type":"mutex"}
{"id":"bd-qij92","title":"Deacon Patrol","description":"Mayor's daemon patrol loop for handling callbacks, health checks, and cleanup.","status":"closed","priority":2,"issue_type":"molecule","created_at":"2026-01-08T05:42:09Z","created_by":"gastown/crew/george","updated_at":"2026-01-10T05:15:43Z","closed_at":"2026-01-10T05:15:43Z","work_type":"mutex"}
{"id":"bd-qj9nc","title":"Hook registry and installation system for Gas Town","description":"## Summary\n\nImplement a hook registry system for declarative management of Claude Code hooks across Gas Town roles and worktrees.\n\n## Decisions Made\n\n1. **TOML over YAML** - registry.toml for human readability\n2. **Option B: Two-level** - Town registry + optional rig registries\n3. **Git-tracked, not hidden** - ~/gt/hooks/ not ~/.hooks/\n4. **Not beads (for now)** - Start simple, migrate to beads later if federation needs it\n5. **Installation generates settings.json** - Registry is source of truth, settings.json is derived\n\n## Current State (2026-01-20)\n\n### Implemented\n- ~/gt/hooks/registry.toml - Hook definitions (2 active, 3 future stubs)\n- ~/gt/hooks/scripts/block-clone-into-town.sh - Clone guard script\n- gt tap guard pr-workflow - PR/branch blocking command\n- All 16 crew worktrees have pr-workflow-guard installed manually\n\n### Not Yet Implemented\n- gt hooks command family\n- Automatic installation from registry\n- Rig-level registries\n\n## Registry Format\n\n```toml\n[hooks.pr-workflow-guard]\ndescription = \"Block PRs and feature branches for Gas Town agents\"\nevent = \"PreToolUse\"\nmatchers = [\"Bash(gh pr create*)\", \"Bash(git checkout -b*)\", \"Bash(git switch -c*)\"]\ncommand = \"gt tap guard pr-workflow\"\nroles = [\"crew\", \"polecat\"]\nscope = \"rig\"\nenabled = true\n```\n\n## Commands to Implement\n\n```\ngt hooks list                           # Show registry contents\ngt hooks list --installed               # Show what's active where\ngt hooks install \u003cname\u003e                 # Install to current worktree\ngt hooks install \u003cname\u003e --role crew     # Install to all crew in current rig\ngt hooks install \u003cname\u003e --role crew --all-rigs  # Install to all crew everywhere\ngt hooks uninstall \u003cname\u003e               # Remove from current worktree\ngt hooks status                         # Summary: what's installed where\ngt hooks sync                           # Regenerate all settings.json from registry\n```\n\n## Directory Structure\n\n```\n~/gt/hooks/\n├── registry.toml           # Town-level hook definitions\n└── scripts/                # Hook implementation scripts\n    └── block-clone-into-town.sh\n\n~/gt/gastown/hooks/         # (future) Rig-specific hooks\n└── registry.toml           # Extends/overrides town hooks\n\n~/gt/gastown/crew/jane/.claude/\n└── settings.json           # Generated from registry + role\n```\n\n## Implementation Notes\n\n- Read registry with github.com/BurntSushi/toml\n- Generate settings.json with proper JSON escaping\n- Handle PATH injection for gt/bd commands\n- Support --dry-run flag to preview changes\n- Consider Claude Code future recursive lookup (design for it)\n\n## Related\n\n- ~/gt/docs/HOOKS.md - Claude Code hook reference\n- bd-lpg33 - Original tracking bead for hooks WIP","notes":"Implemented hook registry and install command. See commits d0e49a21 (gastown) and 96cdc9f31 (stevey-gt).","status":"closed","priority":2,"issue_type":"epic","assignee":"beads/crew/lizzy","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T00:00:56Z","created_by":"beads/crew/jane","updated_at":"2026-01-22T01:40:35Z","closed_at":"2026-01-22T01:40:35Z","work_type":"mutex"}
{"id":"bd-qn5e2","title":"Review and merge PR #1060: bump fastmcp v2.14.1→v2.14.3","description":"dispatched_by: beads/crew/emma\n\n## Easy-win PR Review\n\nPR: https://github.com/steveyegge/beads/pull/1060\nType: Dependabot dependency bump (Python pip)\nChange: fastmcp 2.14.1 → 2.14.3\n\n## Task\n1. Review the PR diff: `gh pr diff 1060 --repo steveyegge/beads`\n2. Check CI status: `gh pr checks 1060 --repo steveyegge/beads`\n3. If CI passes and diff looks safe, approve and merge:\n   `gh pr review 1060 --repo steveyegge/beads --approve`\n   `gh pr merge 1060 --repo steveyegge/beads --squash`\n4. Close this bead when done\n\n## Notes\n- Patch version bump with bug fixes (HTTP timeout, OAuth token storage, Redis keys)","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T03:28:38Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T03:38:46Z","closed_at":"2026-01-13T03:38:46Z","work_type":"mutex"}
{"id":"bd-qno8m","title":"Merge: obsidian-mk99aezw","description":"branch: polecat/obsidian-mk99aezw\ntarget: main\nsource_issue: obsidian-mk99aezw\nrig: beads\nagent_bead: bd-beads-polecat-obsidian\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T04:53:49Z","created_by":"beads/polecats/obsidian","updated_at":"2026-01-11T04:54:58Z","closed_at":"2026-01-11T04:54:58Z","labels":["gt:merge-request"],"work_type":"mutex"}
{"id":"bd-qok6","title":"Migration guide: SQLite to Dolt","description":"Per DOLT-STORAGE-DESIGN-V3.md Part 6, document migration path:\n  bd config set backend dolt\n  bd migrate sqlite-to-dolt\n\nInclude:\n- When to migrate\n- What happens during migration\n- Federation still via JSONL (no workflow change)","status":"open","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:45:26Z","created_by":"mayor","updated_at":"2026-01-27T02:45:26Z","labels":["docs"]}
{"id":"bd-quw1","title":"Polecat phase handoff: gt done --phase-complete","description":"Add phase handoff protocol for polecats hitting gate steps.\n\n## Current Behavior\nPolecat runs all steps, blocks on external waits, times out.\n\n## New Behavior\n1. Polecat completes work up to gate step\n2. Polecat runs: gt done --phase-complete\n3. This signals: 'phase done, molecule awaiting gate'\n4. Witness recycles polecat (context freed)\n5. When gate closes, Witness dispatches new polecat\n6. New polecat continues from step after gate\n\n## Implementation\n- Add --phase-complete flag to gt done\n- Witness tracks molecules in 'awaiting-gate' state\n- When gate closes (via bd gate resolve), molecule unblocks\n- Dispatch logic resumes molecule with new polecat\n\n## Acceptance Criteria\n- [ ] gt done --phase-complete implemented\n- [ ] Witness tracks awaiting-gate molecules\n- [ ] Gate closure triggers molecule resume\n- [ ] New polecat picks up from correct step","notes":"Beads changes committed (9269325e):\n- bd gate add-waiter \u003cgate-id\u003e \u003cwaiter\u003e\n- bd gate show \u003cgate-id\u003e --json\n- Waiters field in RPC protocol\n\nGastown changes written but need separate commit (bd-gxb4):\n- gt done --phase-complete --gate flag\n- Witness PHASE_COMPLETE handler\n- AddGateWaiter in beads wrapper\n\nBlocked on bd-gxb4 for gastown commit.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:27:42Z","created_by":"mayor","updated_at":"2026-01-04T23:22:08Z","closed_at":"2026-01-03T00:46:56Z","dependencies":[{"issue_id":"bd-quw1","depends_on_id":"bd-4k3c","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-quw1","depends_on_id":"bd-d1n1","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-quw1","depends_on_id":"bd-gxb4","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-qv5i5","title":"Help merge PR #1242: WSL2 SQLite WAL mode fix","description":"dispatched_by: beads/crew/emma","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/jane","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T00:47:53Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T00:54:41Z","closed_at":"2026-01-22T00:54:41Z","work_type":"mutex"}
{"id":"bd-qv8f9","title":"Add logging for silent failures in cost tracking","description":"dispatched_by: mayor\n\n## Problem\n\nSeveral error paths in cost tracking silently continue without logging:\n- Line 1014: bd show failure\n- Line 1019: JSON unmarshal failure  \n- Line 1037: Payload unmarshal failure\n- Line 1147: bd show failure in deletion\n\nThis makes debugging difficult when costs are not being tracked correctly.\n\n## Location\n\ninternal/cmd/costs.go - multiple locations\n\n## Solution\n\nAdd debug logging (respecting --verbose flag) for these silent failures.","status":"closed","priority":3,"issue_type":"task","assignee":"gastown/polecats/furiosa","created_at":"2026-01-09T06:55:25Z","created_by":"mayor","updated_at":"2026-01-09T08:41:00Z","closed_at":"2026-01-09T08:41:00Z","comments":[{"id":10,"issue_id":"bd-qv8f9","author":"beads/polecats/jasper","text":"The file path in the description (internal/cmd/costs.go) doesn't exist in beads/polecats/jasper. The costs.go file is located in the gastown project at /Users/stevey/gt/gastown/crew/*/internal/cmd/costs.go. This task appears to be assigned to the wrong repo - should likely be assigned to gastown instead.","created_at":"2026-01-09T08:24:45Z"}],"work_type":"mutex"}
{"id":"bd-r0b2","title":"Update user docs for backend selection","description":"Per DOLT-STORAGE-DESIGN-V3.md, document:\n- SQLite vs Dolt backend choice\n- When each is appropriate (see 'When SQLite Is Enough' and 'When to Upgrade to Dolt')\n- Configuration options (bd config set backend dolt)","status":"closed","priority":3,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:45:25Z","created_by":"mayor","updated_at":"2026-01-27T03:47:48Z","closed_at":"2026-01-27T03:47:48Z","close_reason":"Duplicate of bd-aed050 (BACKENDS.md documentation)","labels":["docs"]}
{"id":"bd-r24e","title":"Gate-aware beads-release.formula v2","description":"Rewrite beads-release.formula.toml with gates for async waits.\n\n## Design\nSee ultrathink analysis in bd-d1n1 epic.\n\n## Key Changes\n1. Split into phases: Prep, Gate, Verify, Install\n2. await-ci step with gate.type=gh:run\n3. Parallel verification after gate (verify-github, verify-npm, verify-pypi)\n4. Fan-in at local-install\n\n## Formula Structure\n```toml\n# Phase 1: Prep \u0026 Push\n[[steps]]\nid = \"push-tag\"\n...\n\n# Gate: CI Completion  \n[[steps]]\nid = \"await-ci\"\nneeds = [\"push-tag\"]\n[steps.gate]\ntype = \"gh:run\"\nworkflow = \"release.yml\"\ntimeout = \"30m\"\n\n# Phase 2: Verify (parallel)\n[[steps]]\nid = \"verify-github\"\nneeds = [\"await-ci\"]\n...\n```\n\n## Acceptance Criteria\n- [ ] Formula uses gate syntax\n- [ ] Phases cleanly separated\n- [ ] Parallel verification works\n- [ ] Successfully releases beads","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:27:42Z","created_by":"mayor","updated_at":"2026-01-04T23:22:08Z","closed_at":"2026-01-03T00:52:15Z","dependencies":[{"issue_id":"bd-r24e","depends_on_id":"bd-d1n1","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-r24e","depends_on_id":"bd-quw1","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-r24e","depends_on_id":"bd-z6kw","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-rig-beads","title":"beads","description":"Rig identity bead for beads.\n\nrepo: https://github.com/steveyegge/beads\nprefix: bd\nstate: active","status":"open","priority":2,"issue_type":"rig","assignee":"beads/crew/wolf","created_at":"2026-01-08T20:19:32Z","created_by":"gastown/polecats/furiosa","updated_at":"2026-01-10T07:02:03Z","work_type":"mutex"}
{"id":"bd-rjuu6","title":"gt mail mark-read: desire path for marking messages read without archiving","description":"dispatched_by: beads/crew/emma\n\n## Context\n\nAgents naturally try `gt mail mark-read \u003cid\u003e` after reading a message. Currently this fails:\n\n```\nError: unknown command \"mark-read\" for \"gt mail\"\n```\n\n## Desire Paths Pattern\n\nWhen agents consistently try a command that doesn't exist, that's a signal the API should support it. This is the 'desire paths' approach to agent UX - let natural agent behavior inform the interface.\n\n## Use Case\n\n- Agent reads a message with `gt mail read \u003cid\u003e`\n- Message content is acknowledged but agent wants to keep it in inbox (not archive)\n- Agent tries `gt mail mark-read \u003cid\u003e` - fails\n- Currently no way to mark as read without archiving\n\n## Proposed Solution\n\nAdd `gt mail mark-read \u003cid\u003e` that:\n1. Marks message as read (removes unread indicator)\n2. Keeps message in inbox (doesn't archive)\n\nAlternative: `gt mail read \u003cid\u003e` could auto-mark as read (may already do this but the inbox display doesn't reflect it).","status":"closed","priority":2,"issue_type":"feature","assignee":"beads/crew/fang","created_at":"2026-01-11T07:56:27Z","created_by":"beads/crew/emma","updated_at":"2026-01-11T08:03:50Z","closed_at":"2026-01-11T08:03:50Z","work_type":"mutex"}
{"id":"bd-s2xpf","title":"gt prime --state should support --json output","description":"dispatched_by: mayor\n\nThe SessionState struct has JSON tags but outputState() only outputs plain text key:value format. For consistency with other gt commands and machine parsing, --state should support --json.\n\nCurrent:\n  state: normal\n  role: mayor\n\nWith --json:\n  {\"state\": \"normal\", \"role\": \"mayor\"}\n\nLocation: gastown/mayor/rig/internal/cmd/prime.go:1805-1826","status":"closed","priority":3,"issue_type":"task","assignee":"beads/polecats/ruby","created_at":"2026-01-10T08:45:49Z","created_by":"mayor","updated_at":"2026-01-13T03:42:32Z","closed_at":"2026-01-13T03:42:32Z","work_type":"mutex"}
{"id":"bd-sabmf","title":"Fix: bd doctor false positive on thin shim hook (GH#969)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #969. Doctor incorrectly reports 'pre-commit not calling bd' for valid thin shim hook.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/giles","created_at":"2026-01-10T06:20:19Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T06:58:09Z","closed_at":"2026-01-10T06:58:09Z","work_type":"mutex"}
{"id":"bd-scbxh","title":"Add 'bd children \u003cid\u003e' command to list child beads","description":"Tried: bd children hq-ew1mbr\nGot: Error: unknown command \"children\" for \"bd\"\nExpected: List all beads with parent=hq-ew1mbr\nWorkaround: bd list --parent hq-ew1mbr (if that exists) or grep through beads\n\nThe 'children' command is a natural complement to 'bd show' - after viewing an epic, the obvious next action is listing its child tasks.\n\n(Moved from hq-jv0o7)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:37:16Z","created_by":"mayor","updated_at":"2026-01-22T03:43:10Z","closed_at":"2026-01-22T03:43:10Z","labels":["desire-path"],"work_type":"mutex"}
{"id":"bd-sobtn","title":"Merge approved PR gastown#795: fix(sling) auto-attach mol-polecat-work","description":"dispatched_by: beads/crew/emma\n\nPR is already approved by steveyegge. Just needs to be merged. URL: https://github.com/steveyegge/gastown/pull/795","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/darcy","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T04:00:45Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T04:06:27Z","closed_at":"2026-01-21T04:06:27Z","work_type":"mutex"}
{"id":"bd-sxlt","title":"GHI #885: Sync failure leaves local JSONL stale, causing inconsistent state","description":"GitHub Issue #885: Sync failure leaves local JSONL stale, causing inconsistent state across worktrees\n\nhttps://github.com/steveyegge/beads/issues/885","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-04T19:22:17Z","created_by":"mayor","updated_at":"2026-01-04T23:22:08Z","closed_at":"2026-01-04T19:30:33Z","work_type":"mutex"}
{"id":"bd-t17wa","title":"Fix: v0.46.0 breaks Gas Town type extraction (GH#941)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #941. Type extraction removes agent/role/convoy types that Gas Town still uses.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/giles","created_at":"2026-01-10T06:20:16Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T06:29:18Z","closed_at":"2026-01-10T06:29:18Z","work_type":"mutex"}
{"id":"bd-t5o8i","title":"Configure Gas Town types as custom beads types","description":"## Background\n\nGas Town uses beads types that are currently built-in but will be moved to custom:\n- molecule, gate, convoy, merge-request, slot (system types)\n- agent, role, rig, event, message (agent types)\n\nThese are being removed from beads core (see beads repo bd-find4).\n\n## Tasks\n\n1. Add `types.custom` to all Gas Town rig configs (config.yaml):\n   ```yaml\n   types.custom: \"molecule,gate,convoy,merge-request,slot,agent,role,rig,event,message\"\n   ```\n\n2. Update Gas Town documentation to explain these custom types\n\n3. Coordinate timing with beads core change\n\n## External Dependency\n\nbeads repo: bd-find4 (beads core removes built-in types)","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T00:08:28Z","created_by":"beads/crew/wolf","updated_at":"2026-01-17T12:47:54Z","closed_at":"2026-01-17T12:47:54Z","labels":["architecture","tech-debt"],"work_type":"mutex"}
{"id":"bd-t7464","title":"Help merge PR #1228: Stabilize tree ordering","description":"dispatched_by: beads/crew/emma","notes":"PR #1228 was merged. Lint/Windows fixes were addressed independently on main.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/lizzy","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T00:47:54Z","created_by":"beads/crew/emma","updated_at":"2026-01-22T03:14:59Z","closed_at":"2026-01-22T03:14:59Z","work_type":"mutex"}
{"id":"bd-t7jq","title":"Add validation config support","description":"Future: Add .beads/config.json support for validation settings (on_create, on_sync: warn|error|none).","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-01T19:19:10Z","created_by":"beads/crew/grip","updated_at":"2026-01-04T23:22:09Z","closed_at":"2026-01-02T03:33:42Z","dependencies":[{"issue_id":"bd-t7jq","depends_on_id":"bd-gn5r","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-t7jq","depends_on_id":"bd-ou35","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-t8ven","title":"gt prime: validate mutually exclusive flags","description":"The --state flag returns early, making --dry-run and --explain have no effect when combined with it. Similarly, --hook has specific behaviors that may conflict.\n\nOptions:\n1. Error on invalid combinations (--state + --explain, --state + --dry-run)\n2. Document that --state is standalone and ignores other flags  \n3. Make flags compose (e.g., --state --explain shows state with explanations)\n\nCurrent behavior is silent - the extra flags are just ignored.\n\nLocation: gastown/mayor/rig/internal/cmd/prime.go:176-179","status":"closed","priority":4,"issue_type":"task","assignee":"gastown/polecats/dementus","created_at":"2026-01-10T08:46:05Z","created_by":"mayor","updated_at":"2026-01-10T09:03:32Z","closed_at":"2026-01-10T09:03:32Z","work_type":"mutex"}
{"id":"bd-t8x2","title":"Set up CI/CD for two binary builds (bd, bd-cgo)","description":"Per DOLT-STORAGE-DESIGN-V3.md, we need to build and distribute two binaries:\n- bd (default): SQLite + pure-Go Dolt, works everywhere\n- bd-cgo: SQLite + CGO Dolt, for performance-sensitive federation\n\nRequires setting up CI/CD to:\n1. Build both variants\n2. Run tests for each\n3. Publish both as release artifacts","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:44:55Z","created_by":"mayor","updated_at":"2026-01-27T02:44:55Z"}
{"id":"bd-t8x8","title":"Centralize ShouldExportJSONL() check in export functions","description":"**Summary**\nThe ShouldExportJSONL() check is scattered across calling code instead of centralized in the core export functions. This makes it easy to miss the check when new export paths are added.\n\n**Current state:**\n- sync.go correctly checks ShouldExportJSONL() at lines 517 and 721\n- daemon_sync.go does NOT check before calling exportToJSONLWithStore()\n- autoflush.go does NOT check before writing JSONL (bd-ixip)\n- create.go flushRoutedRepo() does NOT check (bd-a9ka)\n\n**Proposed fix:**\n1. Add ShouldExportJSONL() check to exportToJSONLWithStore() in daemon_sync.go\n2. Add check to exportToJSONLDeferred() in sync_export.go\n3. Add check to flushToJSONLWithState() in autoflush.go\n4. Add check to flushRoutedRepo() in create.go\n\n**Alternative:**\nCreate a single wrapper function that all JSONL export paths must go through, which enforces the check.\n\n**Related bugs:** bd-ixip, bd-a9ka, bd-u9yv","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:29Z","created_by":"beads/crew/elinor","updated_at":"2026-01-27T04:00:40Z","closed_at":"2026-01-27T04:00:40Z","close_reason":"Fixed in commit 6320e2a1. Added ShouldExportJSONL() check to all three locations: flushRoutedRepo(), flushToJSONLWithState(), exportToJSONLWithStore().","dependencies":[{"issue_id":"bd-t8x8","depends_on_id":"bd-ats9.2","type":"discovered-from","created_at":"2026-01-26T19:49:29Z","created_by":"beads/crew/elinor"}]}
{"id":"bd-test1","title":"Normal issue","status":"closed","priority":1,"issue_type":"task","created_at":"2024-01-01T00:00:00Z","updated_at":"2026-01-27T03:48:43Z","closed_at":"2026-01-27T03:48:43Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-tktq1","title":"Fix bd doctor false positive for sync_base.jsonl (GH#1021)","description":"dispatched_by: beads/crew/dave\n\nbd doctor warns about 'multiple JSONL files' when sync_base.jsonl exists, but this is an internal sync file that should be excluded from the check.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/emma","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T04:42:18Z","created_by":"beads/crew/dave","updated_at":"2026-01-12T04:44:37Z","closed_at":"2026-01-12T04:44:37Z","work_type":"mutex"}
{"id":"bd-tq3gx","title":"Review PR #16459: Fix broken doc link","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #16459 (anthropics/claude-code)\n\nPR: https://github.com/anthropics/claude-code/pull/16459\nAuthor: nelsonauner\nStatus: APPROVED by sarahdeaton\n\nTask: Verify the doc link fix is correct and merge if appropriate.\n- gh pr view 16459 --repo anthropics/claude-code\n- gh pr diff 16459 --repo anthropics/claude-code\n- If good: gh pr merge 16459 --repo anthropics/claude-code --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-08T22:20:04Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:29:36Z","closed_at":"2026-01-08T22:29:36Z","work_type":"mutex"}
{"id":"bd-txrv4","title":"Fix hierarchy.max-depth config ignored (GH#995)","description":"dispatched_by: mayor\n\nConfig setting hierarchy.max-depth is ignored - hardcoded to 3. See https://github.com/steveyegge/beads/issues/995","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-10T20:18:19Z","created_by":"mayor","updated_at":"2026-01-10T20:23:50Z","closed_at":"2026-01-10T20:23:50Z","labels":["bug"],"work_type":"mutex"}
{"id":"bd-u0fn","title":"Add validation for formula step completion","description":"Formula steps are prose instructions with no automatic validation. Consider:\n- Steps with ```bash``` blocks should capture exit codes\n- Verification steps should have machine-checkable assertions\n- Consider script gates that run validation commands\n\nRelated to bd-m8ew (gate discovery fix).","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-07T07:33:34Z","created_by":"beads/crew/dave","updated_at":"2026-01-07T07:33:34Z","dependencies":[{"issue_id":"bd-u0fn","depends_on_id":"bd-m8ew","type":"related","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-u7z1u","title":"Log errors in CommitExists instead of silently returning false","description":"In versioned.go:210-215, CommitExists() silently treats all non-ErrNoRows errors as 'commit doesn't exist':\n\n```go\nerr := s.db.QueryRowContext(ctx, query).Scan(\u0026dummy)\nif err != nil {\n    if err == sql.ErrNoRows {\n        return false, nil\n    }\n    // Other errors (e.g., commit not found) also mean commit doesn't exist\n    return false, nil\n}\n```\n\nThis could mask real database errors. Consider:\n1. Logging the error at debug level\n2. Or returning the error for truly unexpected cases (connection issues, etc.)\n\nLow priority since it doesn't affect correctness (falls back to full export).\n\nFiles: internal/storage/dolt/versioned.go","status":"open","priority":4,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:09:09Z","created_by":"beads/crew/darcy","updated_at":"2026-01-21T03:09:09Z","work_type":"mutex"}
{"id":"bd-u9a3n","title":"Witness Patrol","description":"Per-rig worker monitor patrol loop with progressive nudging.","status":"closed","priority":2,"issue_type":"molecule","created_at":"2026-01-08T05:42:14Z","created_by":"gastown/crew/george","updated_at":"2026-01-10T05:15:43Z","closed_at":"2026-01-10T05:15:43Z","work_type":"mutex"}
{"id":"bd-u9yv","title":"daemon_sync.go exports JSONL without checking ShouldExportJSONL()","description":"**Summary**\nexportToJSONLWithStore() in daemon_sync.go (lines 64-191) is called by performExport() and performSync() without checking ShouldExportJSONL(). This causes unwanted JSONL writes in dolt-native mode.\n\n**Affected code paths:**\n- daemon_sync.go:exportToJSONLWithStore() - the core function lacks the check\n- daemon_sync.go:performExport() (line 516) - calls exportToJSONLWithStore\n- daemon_sync.go:performSync() (line 832) - calls exportToJSONLWithStore\n\n**Root cause:**\nThe ShouldExportJSONL() check is only done in sync.go (lines 517, 721) but daemon operations bypass that code path.\n\n**Fix:**\nAdd ShouldExportJSONL() check at the start of exportToJSONLWithStore(), or in performExport/performSync before calling it.\n\n**Related:** bd-ixip, bd-a9ka show similar pattern","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/emma","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:49:20Z","created_by":"beads/crew/elinor","updated_at":"2026-01-27T04:00:26Z","closed_at":"2026-01-27T04:00:26Z","close_reason":"Fixed in commit 6320e2a1. Added ShouldExportJSONL() check to exportToJSONLWithStore().","dependencies":[{"issue_id":"bd-u9yv","depends_on_id":"bd-ats9.2","type":"discovered-from","created_at":"2026-01-26T19:49:19Z","created_by":"beads/crew/elinor"}]}
{"id":"bd-ucj8","title":"Rename wisp prefix from 'eph' to 'wisp'","description":"The wisp system uses 'eph' as the ID prefix segment (e.g., gt-eph-xxx) but should use 'wisp' (e.g., gt-wisp-xxx) for consistency with terminology.\n\n**Location:** cmd/bd/wisp.go:260-261\n```go\n// Use \"eph\" prefix for distinct visual recognition\nresult, err := spawnMolecule(ctx, store, subgraph, vars, \"\", actor, true, \"eph\")\n```\n\n**Fix:** Change \"eph\" to \"wisp\"\n\n**Also update:**\n- main_errors.go:100,107 - detection patterns for ephemeral IDs\n- Any tests expecting '-eph-' pattern\n- Documentation if it references the prefix\n\n**Migration:** Existing gt-eph-* wisps in databases will continue to work (they have ephemeral=true flag). New wisps will use gt-wisp-* prefix.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T04:10:54Z","created_by":"gastown/crew/gus","updated_at":"2026-01-02T07:55:44Z","closed_at":"2026-01-02T07:55:44Z","work_type":"mutex"}
{"id":"bd-ue0yx","title":"bd doctor: add jujutsu repo detection","description":"bd doctor should detect jujutsu repos and report:\n- Whether it's a pure jj or colocated jj+git repo\n- For colocated: verify hooks are installed correctly (jj mode)\n- For pure jj: remind about alias workaround\n\nThis helps users diagnose jj-related setup issues.\n\nRelated: hq-ew1mbr.12 (jujutsu support)","status":"open","priority":3,"issue_type":"feature","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:08:01Z","created_by":"beads/crew/lizzy","updated_at":"2026-01-21T03:08:01Z","work_type":"mutex"}
{"id":"bd-uepu","title":"Routing mode mismatch between bd config and gt expectations","description":"Town beads config.yaml has 'routing.mode: explicit' but gastown expects routes.jsonl for prefix-based routing. Need to clarify: What does explicit mode mean? Is routes.jsonl deprecated? Should gt use a different routing mechanism? Related to bd-xcs4.","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:50:58Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T03:50:58Z"}
{"id":"bd-uhg5q","title":"Ready issue","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T02:16:13Z","created_by":"beads/crew/wolf","updated_at":"2026-01-27T03:48:44Z","closed_at":"2026-01-27T03:48:44Z","close_reason":"Test artifact - cleaning up","work_type":"mutex"}
{"id":"bd-uncd","title":"Review PR #910: fix(sync) persist sync branch","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #910 from peterkc.\n\nPR: https://github.com/anthropics/beads/pull/910\nChanges: +89/-1, 2 files (internal/syncbranch/syncbranch.go, test)\n\nFix: persist sync branch to yaml and database\n\nReview checklist:\n- [ ] Code quality and style\n- [ ] Tests pass\n- [ ] Logic is correct\n- [ ] Approve or request changes","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","created_at":"2026-01-06T03:09:20Z","created_by":"beads/crew/emma","updated_at":"2026-01-06T03:12:10Z","closed_at":"2026-01-06T03:12:10Z","work_type":"mutex"}
{"id":"bd-usvv","title":"Defer SQLite metadata updates until after git commit succeeds","description":"Part of GH#885 fix: bulletproof sync atomicity.\n\nCurrently exportToJSONL() immediately:\n- Clears dirty flags in SQLite\n- Updates last_import_time metadata\n\nThis happens BEFORE git commit, so if commit fails, SQLite \"lies\" about sync state.\n\nFix: Move metadata updates to AFTER git commit succeeds:\n1. Export JSONL to disk (atomic file write)\n2. Stage and commit to git\n3. ONLY THEN clear dirty flags and update last_import_time\n\nKey files:\n- cmd/bd/sync_export.go:147-170 (premature updates)\n- cmd/bd/sync.go:555 (commit point)\n\nThis is the core fix for the atomicity gap.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T21:53:24Z","created_by":"beads/crew/emma","updated_at":"2026-01-04T23:22:09Z","closed_at":"2026-01-04T23:16:21Z","dependencies":[{"issue_id":"bd-usvv","depends_on_id":"bd-pnx2","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-uuo9","title":"Avoid double export when uncommitted JSONL detected","description":"In sync.go, when gitHasUncommittedBeadsChanges() detects uncommitted changes, we export at line 175. But the normal flow exports again at line 296.\n\nAdd a skip flag to avoid redundant work:\n- Set alreadyExported=true after pre-flight export\n- Skip later export if flag is set\n\nMinor optimization, not urgent.\n\nPart of GH#885 follow-up (bd-vd8e).","status":"closed","priority":3,"issue_type":"task","assignee":"beads/polecats/amber","created_at":"2026-01-05T00:15:55Z","created_by":"beads/crew/fang","updated_at":"2026-01-05T00:20:47Z","closed_at":"2026-01-05T00:20:47Z","work_type":"mutex"}
{"id":"bd-v2mr","title":"Add RequiredSections() method to IssueType","description":"Add method to internal/types that returns recommended sections per issue type (bug, task, feature, epic). This is the foundation for validation.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-01T19:19:06Z","created_by":"beads/crew/grip","updated_at":"2026-01-01T19:28:01Z","closed_at":"2026-01-01T19:28:01Z","dependencies":[{"issue_id":"bd-v2mr","depends_on_id":"bd-ou35","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-v43g","title":"bd move: Cross-rig bead relocation","description":"## Problem\n\nBeads sometimes get filed in the wrong rig (e.g., hq-* instead of gt-* or bd-*). There's no way to move them without manual recreation.\n\n## Current Misfiled Examples\n\n| ID | Title | Should Be |\n|----|-------|-----------|\n| hq-c21fj | bd init --from-jsonl | bd-* |\n| hq-q3tki | gt convoy list --tree | gt-* |\n| hq-1h2to | Stranded convoy detection | gt-* |\n| hq-2wy2i | Circuit breaker for stuck agents | gt-* |\n| hq-zs2t8 | Handoff mail bug | gt-* |\n| hq-ufiy | Formula semantics | gt-* |\n\n## Proposed Solution\n\nAdd `bd move \u003cid\u003e --to \u003cprefix|rig\u003e` command:\n\n```bash\nbd move hq-c21fj --to bd-    # Move to beads rig\nbd move hq-q3tki --to gt-    # Move to gastown rig\nbd move hq-1h2to --to gastown  # Rig name also works\n```\n\n## Implementation\n\n1. Resolve target rig from prefix or name via routes.jsonl\n2. Generate new ID with target prefix\n3. Create bead in target rig's .beads/\n4. Tombstone original with redirect note: \"Moved to \u003cnew-id\u003e\"\n5. Update dependencies:\n   - Rewrite deps pointing TO moved bead\n   - Rewrite deps pointing FROM moved bead\n6. Print mapping: hq-c21fj -\u003e bd-xxxxx\n\n## Edge Cases\n\n- **Cross-repo moves**: May need bd sync on both sides\n- **Blocked-by chains**: All references need remapping\n- **Assignees**: Preserve or clear? (probably preserve)\n- **Ephemeral beads**: Block move? (ephemeral shouldn't be relocated)\n\n## Alternative: bd clone\n\nCould also support `bd clone \u003cid\u003e --to \u003cprefix\u003e` for copying without tombstoning, useful for templates.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-02T09:15:54Z","created_by":"gastown/crew/joe","updated_at":"2026-01-02T09:37:43Z","closed_at":"2026-01-02T09:37:43Z","work_type":"mutex"}
{"id":"bd-v6f1v","title":"Fix bd version spawning excessive git subprocesses (GHI #1093)","description":"attached_args: Move noDbCommands check BEFORE ensureForkProtection() and signalOrchestratorActivity() in main.go. See GHI #1093 for details.\ndispatched_by: beads/crew/emma","status":"hooked","priority":2,"issue_type":"task","assignee":"beads/crew/giles","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:11:24Z","created_by":"beads/crew/emma","updated_at":"2026-01-17T08:12:55Z","work_type":"mutex"}
{"id":"bd-vcec","title":"postinstall fails on Windows: zip locked by Defender (GH#889)","description":"npm install fails on Windows because the zip file is locked when Expand-Archive runs. Fixed by adding retry loop with exponential backoff.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-04T20:26:43Z","created_by":"beads/crew/grip","updated_at":"2026-01-04T20:27:15Z","closed_at":"2026-01-04T20:27:15Z","work_type":"mutex"}
{"id":"bd-vd8e","title":"Detect uncommitted JSONL changes before sync operations","description":"Part of GH#885 fix: pre-flight safety check.\n\nAdd detection at sync start:\n1. Check if .beads/issues.jsonl has uncommitted changes in git\n2. If so, this indicates a previous sync failed after export but before commit\n3. Force a fresh export cycle to reconcile state\n\nImplementation:\n- Add gitHasUnstagedBeadsChanges() helper\n- Call in sync pre-flight checks (sync.go ~line 159)\n- If detected, warn user and force re-export\n\nThis catches the failure mode early before it compounds.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-04T21:53:25Z","created_by":"beads/crew/emma","updated_at":"2026-01-04T23:10:57Z","closed_at":"2026-01-04T23:10:57Z","dependencies":[{"issue_id":"bd-vd8e","depends_on_id":"bd-pnx2","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-vf63g","title":"Fix: post-checkout hook inline import fails (GH#984)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #984. post-checkout hook fails with 'no database store available for inline import'.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-10T06:20:10Z","created_by":"beads/crew/dave","updated_at":"2026-01-11T04:57:09Z","closed_at":"2026-01-11T00:53:00Z","work_type":"mutex"}
{"id":"bd-vii9","title":"bd agent state fails when agent bead doesn't exist","description":"## Bug\n\n`bd agent state \u003cagent\u003e \u003cstate\u003e` fails if the agent doesn't already exist as a bead.\n\n## Reproduction\n\n```\ngt sling gt-nrpiq gastown\n...\nWarning: couldn't update agent gt-gastown-polecat-toast hook to gt-nrpiq: \n  updating agent state: bd agent state gt-gastown-polecat-toast running: \n  Error: failed to resolve agent gt-gastown-polecat-toast: \n  no issue found matching \"gt-gastown-polecat-toast\"\n```\n\n## Context from HOP Design\n\nFrom **docs/hop/CONTEXT.md**:\n\u003e \"Each polecat should have a chain: What work have they done? What's their success rate? What skills have they demonstrated?\"\n\nFrom **docs/PRIMING.md**:\n\u003e \"Polecats are ephemeral executors. Like K8s pods. They have names (for debugging, logs) but no persistent identity.\"\n\n**Resolution**: Polecat *sessions* are ephemeral, but polecat *names* (toast, nux, furiosa, etc.) are recycled and SHOULD have persistent identity beads. The name is the identity - sessions come and go.\n\nThink of it like K8s:\n- **Pod** = polecat session (ephemeral, killed after task)\n- **ServiceAccount** = polecat identity bead (persistent, accumulates history)\n\n## Solution\n\n`bd agent state` should **auto-create** the agent bead on first use:\n\n```go\n// If agent bead doesn't exist, create it\nif errors.Is(err, ErrNotFound) {\n    // Create identity bead for this agent\n    _, err = CreateIssue(Issue{\n        Title:    fmt.Sprintf(\"Agent: %s\", agentName),\n        Type:     \"agent\",\n        Status:   state,\n        Metadata: map[string]string{\n            \"role\": parseRole(agentName),  // polecat, witness, etc.\n            \"rig\":  parseRig(agentName),   // gastown, beads, etc.\n        },\n    })\n}\n```\n\nThis enables:\n1. Work history accumulation per polecat name\n2. Skill/success tracking over time\n3. CV chain for the polecat identity\n4. `bd list --type=agent` to see all agents\n\n## Non-goals\n\n- Session tracking (ephemeral, don't persist)\n- Work attribution to polecat (credits human owner)\n- Agent scheduling (Gas Town handles that)","status":"closed","priority":3,"issue_type":"bug","assignee":"beads/polecats/obsidian","created_at":"2026-01-02T20:16:39Z","created_by":"mayor","updated_at":"2026-01-02T20:27:06Z","closed_at":"2026-01-02T20:27:06Z","work_type":"mutex"}
{"id":"bd-vizy","title":"Deprecate bump-version.sh script","description":"The bump-version.sh script is now legacy. The formula is the authority for release mechanics.\n\n## Options\n\n1. **Add deprecation notice** (minimal change)\n   - Add warning at top of script pointing to formula\n   - Keep script working for quick manual releases\n\n2. **Convert to formula wrapper** (medium change)\n   - Script becomes: `bd mol execute beads-release --var version=$1`\n   - Maintains CLI convenience while using formula\n\n3. **Remove entirely** (breaking change)\n   - Delete scripts/bump-version.sh\n   - Update any docs referencing it\n   - Formula is the only way to release\n\n## Recommendation\nOption 2 - keeps convenience of `./scripts/bump-version.sh 0.47.0` but executes via formula, getting all the durability/visibility benefits.\n\n## Acceptance Criteria\n- [ ] Script has deprecation notice or is removed\n- [ ] CLAUDE.md and other docs updated if needed\n- [ ] No duplicate release logic (script vs formula)\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T08:45:33Z","created_by":"beads/crew/emma","updated_at":"2026-01-07T08:45:33Z","dependencies":[{"issue_id":"bd-vizy","depends_on_id":"bd-a854","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-vizy","depends_on_id":"bd-z8xz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-vjdt","title":"Add bd doctor check for JSONL/SQLite/git divergence","description":"Part of GH#885 fix: recovery mechanism. Add new doctor check that detects: 1) JSONL on disk differs from git HEAD version, 2) SQLite last_import_time does not match JSONL mtime, 3) Uncommitted .beads/ changes exist. Auto-fix options: re-export from SQLite, re-import from JSONL, or commit pending changes. Key file: cmd/bd/doctor/fix/sync.go","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-04T21:53:44Z","created_by":"beads/crew/emma","updated_at":"2026-01-04T23:22:09Z","closed_at":"2026-01-04T23:14:01Z","dependencies":[{"issue_id":"bd-vjdt","depends_on_id":"bd-pnx2","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-vut6r","title":"Review and merge PR #1056: bump golang.org/x/sys v0.39→v0.40","description":"dispatched_by: beads/crew/emma\n\n## Easy-win PR Review\n\nPR: https://github.com/steveyegge/beads/pull/1056\nType: Dependabot dependency bump (Go modules)\nChange: golang.org/x/sys 0.39.0 → 0.40.0\n\n## Task\n1. Review the PR diff: `gh pr diff 1056 --repo steveyegge/beads`\n2. Check CI status: `gh pr checks 1056 --repo steveyegge/beads`\n3. If CI passes and diff looks safe, approve and merge:\n   `gh pr review 1056 --repo steveyegge/beads --approve`\n   `gh pr merge 1056 --repo steveyegge/beads --squash`\n4. Close this bead when done\n\n## Notes\n- Minor version bump, safe standard library extension\n- Adds symbolic constants for cpuid bits","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T03:28:34Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T03:38:46Z","closed_at":"2026-01-13T03:38:46Z","work_type":"mutex"}
{"id":"bd-vx7fp","title":"Race condition: GetLabels missing reconnectMu RLock protection","description":"## Summary\nThe `GetLabels` and `GetLabelsForIssues` functions in `internal/storage/sqlite/labels.go` are missing the `reconnectMu.RLock()` protection that was added to `GetIssue` for GH#607.\n\n## Symptoms\nDaemon logs show repeated errors:\n```\nExport failed: \"failed to get labels for hq-5gr9k: failed to get labels: sql: database is closed\"\n```\n\nThis causes:\n- High CPU (46%+) due to export retry loops\n- File watcher thrash as exports fail and trigger reimports\n\n## Root Cause\nWhen `FreshnessChecker` detects a file modification and calls `reconnect()`:\n1. Export goroutine calls `store.GetLabelsForIssues()`\n2. `reconnect()` acquires write lock and calls `s.db.Close()`\n3. Export goroutine tries to query the now-closed `s.db`\n4. Error: \"database is closed\"\n\n## Fix\nAdd the same RLock pattern used in `GetIssue` (queries.go:257-258):\n```go\ns.reconnectMu.RLock()\ndefer s.reconnectMu.RUnlock()\n```\n\n## Affected Methods (need audit)\n- `GetLabels` - labels.go:84\n- `GetLabelsForIssues` - labels.go:107\n- Likely other methods in labels.go, dependencies.go, transaction.go\n\n## See Also\n- GH#607 (original race condition fix for GetIssue)\n- PR #1034 (incorrectly diagnosed this as polling interval issue)","status":"closed","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T02:02:54Z","created_by":"beads/crew/dave","updated_at":"2026-01-13T02:29:55Z","closed_at":"2026-01-13T02:29:55Z","comments":[{"id":13,"issue_id":"bd-vx7fp","author":"beads/crew/dave","text":"## Audit Results\n\nThe race condition affects **many more methods** than initially identified. Here's the full audit of files with unprotected `s.db` access:\n\n| File | Affected Methods |\n|------|-----------------|\n| labels.go | GetLabels, GetLabelsForIssues, GetAllLabels |\n| comments.go | AddComment, DeleteComment, GetIssueComments, GetCommentsForIssues |\n| dependencies.go | GetBlockers, GetDependents, GetAllDependencyRecords, GetAllBlockersCounts, GetAllDependentsCounts, GetBlockingChain |\n| config.go | SetConfig, GetConfig, GetAllConfigs, DeleteConfig, SetMetadata, GetMetadata |\n| dirty.go | MarkDirty, GetDirtyIssueIDs, IsDirty, ClearDirtyIssuesByID |\n| events.go | GetEventsForEntity, GetMoleculeStatusSummary |\n| hash.go | GetExportHash, SetExportHash, ClearExportHashes, GetImportHash, SetImportHash |\n| hash_ids.go | ResolveIDFromHash, EnsureChildPrefixMatches |\n| compact.go | GetCompactableIssues, GetCompactableComments, GetCompactedIssue |\n| batch_ops.go | batch operations |\n| blocked_cache.go | blocked cache operations |\n| epics.go | epic queries |\n| multirepo.go | multi-repo operations |\n\n**Recommended Fix Strategy:**\n1. Create a helper method `withRLock(fn func() error) error` that wraps all db operations\n2. Apply to all public methods that use `s.db`\n3. Or: Add RLock/RUnlock to each method individually (more boilerplate but simpler)\n\nThe high CPU (46%+) in the daemon is caused by export failing → file change → import triggers → export retries in a tight loop.","created_at":"2026-01-13T02:03:16Z"}],"work_type":"mutex"}
{"id":"bd-w05sg","title":"Review PR #16755: Fix PROMPT_PARTS with set -u","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #16755 (anthropics/claude-code)\n\nPR: https://github.com/anthropics/claude-code/pull/16755\nAuthor: KCW89\n\nFixes bash strict mode compatibility in ralph-wiggum.\n- gh pr view 16755 --repo anthropics/claude-code\n- gh pr diff 16755 --repo anthropics/claude-code\n- If good: gh pr merge 16755 --repo anthropics/claude-code --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","created_at":"2026-01-08T22:20:08Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:29:36Z","closed_at":"2026-01-08T22:29:36Z","work_type":"mutex"}
{"id":"bd-w2zz4","title":"Remove Gas Town types from beads core","description":"## Summary\n\nBeads should be a generic issue tracker, not coupled to Gas Town concepts. Currently it has \"well-known custom types\" which is a half-measure - constants exist in code but require config to validate.\n\n## Problem\n\nCommit 4f0f5744 moved Gas Town types (molecule, gate, convoy, merge-request, slot, agent, role, rig, event, message) from built-in to \"well-known custom types\". This:\n- Keeps code coupling (constants still defined in types.go)\n- Adds user friction (config required)\n- Achieves no actual decoupling\n\n## Solution\n\nRemove Gas Town-specific types from beads entirely:\n1. Remove constants: TypeMolecule, TypeGate, TypeConvoy, TypeMergeRequest, TypeSlot, TypeAgent, TypeRole, TypeRig, TypeEvent, TypeMessage\n2. Remove any special handling for these types\n3. Let them be truly custom types with no beads awareness\n4. Move any Gas Town-specific logic to gastown codebase\n\n## Acceptance Criteria\n\n- [ ] No Gas Town type constants in beads/internal/types/types.go\n- [ ] No special validation or handling for Gas Town types\n- [ ] Gas Town continues to work via types.custom config\n- [ ] bd types command shows only core types (bug, feature, task, epic, chore)","status":"closed","priority":2,"issue_type":"epic","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T05:30:38Z","created_by":"gastown/crew/max","updated_at":"2026-01-21T19:06:16Z","closed_at":"2026-01-21T18:30:25Z","work_type":"mutex"}
{"id":"bd-w3rh","title":"Phase 4: Cross-Rig Bead Gates","description":"Implement cross-rig bead dependency gates.\n\n## Behavior\n- Gate waits on a bead in another rig\n- Leverage existing external dep resolution via bd sync\n- `bd ready` / `bd sync` resolves naturally\n\n## Implementation\n1. `bd cook` creates gate with external dep on target bead\n2. Gate has `await_type=bead` and `await_id=\u003crig\u003e:\u003cbead-id\u003e`\n3. During bd sync, cross-rig deps are resolved\n4. When target bead closes, gate can close\n\n## Design Question\nShould this piggyback on existing dependency resolution, or have explicit gate check?\n\nOption A: Use existing blocking deps (simpler)\nOption B: Explicit `bd gate check --type=bead` (more control)\n\n## Acceptance Criteria\n- [ ] Gates can reference beads in other rigs\n- [ ] Gate resolves when target bead closes\n- [ ] Works with bd sync for cross-rig resolution","status":"closed","priority":3,"issue_type":"task","assignee":"beads/polecats/onyx","created_at":"2026-01-02T09:55:44Z","created_by":"mayor","updated_at":"2026-01-02T21:05:52Z","closed_at":"2026-01-02T21:05:52Z","dependencies":[{"issue_id":"bd-w3rh","depends_on_id":"bd-mcva","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-w43xt","title":"Review PR #16228: Node 20 to 24 in devcontainer","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #16228 (anthropics/claude-code)\n\nPR: https://github.com/anthropics/claude-code/pull/16228\nAuthor: tomoki10\n\nUpdates Node.js from v20 (maintenance phase) to v24.\n- gh pr view 16228 --repo anthropics/claude-code\n- gh pr diff 16228 --repo anthropics/claude-code\n- If good: gh pr merge 16228 --repo anthropics/claude-code --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","created_at":"2026-01-08T22:20:28Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:29:36Z","closed_at":"2026-01-08T22:29:36Z","work_type":"mutex"}
{"id":"bd-w7wex","title":"bd mol cook: create gate beads for gate steps","description":"When cooking a molecule, if a step has a gate field:\n\n1. Create a gate bead with ID: \u003cmol-id\u003e.gate-\u003cstep-id\u003e\n2. Set await_type from step gate field\n3. Set await_id from step gate_hint (or empty for auto-discovery)\n4. Set timeout from step timeout field\n5. Gate bead starts with status=open\n\nThe gate bead implicitly blocks the step. Step cannot proceed until gate closes.\n\nParent: bd-ka761","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T04:53:57Z","created_by":"beads/crew/emma","updated_at":"2026-01-09T05:09:25Z","closed_at":"2026-01-09T05:09:25Z","dependencies":[{"issue_id":"bd-w7wex","depends_on_id":"bd-7m0d2","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-w7wex","depends_on_id":"bd-ka761","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wayc3","title":"Fix redirect + sync-branch incompatibility for crew workers","description":"## Problem\n\nRedirect and sync-branch are fundamentally incompatible when used together:\n\n1. **Redirect** points `.beads/` to another repo (e.g., `crew/dave/.beads/redirect` -\u003e `mayor/rig/.beads`)\n2. **Sync-branch** creates a worktree in the LOCAL repo to commit `.beads/` changes\n3. Git rejects commits because the redirected path is \"outside repository\"\n\nError observed:\n```\ngit status failed in worktree: exit status 128\nfatal: ../../mayor/rig/.beads is outside repository\n```\n\nAdditionally, config drift: mayor uses `beads-metadata`, dave uses `beads-sync`. Multiple sync branches for shared data = chaos.\n\n## Root Cause\n\nRedirect says: \"My database is over there (I am a client)\"\nSync-branch says: \"I own my database and sync it myself\"\n\nThese are mutually exclusive ownership models.\n\n## Design Decision (Option B)\n\nRedirect and sync-branch are mutually exclusive by design.\n\nFor crew workers:\n- Mayor owns the canonical rig database\n- Crew workers share via redirect\n- Mayor daemon handles sync-branch operations\n- Crew workers should NOT have sync-branch configured\n\n## Changes Required\n\n1. bd sync: Detect redirect and skip sync-branch (log message, still do import/export)\n2. bd doctor: Warn on redirect + sync-branch conflict\n3. Standardize on beads-sync branch name (delete beads-metadata)\n4. Fix crew worker configs (clear sync-branch from redirected clones)\n\n## Acceptance Criteria\n\n- [ ] bd sync gracefully skips sync-branch when redirect is active\n- [ ] bd doctor warns on redirect + sync-branch conflict\n- [ ] beads-metadata branch is DELETED from origin\n- [ ] All sync-branch configs standardized to beads-sync\n- [ ] Crew workers with redirect have no sync-branch config\n- [ ] Documentation updated\n\n## Files Likely Affected\n\n- cmd/bd/sync_branch.go\n- cmd/bd/doctor/\n- internal/beads/beads.go\n- docs/","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T08:38:00Z","created_by":"beads/crew/dave","updated_at":"2026-01-15T04:37:33Z","closed_at":"2026-01-15T04:37:33Z","work_type":"mutex"}
{"id":"bd-wdp83","title":"Add 'quality_score' field for aggregate quality metric","description":"dispatched_by: beads/crew/emma\n\nAdd float32 field (0.0-1.0) for aggregate quality score on issues. Validators (Refineries) can populate on merge. Foundation for proof-of-stake reputation. Distinct from per-Validation.Score.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","created_at":"2026-01-11T00:34:07Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T03:34:18Z","closed_at":"2026-01-11T03:34:18Z","dependencies":[{"issue_id":"bd-wdp83","depends_on_id":"bd-imi7w","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-whlsz","title":"Implement hop:// URI scheme for federation","description":"dispatched_by: beads/crew/emma\n\nImplement the Highway Operations Protocol (HOP) URI scheme for cross-repo and cross-town entity references.\n\nCurrent EntityRef.URI() returns entity://hop/platform/org/id - this is a draft format.\n\nRecommended scheme:\n  hop://\u003centity\u003e/\u003cchain\u003e/\u003crig\u003e/\u003cid\u003e\n\nExamples:\n  hop://steve@example.com/main-town/gastown/gt-xyz  (full work unit)\n  hop://steve@example.com/main-town                  (chain/workspace)\n  hop://acme.com/engineering/backend/ac-123          (org work unit)\n\nImplementation:\n1. Update EntityRef to include Entity (email/domain) and Chain (workspace) fields\n2. Update EntityRef.URI() to return hop:// format\n3. Add ParseHopURI() for parsing\n4. Deprecate entity:// format\n\nThe hop:// scheme is the Highway Operations Protocol standard for Gas Town federation.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/grip","created_at":"2026-01-11T00:34:07Z","created_by":"gastown/crew/max","updated_at":"2026-01-11T03:26:54Z","closed_at":"2026-01-11T03:26:54Z","dependencies":[{"issue_id":"bd-whlsz","depends_on_id":"bd-imi7w","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz","title":"Federation: Peer-to-peer Dolt remotes between Gas Towns","status":"closed","priority":1,"issue_type":"epic","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:32:35Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T03:48:09Z","closed_at":"2026-01-27T03:48:09Z","close_reason":"Phase 1 federation complete - all 10 child tasks done. Future federation work tracked separately.","work_type":"mutex"}
{"id":"bd-wkumz.1","title":"Switch bd init --backend dolt to use dolt init + embedded driver","description":"dispatched_by: beads/crew/emma\n\nCurrently embedded driver creates .dolt but not full repo structure. Need to: 1) Run dolt init first to create proper repo, 2) Then open with embedded driver. This enables file:// and sql-server remotes.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/collins","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:32:54Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T04:55:22Z","closed_at":"2026-01-21T04:55:22Z","dependencies":[{"issue_id":"bd-wkumz.1","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz.10","title":"Implement federation authentication (SQL users)","description":"dispatched_by: beads/crew/emma\n\nremotesapi uses SQL user auth. Implement: 1) bd federation add-peer --user --password, 2) Secure credential storage, 3) DOLT_REMOTE_PASSWORD handling. See Dolt docs on sql-server auth.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/jane","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:33:25Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T04:33:42Z","closed_at":"2026-01-21T04:33:42Z","dependencies":[{"issue_id":"bd-wkumz.10","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz.11","title":"Add FederatedMessage type and protocol","description":"dispatched_by: beads/crew/emma\n\nImplement message types from FEDERATION.md: work-handoff, query, reply, broadcast, ack, reject. Include staked reputation, sender trust, signature fields.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wickham","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:33:27Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T05:24:29Z","closed_at":"2026-01-21T05:24:29Z","dependencies":[{"issue_id":"bd-wkumz.11","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz.2","title":"Add dolt sql-server mode for daemon with remotesapi","description":"dispatched_by: beads/crew/emma\n\nRun dolt sql-server instead of embedded driver when federation is enabled. Exposes port 8080 remotesapi for peer-to-peer push/pull. Enables multi-writer AND remote sync.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/darcy","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:32:55Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T04:39:04Z","closed_at":"2026-01-21T04:39:04Z","dependencies":[{"issue_id":"bd-wkumz.2","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz.3","title":"Implement bd federation add-peer command","description":"dispatched_by: beads/crew/emma\n\nAdd peer town as a Dolt remote. Syntax: bd federation add-peer \u003cname\u003e \u003cendpoint\u003e. Stores in config, calls DOLT_REMOTE('add', name, url). Validates connectivity.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/elinor","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:32:57Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T04:31:55Z","closed_at":"2026-01-21T04:31:55Z","dependencies":[{"issue_id":"bd-wkumz.3","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz.4","title":"Implement bd federation sync command","description":"Pull from and push to peer towns. Syntax: bd federation sync [--peer name]. Handles merge conflicts using configured strategy. Reports sync status.","status":"closed","priority":1,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:32:58Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T04:37:36Z","closed_at":"2026-01-21T04:37:36Z","dependencies":[{"issue_id":"bd-wkumz.4","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz.5","title":"Implement bd federation status command","description":"dispatched_by: beads/crew/emma\n\nShow federation status: configured peers, last sync time, pending changes, connectivity status. Similar to git remote -v but with health info.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/collins","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:33:09Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T05:26:20Z","closed_at":"2026-01-21T05:26:20Z","dependencies":[{"issue_id":"bd-wkumz.5","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz.6","title":"Add bd doctor checks for federation health","description":"dispatched_by: beads/crew/emma\n\nAdd checks: 1) remotesapi port accessible, 2) peer connectivity, 3) sync staleness warnings, 4) conflict state detection, 5) dolt init vs embedded mismatch detection.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/darcy","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:33:11Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T05:26:39Z","closed_at":"2026-01-21T05:26:39Z","dependencies":[{"issue_id":"bd-wkumz.6","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz.7","title":"Document federation setup in FEDERATION-SETUP.md","description":"dispatched_by: beads/crew/emma\n\nUser-facing docs: 1) Prerequisites (dolt installed), 2) Initializing a federatable town, 3) Adding peers, 4) Sync workflow, 5) Troubleshooting, 6) Security considerations.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/elinor","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:33:12Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T07:14:39Z","closed_at":"2026-01-21T07:14:39Z","dependencies":[{"issue_id":"bd-wkumz.7","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wkumz.8","title":"Implement reputation staking for cross-town messages","description":"Per FEDERATION.md spec: messages cost reputation to send. Track bilateral trust scores. Implement stake/release mechanics based on message outcomes.","status":"closed","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T02:33:14Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T05:27:03Z","closed_at":"2026-01-21T05:27:03Z","dependencies":[{"issue_id":"bd-wkumz.8","depends_on_id":"bd-wkumz","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-wlzsd","title":"Merge: obsidian-mk99kht7","description":"branch: polecat/obsidian-mk99kht7\ntarget: main\nsource_issue: obsidian-mk99kht7\nrig: beads\nagent_bead: bd-beads-polecat-obsidian\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T05:03:34Z","created_by":"beads/polecats/obsidian","updated_at":"2026-01-11T05:53:12Z","closed_at":"2026-01-11T05:53:12Z","labels":["gt:merge-request"],"work_type":"mutex"}
{"id":"bd-wnzt8","title":"Clarify bd reset --hard documentation (GH#922)","description":"dispatched_by: beads/crew/dave\n\nDocument or restore bd reset --hard and --skip-init flags. User reports old data returns after reset.","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T04:42:22Z","created_by":"beads/crew/dave","updated_at":"2026-01-12T04:46:10Z","closed_at":"2026-01-12T04:46:10Z","work_type":"mutex"}
{"id":"bd-wozcq","title":"Suppress no-git-repo note with --quiet flag (GHI #1080)","description":"attached_args: Simple fix: make the no-git-repo Note respect --quiet flag. See GHI #1080.\ndispatched_by: beads/crew/emma","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/wickham","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:11:27Z","created_by":"beads/crew/emma","updated_at":"2026-01-17T08:16:16Z","closed_at":"2026-01-17T08:16:16Z","work_type":"mutex"}
{"id":"bd-wp2q5","title":"Review PR #1010: Add FreeBSD documentation","description":"dispatched_by: beads/crew/emma\n\nReview and approve PR #1010 from jordanhubbard that adds FreeBSD support documentation.\n\nPR URL: https://github.com/steveyegge/beads/pull/1010\n\n## Summary\nThis PR clarifies installation docs to include FreeBSD alongside Linux, adding FreeBSD-specific install notes.\n\n## Changes (57 additions, 5 deletions)\n- .goreleaser.yml: Add FreeBSD to quick install text\n- README.md: Add FreeBSD to requirements\n- docs/INSTALLING.md: Add FreeBSD section\n- website/docs/getting-started/installation.md: Add FreeBSD section\n- website/docs/intro.md: Add FreeBSD to quick install\n- website/static/llms-full.txt: Corresponding updates\n\n## Review Tasks\n1. Verify the install.sh script actually works on FreeBSD (or at least doesn't break)\n2. Check that documentation is consistent across all files\n3. Validate with: make test\n4. If all good, approve the PR with: gh pr review 1010 --repo steveyegge/beads --approve\n5. After approval, merge with: gh pr merge 1010 --repo steveyegge/beads --squash\n\n## Why Easy-Win\n- Documentation-only change\n- No code changes\n- Author is jordanhubbard (BSD expert)\n- Follows existing patterns for Linux docs","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-11T08:01:29Z","created_by":"beads/crew/emma","updated_at":"2026-01-11T08:03:26Z","closed_at":"2026-01-11T08:03:26Z","work_type":"mutex"}
{"id":"bd-wp4kp","title":"Bootstrap: Log parse error details for debugging","description":"When JSONL has malformed lines, only the count is printed but actual line numbers and errors are discarded:\n\n```go\nif len(result.ParseErrors) \u003e 0 {\n    fmt.Printf(\" (%d parse errors skipped)\", len(result.ParseErrors))\n}\n```\n\nFor debugging JSONL corruption, users need to know which lines failed. Consider:\n- Writing parse errors to a log file\n- Printing first N errors with line numbers\n- Adding verbose flag to show all errors\n\nLocation: internal/storage/dolt/store.go:166-167\n\n(Moved from hq-kqwxp)","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-21T01:37:37Z","created_by":"mayor","updated_at":"2026-01-21T01:37:37Z","labels":["dolt-backend"],"work_type":"mutex"}
{"id":"bd-wwlps","title":"beads_queue.go: UpdateQueueStatus fetches queue twice unnecessarily","description":"In internal/beads/beads_queue.go:250-266, UpdateQueueStatus has the same double-fetch issue as UpdateQueueCounts:\n1. GetQueueBead(id) at lines 256-257 fetches and parses the queue\n2. UpdateQueueFields(id, currentFields) at line 265 calls Show(id) again at line 221\n\nThis is the same pattern as the UpdateQueueCounts issue - both functions fetch the queue, modify one field in the parsed struct, then call UpdateQueueFields which fetches again.\n\nRecommendation: Same fix as UpdateQueueCounts - refactor to avoid the redundant fetch, possibly by having UpdateQueueFields accept the already-fetched issue.\n\nLocation: internal/beads/beads_queue.go:250-266","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T03:58:07Z","created_by":"gastown/crew/george","updated_at":"2026-01-22T03:58:07Z","labels":["efficiency","gt:code-review"],"work_type":"mutex"}
{"id":"bd-wx1xd","title":"Consolidate PR Sheriff to town-level (hq-pr-sheriff)","description":"dispatched_by: beads/crew/fang\n\n## Summary\n\nCreate ONE town-level PR Sheriff bead to replace duplicated rig-level beads.\n\n## Problem\n- `bd-pr-sheriff` exists in beads rig\n- Max is creating `gt-pr-sheriff` for gastown rig\n- This is duplicative and wrong scope\n\n## Solution\n1. Create `hq-pr-sheriff` at town level (~/gt/.beads/)\n2. Move standing orders content from bd-pr-sheriff\n3. Close bd-pr-sheriff with 'Moved to hq-pr-sheriff'\n4. Notify Max to stop gt-pr-sheriff work\n\n## Rationale\n- PR Sheriff reviews PRs across repos (cross-rig scope)\n- It's coordination/patrol work, not implementation\n- Mayor/Deacon territory\n- Standing orders pattern (bead with instructions), not formula\n\n## Standing Orders Content\nInclude in description:\n- Repos to watch (steveyegge/beads, steveyegge/gastown)\n- Easy-win criteria\n- NOT easy-win criteria\n- Phase 1: New PRs needing review\n- Phase 2: Re-review PRs with new activity\n- Available crew for dispatch","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-16T19:02:39Z","created_by":"beads/crew/emma","updated_at":"2026-01-16T19:58:34Z","closed_at":"2026-01-16T19:58:34Z","work_type":"mutex"}
{"id":"bd-wx6sy","title":"Review PR #821: fix(gt done) prevent self-kill during cleanup","description":"dispatched_by: beads/crew/emma\n\nEasy-win PR review: Prevent gt done from killing itself when cleaning up tmux session.\n\nPR: https://github.com/steveyegge/gastown/pull/821\nAuthor: julianknutsen\nChanges: 226 additions, 3 deletions\n\nTask: Review the PR, verify tests pass, approve and merge if good.\n\nCommands:\ngh pr view 821 --repo steveyegge/gastown\ngh pr diff 821 --repo steveyegge/gastown\ngh pr review 821 --repo steveyegge/gastown --approve\ngh pr merge 821 --repo steveyegge/gastown --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/wickham","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:32:47Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T03:35:08Z","closed_at":"2026-01-21T03:35:08Z","work_type":"mutex"}
{"id":"bd-wzve","title":"Review PR #905: fix(update) prefix routing","description":"dispatched_by: beads/crew/emma\n\nReview and merge PR #905 from greghughespdx.\n\nPR: https://github.com/anthropics/beads/pull/905\nChanges: +40/-23, 1 file (cmd/bd/update.go)\n\nFix: add prefix routing like bd show (bd-618f)\n\nReview checklist:\n- [ ] Code quality and style\n- [ ] Tests pass\n- [ ] Logic is correct\n- [ ] Approve or request changes","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-06T03:09:18Z","created_by":"beads/crew/emma","updated_at":"2026-01-06T03:12:10Z","closed_at":"2026-01-06T03:12:10Z","work_type":"mutex"}
{"id":"bd-x5auq","title":"Optimize GetChangesSinceExport to avoid double-fetch of issues","description":"In flushToJSONLVersioned(), we call GetChangesSinceExport() twice in the incremental path:\n1. Once at line 895 to check if there are changes\n2. Again at line 935 to actually process them\n\nAdditionally, GetChangesSinceExport() already fetches the full issue for added/modified changes, but then flushToJSONLVersioned() fetches it AGAIN with store.GetIssue() at line 967.\n\n**Suggested fix:**\n- Store the changes from the first call and reuse them\n- Use the Issue field from IssueChange instead of re-fetching (may need to ensure deps/comments are included)\n\nFiles: cmd/bd/autoflush.go, internal/storage/dolt/versioned.go","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T03:08:05Z","created_by":"beads/crew/darcy","updated_at":"2026-01-21T03:08:05Z","work_type":"mutex"}
{"id":"bd-x7i7c","title":"Pre-existing: SQLite scan column count mismatch (31 vs 32)","description":"Multiple tests failing on main with: 'sql: expected 31 destination arguments in Scan, not 32'\n\nAffected tests:\n- TestGetIssuesByLabel (internal/storage/sqlite)\n- TestMigrateContentHashColumn (internal/storage/sqlite)\n- TestResolveProtoIDOrTitle (cmd/bd)\n\nRoot cause appears to be a column added to the issues table without updating all Scan calls.\n\nDiscovered during refinery patrol while processing polecat/quartz-lmqhe.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-11T06:11:22Z","created_by":"beads/refinery","updated_at":"2026-01-12T09:37:09Z","closed_at":"2026-01-12T09:37:09Z","work_type":"mutex"}
{"id":"bd-x7qni","title":"Fix broken CLAUDE.md link in AGENTS.md","description":"dispatched_by: beads/crew/emma\n\nAGENTS.md links to CLAUDE.md which doesn't exist on main. Find and fix the broken link.","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-14T03:34:22Z","created_by":"beads/crew/emma","updated_at":"2026-01-14T03:35:33Z","closed_at":"2026-01-14T03:35:33Z","work_type":"mutex"}
{"id":"bd-xai7h","title":"Review and merge PR #999: bsv terminal viewer","description":"Review and merge PR #999 from bglenden that adds bsv (Rust TUI viewer) to COMMUNITY_TOOLS.md.\n\nEasy-win criteria:\n- Documentation-only change (2 lines added)\n- Adds link to external community tool\n- No code changes, just adding to community tools list\n\nSteps:\n1. gh pr checkout 999 --repo steveyegge/beads\n2. Verify the addition follows existing format in COMMUNITY_TOOLS.md\n3. Check the linked repo exists and is legitimate\n4. gh pr merge 999 --repo steveyegge/beads --squash\n\nPR: https://github.com/steveyegge/beads/pull/999","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-10T19:58:12Z","created_by":"beads/crew/emma","updated_at":"2026-01-10T20:06:20Z","closed_at":"2026-01-10T20:06:20Z","work_type":"mutex"}
{"id":"bd-xcs4","title":"Missing routes.jsonl breaks gt sling for cross-rig beads","description":"gt sling fails to find beads with rig-level prefixes (e.g., bd-ats9.1) because ~/gt/.beads/routes.jsonl does not exist. The gastown beads package expects prefix-based routing via routes.jsonl but the file was never created. Impact: gt sling cannot sling beads from rig beads databases - cross-rig work dispatch is broken. Found during review of gastown internal/beads/ for bd-ats9 epic.","status":"closed","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T03:50:32Z","created_by":"beads/crew/emma","updated_at":"2026-01-27T03:54:59Z","closed_at":"2026-01-27T03:54:59Z","close_reason":"Fixed. gt doctor --fix now creates routes.jsonl with proper prefix mappings."}
{"id":"bd-xfi2b","title":"Broken beads redirect: mayor/rig/.beads doesn't exist","description":"The beads redirect in polecats worktrees and rig-level .beads points to mayor/rig/.beads, but this directory doesn't exist.\n\nPath: /Users/stevey/gt/mayor/rig/.beads\nRedirect source: .beads/redirect contains 'mayor/rig/.beads'\n\nThis blocks gt done and gt handoff operations for polecats.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-11T05:12:31Z","created_by":"beads/polecats/obsidian","updated_at":"2026-01-11T05:25:56Z","closed_at":"2026-01-11T05:25:56Z","work_type":"mutex"}
{"id":"bd-xgq3o","title":"Review and merge PR 1028: fix route prefix for cross-rig issue creation","description":"dispatched_by: beads/crew/emma\n\n## PR Review Task\n\n**PR**: https://github.com/steveyegge/beads/pull/1028\n**Author**: nicsuzor\n\n## Summary\nBug fix: When using `bd create --rig \u003cname\u003e`, the prefix from routes.jsonl was being discarded. Issues were created with the database's default prefix instead of the route-specified prefix.\n\n## Changes\n- Adds `PrefixOverride` field to `types.Issue`\n- In `CreateIssue`, check `PrefixOverride` first (overrides config prefix)\n- In `createInRig`, set `issue.PrefixOverride` from the route prefix\n\n## Verification Steps\n1. `gh pr checkout 1028 --repo steveyegge/beads`\n2. `go build ./...` - verify it compiles\n3. `go test ./...` - verify tests pass\n4. Review the diff for correctness\n5. If all good: `gh pr merge 1028 --repo steveyegge/beads --squash`\n\n## Classification\nEasy-win bug fix with clear reproduction and solution.","status":"closed","priority":1,"issue_type":"task","assignee":"beads/crew/dave","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T09:20:00Z","created_by":"beads/crew/emma","updated_at":"2026-01-12T09:21:27Z","closed_at":"2026-01-12T09:21:27Z","work_type":"mutex"}
{"id":"bd-xwvo","title":"bd create --rig flag loses event fields (event_kind, actor, payload)","description":"## Bug\n\nWhen creating events with `--rig` flag, the event-specific fields are not stored:\n- event_kind\n- actor\n- target\n- payload\n\n## Reproduction\n\n```bash\n# Without --rig (works)\nbd create --type=event --title='Test' --event-category=session.ended --event-actor=test --event-payload='{\"x\":1}' --silent\n# Fields are stored correctly\n\n# With --rig (broken)\nbd create --type=event --title='Test' --event-category=session.ended --event-actor=test --event-payload='{\"x\":1}' --rig=gastown --silent\n# event_kind, actor, payload are NOT stored\n```\n\n## Impact\n\nThe `gt costs record` command needs to create session events in rig-specific beads, but cannot use `--rig` flag due to this bug.\n\n## Workaround\n\nRun `bd create` from within the rig directory so it auto-detects the correct beads location.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-02T21:23:22Z","created_by":"gastown/polecats/capable","updated_at":"2026-01-03T01:06:09Z","closed_at":"2026-01-03T01:06:09Z","work_type":"mutex"}
{"id":"bd-xxl82","title":"Fix: Windows postinstall file lock race (GH#925)","description":"dispatched_by: beads/crew/dave\n\nGitHub issue #925. File lock race condition during zip extraction on Windows.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/giles","created_at":"2026-01-10T06:20:21Z","created_by":"beads/crew/dave","updated_at":"2026-01-10T07:03:22Z","closed_at":"2026-01-10T07:03:22Z","work_type":"mutex"}
{"id":"bd-y2kwm","title":"GetChannelBead and GetChannelByID are near-duplicates","description":"In beads_channel.go:182-219, GetChannelBead and GetChannelByID have nearly identical implementations.\n\n**GetChannelBead (lines 184-200):**\n- Takes name, converts to ID via ChannelBeadID(name)\n- Calls Show(id), checks label, parses fields\n\n**GetChannelByID (lines 204-219):**\n- Takes id directly\n- Calls Show(id), checks label, parses fields\n\n**Issue:** The only difference is whether to call ChannelBeadID() first. The rest of the code (Show, label check, parse) is duplicated.\n\n**Recommendation:** Extract shared logic into a private helper:\n```go\nfunc (b *Beads) getChannelByIDInternal(id string) (*Issue, *ChannelFields, error)\n```\nThen GetChannelBead becomes: `return b.getChannelByIDInternal(ChannelBeadID(name))`","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-22T03:51:30Z","created_by":"gastown/crew/george","updated_at":"2026-01-22T03:51:30Z","work_type":"mutex"}
{"id":"bd-ydrjd","title":"Review and merge PR #1057: bump actions/checkout v4→v6","description":"dispatched_by: beads/crew/emma\n\n## Easy-win PR Review\n\nPR: https://github.com/steveyegge/beads/pull/1057\nType: Dependabot dependency bump (GitHub Actions)\nChange: actions/checkout v4 → v6\n\n## Task\n1. Review the PR diff: `gh pr diff 1057 --repo steveyegge/beads`\n2. Check CI status: `gh pr checks 1057 --repo steveyegge/beads`\n3. If CI passes and diff looks safe, approve and merge:\n   `gh pr review 1057 --repo steveyegge/beads --approve`\n   `gh pr merge 1057 --repo steveyegge/beads --squash`\n4. Close this bead when done\n\n## Notes\n- Major version bump but checkout is heavily used and well-maintained\n- Changes credential persistence location (now under RUNNER_TEMP)\n- Requires runner v2.329.0+ for Docker container action scenarios","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/grip","owner":"steve.yegge@gmail.com","created_at":"2026-01-13T03:28:35Z","created_by":"beads/crew/emma","updated_at":"2026-01-13T03:38:46Z","closed_at":"2026-01-13T03:38:46Z","work_type":"mutex"}
{"id":"bd-yk9iz","title":"Fix rename-prefix to update blocked_issues_cache (GH#1016)","description":"dispatched_by: beads/crew/dave\n\nbd rename-prefix doesn't update blocked_issues_cache table. Add rebuildBlockedCache() call after rename.","status":"closed","priority":2,"issue_type":"bug","assignee":"beads/crew/giles","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T04:42:21Z","created_by":"beads/crew/dave","updated_at":"2026-01-12T04:45:17Z","closed_at":"2026-01-12T04:45:17Z","work_type":"mutex"}
{"id":"bd-ym02d","title":"Document town-level formulas architecture","description":"dispatched_by: beads/crew/fang\n\n## Summary\n\nDocument how formulas work at town vs rig level, for PRIMING.md or separate doc.\n\n## Key Points\n\n### Formula Search Paths\n1. `.beads/formulas/` (project/rig)\n2. `~/.beads/formulas/` (user home)\n3. `$GT_ROOT/.beads/formulas/` (town root)\n\n### Town-Level Formulas\n- Live in `~/gt/.beads/formulas/`\n- Available to all rigs in the town\n- Rig-agnostic (don't assume project context)\n- Examples: crew-cleanup, town-shutdown\n\n### Rig-Level Formulas\n- Live in `~/gt/\u003crig\u003e/.beads/formulas/`\n- Project-specific workflows\n- May reference project files/structure\n- Examples: beads-release (specific to beads repo)\n\n### Mol Mall Vision\n- Formulas are the shareable unit\n- `gt formula install \u003cmall-id\u003e`\n- Version controlled, semantic versioning\n- Dependency declarations\n\n## Deliverable\nAdd section to PRIMING.md or create docs/formulas-architecture.md","status":"closed","priority":3,"issue_type":"task","assignee":"beads/crew/fang","owner":"steve.yegge@gmail.com","created_at":"2026-01-16T19:02:48Z","created_by":"beads/crew/emma","updated_at":"2026-01-16T22:37:52Z","closed_at":"2026-01-16T22:37:52Z","work_type":"mutex"}
{"id":"bd-ymeas","title":"Fix nil pointer panic in bd dep shorthand syntax (GHI #1099)","description":"attached_args: Fix nil pointer dereference in warnIfCyclesExist(). See GHI #1099 for stacktrace and repro steps.\ndispatched_by: beads/crew/emma","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/darcy","owner":"steve.yegge@gmail.com","created_at":"2026-01-17T08:11:23Z","created_by":"beads/crew/emma","updated_at":"2026-01-17T08:14:46Z","closed_at":"2026-01-17T08:14:46Z","work_type":"mutex"}
{"id":"bd-ynga","title":"Test Dolt + JSONL export mode","description":"Per DOLT-STORAGE-DESIGN-V3.md Mode 2: Dolt + JSONL export.\nVerify:\n- Dolt is local truth, JSONL is transport\n- Export on push, import on pull\n- Cell-level merge happens in Dolt after import\n- Best for teams wanting Dolt benefits with git-based federation","status":"open","priority":2,"issue_type":"task","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T02:45:12Z","created_by":"mayor","updated_at":"2026-01-27T02:45:12Z","labels":["testing"]}
{"id":"bd-ypbad","title":"Merge: opal-mk900yed","description":"branch: polecat/opal-mk900yed\ntarget: main\nsource_issue: opal-mk900yed\nrig: beads\nagent_bead: bd-beads-polecat-opal\nretry_count: 0\nlast_conflict_sha: null\nconflict_task_id: null","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-11T05:03:00Z","created_by":"beads/polecats/opal","updated_at":"2026-01-11T05:53:11Z","closed_at":"2026-01-11T05:53:11Z","labels":["gt:merge-request"],"work_type":"mutex"}
{"id":"bd-ypvj","title":"Fix sync.remote config not being respected (GH#872)","description":"bd config set sync.remote \u003cname\u003e sets the value but bd sync still tries to use 'origin'. Need to check where the sync code reads the remote name and ensure it uses the configured value.","status":"closed","priority":1,"issue_type":"bug","assignee":"beads/crew/dave","created_at":"2026-01-03T21:12:51Z","created_by":"beads/crew/grip","updated_at":"2026-01-03T21:24:47Z","closed_at":"2026-01-03T21:24:47Z","work_type":"mutex"}
{"id":"bd-ysal","title":"bd sync --import-only silently fails when run from redirected .beads directory","description":"## Problem\n\nWhen running `bd sync --import-only` from a directory that has a `.beads/redirect` file pointing elsewhere, the command reports success but doesn't actually fix the staleness check.\n\n## Reproduction\n\n1. Have a clone with `.beads/redirect` pointing to another location (e.g., `../../mayor/rig/.beads`)\n2. Run `bd sync --import-only` from the clone directory\n3. Command reports: `Import complete: 0 created, 0 updated, N unchanged, M skipped`\n4. But subsequent `bd list` still fails with: `Error: Database out of sync with JSONL`\n\n## Expected Behavior\n\nEither:\n- The sync should follow the redirect and actually sync the target database\n- Or the command should error/warn that it can't sync a redirected beads location\n\n## Workaround\n\nRun `bd sync --import-only` from the actual beads directory (the redirect target), not the redirected clone.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-07T02:38:46Z","created_by":"gastown/crew/george","updated_at":"2026-01-07T02:50:41Z","closed_at":"2026-01-07T02:50:41Z","work_type":"mutex"}
{"id":"bd-z0v6f","title":"Review and merge PR #991: fix bd init Windows hang","description":"dispatched_by: beads/crew/emma\n\nReview PR #991 from vector76 which fixes bd init hanging on Windows when not in a git repository.\n\n## PR Details\n- URL: https://github.com/steveyegge/beads/pull/991\n- Issue: #990\n- Adds: 11 lines, Deletes: 1 line\n\n## The Bug\nFindBeadsDir() uses a loop that checks `dir != \"/\"` to stop at filesystem root. On Windows, the root is `C:\\` not `/`, causing an infinite loop.\n\n## The Fix\nChanges the loop to explicitly check if `filepath.Dir(dir) == dir` which correctly detects filesystem root on both Unix and Windows.\n\n## Review Tasks\n1. Verify the fix logic is correct\n2. Run tests: `go test ./internal/beads/...`\n3. If tests pass, approve and merge the PR\n\n## Commands\n```bash\ngh pr checkout 991 --repo steveyegge/beads\ngo test ./internal/beads/...\ngh pr review 991 --repo steveyegge/beads --approve\ngh pr merge 991 --repo steveyegge/beads --squash\n```","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/dave","created_at":"2026-01-10T05:16:08Z","created_by":"beads/crew/emma","updated_at":"2026-01-10T05:17:37Z","closed_at":"2026-01-10T05:17:37Z","work_type":"mutex"}
{"id":"bd-z6kw","title":"Refinery gh:run gate auto-discovery","description":"Refinery auto-populates await_id for gh:run gates from recent workflow runs.\n\n## Problem\nGate created by cook has await_type=gh:run but no await_id.\nNeed to discover the run ID from the push that triggered CI.\n\n## Solution\nDuring Refinery patrol:\n1. Find open gh:run gates without await_id\n2. Query: gh run list --workflow=\u003cgate.workflow\u003e --limit=5\n3. Match run to gate (by branch, commit, or time proximity)\n4. Update gate: bd update \u003cgate-id\u003e --await-id=\u003crun-id\u003e\n5. Now bd gate check --type=gh can poll that specific run\n\n## Implementation\n- Add discover-await-ids step to mol-refinery-patrol\n- Use gh CLI to query recent runs\n- Match heuristics: same branch, recent commit, within 5 mins\n- Update gate with discovered run ID\n\n## Acceptance Criteria\n- [ ] Refinery discovers run IDs for gh:run gates\n- [ ] Gates updated with correct await_id\n- [ ] Subsequent polls use run ID\n- [ ] Handles multiple pending gates","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:27:42Z","created_by":"mayor","updated_at":"2026-01-04T23:22:08Z","closed_at":"2026-01-03T00:12:25Z","dependencies":[{"issue_id":"bd-z6kw","depends_on_id":"bd-4k3c","type":"blocks","created_at":"2026-01-23T23:16:09Z","created_by":"import"},{"issue_id":"bd-z6kw","depends_on_id":"bd-d1n1","type":"parent-child","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-z7w5p","title":"Review PR #16215: Fix broken links in plugin docs","description":"dispatched_by: beads/crew/emma\n\nReview and verify PR #16215 (anthropics/claude-code)\n\nPR: https://github.com/anthropics/claude-code/pull/16215\nAuthor: jeremylongshore\n\nFixes broken CONTRIBUTING and LICENSE links.\n- gh pr view 16215 --repo anthropics/claude-code\n- gh pr diff 16215 --repo anthropics/claude-code\n- If good: gh pr merge 16215 --repo anthropics/claude-code --squash","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/fang","created_at":"2026-01-08T22:20:05Z","created_by":"beads/crew/emma","updated_at":"2026-01-08T22:29:36Z","closed_at":"2026-01-08T22:29:36Z","work_type":"mutex"}
{"id":"bd-z8xz","title":"beads-release formula: fix local-install dev path and clarify bump-version.sh","description":"## Overview\n\nThe beads-release formula delegates to a monolithic `bump-version.sh` script, which defeats the purpose of having fine-grained molecule steps:\n\n- **Durability**: If interrupted mid-script, you lose progress and must restart\n- **Visibility**: Activity feed only shows one step, not progress through sub-operations  \n- **Atomicity**: Cant resume from a specific sub-operation\n\nThe formula's fine-grained steps ARE the feature. The script is legacy.\n\n## Current State\n\nThe `run-bump-script` step calls `./scripts/bump-version.sh {{version}}` which does:\n\n### Version Updates (should be individual steps)\n1. `cmd/bd/version.go` - Go version constant\n2. `.claude-plugin/plugin.json` - Plugin manifest\n3. `.claude-plugin/marketplace.json` - Marketplace entry\n4. `integrations/beads-mcp/pyproject.toml` - Python package version\n5. `integrations/beads-mcp/src/beads_mcp/__init__.py` - Python __version__\n6. `npm-package/package.json` - npm package version\n7. `cmd/bd/templates/hooks/*` - Hook template versions (4 files)\n8. `README.md` - Alpha version badge\n9. `CHANGELOG.md` - Stamp [Unreleased] with date\n\n### Local Install (needs dev path added)\n- Build binary: `go build -o bd ./cmd/bd`\n- Copy to `~/.local/bin/bd`\n- **macOS codesigning** (critical - without this binary gets SIGKILL)\n- MCP local install via uv/pip\n- Daemon restart\n\n## Target State\n\n### Phase 1: Break version updates into individual steps\n\nReplace `run-bump-script` with explicit steps:\n- `bump-version-go` - sed on cmd/bd/version.go\n- `bump-plugin-json` - jq on .claude-plugin/*.json\n- `bump-mcp-python` - sed on pyproject.toml and __init__.py\n- `bump-npm-package` - jq on npm-package/package.json  \n- `bump-hook-templates` - sed on cmd/bd/templates/hooks/*\n- `bump-readme` - sed on README.md\n- `stamp-changelog` - sed to add date to [Unreleased]\n\nEach step has explicit commands that can be copy-pasted.\n\n### Phase 2: Fix local-install step\n\nAdd Option 3 for devs building from source:\n```bash\ngo build -o bd ./cmd/bd\ncp bd ~/.local/bin/bd\n# macOS ONLY - prevents SIGKILL (Killed: 9)\n[[ $(uname) == \"Darwin\" ]] \u0026\u0026 codesign --force --sign - ~/.local/bin/bd\n```\n\n### Phase 3: Deprecate bump-version.sh\n\nEither:\n- Add deprecation notice pointing to formula\n- Remove entirely (formula is the authority)\n- Keep as convenience wrapper that just runs `bd mol execute beads-release`\n\n## Acceptance Criteria\n\n- [ ] Formula has explicit steps for each version file update\n- [ ] Each step shows clear commands (no script delegation)\n- [ ] local-install includes build-from-source with codesigning\n- [ ] bump-version.sh is deprecated or removed\n- [ ] Release can complete even if interrupted mid-execution (resume from step)\n","status":"closed","priority":1,"issue_type":"epic","assignee":"beads/crew/emma","created_at":"2026-01-07T08:20:38Z","created_by":"beads/crew/emma","updated_at":"2026-01-07T08:49:36Z","closed_at":"2026-01-07T08:49:36Z","dependencies":[{"issue_id":"bd-z8xz","depends_on_id":"bd-fbkd","type":"related","created_at":"2026-01-23T23:16:09Z","created_by":"import"}],"work_type":"mutex"}
{"id":"bd-zb58j","title":"Review PR gastown#758: fix(formulas) replace hardcoded ~/gt/ paths with $GT_ROOT","description":"dispatched_by: beads/crew/emma\n\nSimple find-replace fix: 26 additions, 26 deletions. steveyegge commented favorably, just needs rebase verification. URL: https://github.com/steveyegge/gastown/pull/758","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/elinor","owner":"steve.yegge@gmail.com","created_at":"2026-01-21T04:01:15Z","created_by":"beads/crew/emma","updated_at":"2026-01-21T04:02:55Z","closed_at":"2026-01-21T04:02:55Z","work_type":"mutex"}
{"id":"bd-zgrh","title":"Pre-existing test failure: TestDaemonAutoStart fails on main","description":"TestDaemonAutoStart has failing subtests on origin/main:\n- shouldAutoStartDaemon_defaults_to_true (autostart_test.go:40)\n- shouldAutoStartDaemon_respects_true (autostart_test.go:82)\n\nThese tests appear to be environment-sensitive and fail when the config file from the workspace affects test defaults.\n\nFound while running bd-oslm (fixing RPC layer abstractions).","status":"open","priority":2,"issue_type":"bug","owner":"steve.yegge@gmail.com","created_at":"2026-01-27T04:15:15Z","created_by":"beads/polecats/opal","updated_at":"2026-01-27T04:15:15Z"}
{"id":"bd-ztnzl","title":"Fix bd init spins forever creating C:\\.beads outside git (GH#996)","description":"dispatched_by: mayor\n\nbd init on Windows spins forever trying to create C:\\.beads when run outside of .git. See https://github.com/steveyegge/beads/issues/996","status":"closed","priority":2,"issue_type":"task","assignee":"beads/crew/giles","created_at":"2026-01-10T20:18:39Z","created_by":"mayor","updated_at":"2026-01-10T20:28:15Z","closed_at":"2026-01-10T20:28:15Z","labels":["bug"],"work_type":"mutex"}
{"id":"bd-zw72","title":"Investigate incremental blocked_issues_cache updates at scale","description":"Current blocked_issues_cache strategy does full DELETE + INSERT on every dependency/status change.\n\n**Problem at scale:**\n- 10K issues: ~50ms rebuild (acceptable)\n- 100K issues: ~500ms rebuild (noticeable)\n- 1M issues: multi-second rebuilds (problematic)\n\n**Current implementation (blocked_cache.go:104-154):**\n- DELETE FROM blocked_issues_cache\n- INSERT with recursive CTE\n\n**Potential optimizations:**\n1. **Incremental updates:** Only add/remove affected issue IDs instead of full rebuild\n2. **Dirty tracking:** Skip rebuild if cache is already valid\n3. **Async rebuild:** Rebuild in background, serve stale cache briefly\n4. **Partial invalidation:** Only invalidate affected subtree\n\n**Decision needed:** Is this premature optimization? Current target is \u003c100K issues.\n\n**Benchmark:** Add benchmark for cache rebuild at 100K scale to measure actual impact.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-23T06:58:55Z","updated_at":"2026-01-02T08:17:14Z","comments":[{"id":16,"issue_id":"bd-zw72","author":"beads/crew/wolf","text":"## Benchmark Investigation Results (2026-01-02)\n\n**Cache rebuild timing:**\n- 10K issues: 773ms (Go benchmark), ~270ms (raw SQL)\n- 20K issues: 1,298ms\n- Extrapolated 100K: ~6.5 seconds\n\nOriginal estimates were 15x too optimistic. Go/CGO/WAL adds ~3x overhead.\n\n**Key insight:** Most dependency changes only affect a localized subgraph. Incremental updates could reduce 773ms to \u003c50ms for typical ops.\n\n**Added:** BenchmarkRebuildBlockedCache_Large/XLarge in sqlite_bench_test.go","created_at":"2026-01-03T01:29:51Z"},{"id":17,"issue_id":"bd-zw72","author":"beads/crew/wolf","text":"## Incremental Update Design Sketch\n\n**When to update cache:**\n1. Add blocks dep → add blocked issue + descendants to cache\n2. Remove blocks dep → check if still blocked, remove if not + propagate to descendants  \n3. Close issue → check dependents, remove unblocked + descendants\n4. Reopen issue → add dependents + descendants back\n\n**Key insight:** Adding to cache is simple (just insert). Removing is complex (must verify no alternate blocking path).\n\n**Proposed approach:**\n- For additions: \\`INSERT OR IGNORE\\` the affected subgraph (fast, O(affected_nodes))\n- For removals: Rebuild only for the affected subgraph, not entire cache\n- Keep full rebuild as fallback for complex cases (waits-for, conditional-blocks)\n\n**Estimated improvement:**\n- Typical add/remove: O(affected_nodes) vs O(all_issues)\n- 10K DB with 1 affected node: ~5ms vs 773ms (150x faster)\n- Worst case (unblock entire graph): same as now\n\n**Implementation complexity:** Medium - need to handle transitive parent-child correctly","created_at":"2026-01-03T01:30:30Z"}],"work_type":"mutex"}
{"id":"bd-zw7pp","title":"Add defensive fix in importer to auto-correct status when deleted_at present","description":"Similar to the existing defensive fix for closed_at (lines 260-267 in multirepo.go), add a fix for the reverse case:\n\nIf an issue has deleted_at set but status != tombstone, auto-correct status to tombstone during import.\n\nThis handles corrupted data gracefully instead of failing import.\n\nExisting pattern in `upsertIssueInTx`:\n```go\n// Defensive fix for deleted_at invariant: tombstones must have deleted_at\nif issue.Status == types.StatusTombstone \u0026\u0026 issue.DeletedAt == nil {\n    maxTime := issue.CreatedAt\n    if issue.UpdatedAt.After(maxTime) {\n        maxTime = issue.UpdatedAt\n    }\n    deletedAt := maxTime.Add(time.Second)\n    issue.DeletedAt = \u0026deletedAt\n}\n```\n\nNeed to add the reverse:\n```go\n// Defensive fix: if deleted_at is set, status must be tombstone\nif issue.Status != types.StatusTombstone \u0026\u0026 issue.DeletedAt != nil {\n    issue.Status = types.StatusTombstone\n}\n```","status":"open","priority":2,"issue_type":"task","assignee":"beads/crew/wolf","owner":"steve.yegge@gmail.com","created_at":"2026-01-12T09:26:27Z","created_by":"mayor","updated_at":"2026-01-12T09:36:56Z","work_type":"mutex"}
